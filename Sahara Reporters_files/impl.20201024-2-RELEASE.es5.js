/*! 20201024-2-RELEASE 2020-10-24 */

function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function __trcCopyProps(e,t,i){for(r in e)t[r]=e[r];if(i)for(var r in i)t[r]=i[r];return t}function __trcFromError(e){return TRC.Browser.ie&&e.message?e.message+"["+e.number+": "+e.name+"]":e.message?e.message+(e.fileName?e.fileName+":"+e.lineNumber:""):e}function __trcClientTimestamp(){var e=new Date,t=e.getHours(),i=e.getMinutes(),r=e.getSeconds()+e.getMilliseconds()/1e3;return(t<10?"0":"")+t+":"+(i<10?"0":"")+i+":"+(r<10?"0":"")+r.toFixed(3)}function __trcLog(e,t,i,r){function n(e){return e&&e.stack&&window.TRCImpl&&TRC.util&&TRC.util.isPercentEnabled(window.TRCImpl.global,"rbox-error-stack-reporting-pct")}function o(e,t){return Math.random()<=+t&&(e<=window.trc_debug_level||document.cookie&&document.cookie.search("taboola-debug")>0)}if(TRC.pConsole("page",TRC.modDebug.getType(e),t,t),"0"==e&&TRC.pConsole("errors",TRC.modDebug.getType(e),t,t),!(window.trc_debug_level<e)){"object"==typeof window.console&&console.log(t);try{if((isNaN(r)||null===r)&&(r=1),o(e,r)){var a={pct:r};if(n(i)){var s=TRCImpl&&TRCImpl.global["rbox-err-stack-max-length"]||250;a.errStack=i.stack.substr(0,s)}TRC.modDebug.logMessageToServer(e,t,a)}}catch(e){}}}function __trcError(e,t,i){__trcLog(0,e+(t?": "+__trcFromError(t):""),t,i),t&&t.stack&&void 0!==window.console&&console.trace&&console.trace()}function __trcDebug(e,t,i){__trcLog(3,e,t,i)}function __trcInfo(e,t,i){__trcLog(2,e,t,i)}function __trcWarn(e,t,i){__trcLog(1,e+(t?"("+t+")":""),t,i)}function __trcDOMWalker(e,t){for(t(e),e=e.firstChild;e;)arguments.callee(e,t),e=e.nextSibling}function __trcJSONify(e){return window.JSON.stringify(e)}!function(){var BaseVideoUnitLoader=function(){function BaseVideoUnitLoader(e){_classCallCheck(this,BaseVideoUnitLoader),this.videoConfig=e}return _createClass(BaseVideoUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData){var unit=eval(videoCallbackData.tags[0].url),rawJsonValue=this.videoConfig.rawJsonValue;return this.setUnitParams(unit,rawJsonValue),unit}},{key:"getVideoContainerSelector",value:function e(){return null}},{key:"setUnitParams",value:function e(t){var i=this,r=this.videoConfig.advancedVideoConfiguration,n={detachToSlider:!0,unitType:!0,parentFeedOptions:!0,rawJsonValue:!0};Object.keys(this.videoConfig).forEach(function(e){i.videoConfig[e]&&(n[e]||t.set(e,i.videoConfig[e]))}),BaseVideoUnitLoader.setAdvancedVideoConfiguration(t,r);var o=this.videoConfig.aggLevel||1,a={level:o};o>1&&t.set("preset",a)}}],[{key:"setAdvancedVideoConfiguration",value:function e(t,i){i&&Object.keys(i).forEach(function(e){var r=TRC.text.splitAndJoin(e,TRC.text.toLowerCamelCase);BaseVideoUnitLoader.setToUnit(t,i,e,r)})}},{key:"setToUnit",value:function e(t,i,r,n){var o={unitType:!0,parentFeedOptions:!0,rawJsonValue:!0};"IN_WIDGET"!==i.unitType&&(o.detachToSlider=!0);var a={"additionalCss.zIndex":"additionalCss.z-index"};o[n]||(a[n]?t.set(a[n],i[r]):t.set(n,i[r]))}}]),BaseVideoUnitLoader}();TRC.BaseVideoUnitLoader=BaseVideoUnitLoader}(),function(e,t,i){var r="trc_modal_hidden",n="trc_modal_mask",o="trc_modal_dialog",a="trc_close_modal",s=t.createElement("div"),l=t.createElement("div"),c,d="";function h(){p(l,r),p(s,r),i.dom.off(t,"keyup",m),i.dom.off(t,"click",g),i.dom.off(t.getElementById(a),"click",g),i.dom.off(e,"message",f)}function u(){p(l,n),p(l,r),p(s,o),p(s,r),w.appendChild(l),w.appendChild(s),t.body.appendChild(R),T(d),c=!0}var p=function e(t,r){if(t.classList)return t.classList.add(r);i.dom.removeClass(t,r),t.className+=" ".concat(r)},m=function e(t){var i;27===(t.which||t.keyCode)&&h()},g=function e(t){var r=t.target||t.srcElement;r!==l&&r.id!==a||(i.dom.stopEvent(t),h())},f=function e(t){/http(s)?:\/\/www\.taboola\.com/.test(t.origin)&&t.data&&1025==+t.data&&h()},v=function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"no",r=[];return r.push('<a id="'.concat(a,'" class="trc_modal_close">&times;</a>\n                <iframe class="trc_modal_frame" scrolling=').concat(i,' frameborder=0 allowTransparency=true src="').concat(t,'"></iframe>')),r.join("")},b=function e(t,i){for(;t.tagName.toUpperCase()!==i.toUpperCase();)t=t.parentNode;return t},C=function r(n){var o=b(n.target||n.srcElement,"A");n&&i.dom.stopEvent(n),c||u();var a=o.getAttribute("tblEnablesScrolling");s.innerHTML=v(o.href,a),i.dom.removeClass(l,"trc_modal_hidden"),i.dom.removeClass(s,"trc_modal_hidden"),i.dom.on(t,"keyup",m),i.dom.on(t,"click",g),i.dom.on(t.getElementById("trc_close_modal"),"click",g),i.dom.on(e,"message",f)},y=function e(i){var r=t.createElement("div");return r.id="tbl-aug-".concat(Math.floor(2147483648*Math.random()).toString(36)),d="#".concat(r.id),i&&i.appendChild(r),r},T=function e(t){TRC.dom.injectStyle("".concat(t,' .trc_modal_dialog { width: 660px; height: 550px; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; padding: 12px; border: 2px solid #417cc3; position: fixed; z-index: 9999999; background: #f7f9fc; top: 50%; left: 50%; margin-top: -250px; margin-left: -330px; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; -ms-box-sizing: content-box; -o-box-sizing: content-box; box-sizing: content-box; -webkit-box-shadow: black 0 0 18px 0; -moz-box-shadow: black 0 0 18px 0; -ms-box-shadow: black 0 0 18px 0; -o-box-shadow: black 0 0 18px 0; box-shadow: black 0 0 18px 0; -webkit-border-radius: 10px; -moz-border-radius: 10px; -ms-border-radius: 10px; -o-border-radius: 10px; border-radius: 10px; }').concat(t," .trc_modal_mask { z-index: 9999998; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #000; opacity: 0.5; filter: alpha(opacity=50); }").concat(t," .trc_modal_close { font-family: sans-serif !important; width: 30px !important; height: 30px !important; font-size: 30px !important; font-weight: bold !important; line-height: 28px !important; color: #fff !important; text-shadow: 0 1px 0 #000; opacity: 0.9; filter: alpha(opacity=90); background: #417cc3; padding: 0; cursor: pointer; border: 0; -webkit-appearance: none; text-align: center; position: absolute !important; top: -13px; right: -13px; text-decoration: none !important; z-index: 9; -webkit-border-radius: 15px !important; -moz-border-radius: 15px !important; -ms-border-radius: 15px !important; -o-border-radius: 15px !important; border-radius: 15px !important; }").concat(t," .trc_modal_hidden { display: none !important; }").concat(t," .trc_modal_frame { width: 100% !important; height: 550px !important; }"),null)},R=y(),_,w=y(y(R));i.aboutUs={open:C,close:h}}(window,document,TRC),function(e,t){TRC.blocker=TRC.blocker||{states:{ABP_DETECTION_DISABLED:-2,ABP_NOT_DETECTED:0,ABP_DETECTED:1},createBlockDetectionDiv:function(e){var i=t.createElement("div");return i.className=e,i.style.fontSize="12px",i.style.lineHeight="1",i.appendChild(t.createTextNode(".")),t.documentElement.appendChild(i),i},isBlockDetectedOnDiv:function(e){return e.offsetHeight?(TRC.pConsole("page","warn","No AdBlockPlus detected on div with class: "+e.className),!1):(TRC.pConsole("page","warn","AdBlockPlus detected on div with class: "+e.className),!0)},isBlockDetectedOnClassNames:function(e){var i,r=e.length,n;for(i=0;i<r;i++)if(e[i]){n=this.createBlockDetectionDiv(e[i]);try{if(this.isBlockDetectedOnDiv(n))return!0}catch(e){TRC.pConsole("page","error","unable to inspect offsetHeight of div with class: "+n.className)}finally{t.documentElement.removeChild(n)}}return!1},getBlockedState:function(e,t){return this.blockedState!==this.states.ABP_DETECTED||t?(this.blockedState=e&&this.isBlockDetectedOnClassNames(e)?this.states.ABP_DETECTED:this.states.ABP_NOT_DETECTED,this.blockedState):this.blockedState}}}(window,document),function(){TRC.amp={};var e=TRC.amp,t,i;e.getRboxContainer=function(){return t||(t=document.getElementsByClassName("trc_rbox_container")[0]),t},e.getAMPContainer=function(){return i||(i=document.getElementById("c"))},e.setAMPmodule=function(t){t.manualVisibilityTrigger=!0,t.disableReadMore=!0,t.slider=!1;var i=null,r=this.sendAMPResize,n=this.sendAMPFeedResize,o=t.global["amp-neg-threshold"]||5,a=t.global["amp-pos-threshold"]||100,s=t.global["amp-debounce-time"]||200,l=void 0!==t.amp_disable_resize?t.amp_disable_resize:t.global["amp-disable-resize"],c="function"==typeof t.global["amp-onrender"]?t.global["amp-onrender"]:function(){return!0};e.getAMPContainer().classList.add("tbl-amp-container"),TRC.eventDelegator.subscribe("onrender",function(t){var d={negative:o,positive:a};if(!c(t)||l)return!1;null===i&&(i=!(!t.container.placementData||!t.container.placementData.isFeedCard)),i?(e.getAMPContainer().style.position="static",n()):(r(d,TRC.lastVisibleRects?TRC.lastVisibleRects:null),TRC.listen("visible::"+t.placement,TRC.util.debounce(r.trcBind(this,d),s,!1,this)))})},e.sendAMPResize=function(t,i){var r=i?i.boundingClientRect.height:TRC.dom.getWindowHeight(),n=e.getRboxContainer().scrollHeight,o=r-n,a=o<0?t.negative:t.positive;Math.abs(o)>=a&&window.context.requestResize(void 0,n)},e.sendAMPFeedResize=function(){window.context.requestResize(void 0,e.getAMPContainer().offsetHeight+50),TRC.dispatch("ampFeedResize")}}(),function(e,t){TRC.aspect={before:function(e,t,i,r){var n=e[t];e[t]=function(){return r&&(e[t]=n),i.apply(this,arguments),n.apply(this,arguments)}},after:function(e,t,i,r){var n=e[t];e[t]=function(){r&&(e[t]=n);var o=n.apply(this,arguments);return i.apply(this,arguments),o}}}}(window,document),function(e,t){var i=function(){this.dom=!!t.getElementById&&1,this.dom&&(!t.importNode||(this.dom=2),!t.normalizeDocument||(this.dom=3));var i=this.opera=!!e.opera&&9;if(this.opera&&(!navigator.geolocation||(this.opera=10),!e.opera.version||(this.opera=parseFloat(e.opera.version()))),this.ie=navigator.userAgent.match(/Trident/)&&/rv:11.0/i.test(navigator.userAgent)?11:"object"==typeof t.all&&!i&&("CSS1Compat"!=t.compatMode?6:e.XMLHttpRequest?Object.defineProperty?"object"!=typeof DOMImplementation||"function"!=typeof DOMImplementation.prototype.createDocument?8:e["msMatchMedia"]?10:9:7:6),this.webkit=!!e.openDatabase&&!this.opera,this.chrome=!(!this.webkit||!e.chrome),this.safari=this.webkit&&!this.chrome,this.safari&&(!t.compareDocumentPosition||(this.safari=4),!navigator["registerContentHandler"]||(this.safari=5),!e["matchMedia"]||(this.safari=6)),this.firefox=!!navigator.userAgent.match(/firefox/i),this.firefox){try{"function"==typeof t.createElement("canvas").getContext&&(this.firefox=1.5)}catch(e){}"object"==typeof e["globalStorage"]&&(this.firefox=2),!t.elementFromPoint||(this.firefox=3),!t.querySelector||(this.firefox=3.5),!t.getElementsByTagName("head")[0]["mozMatchesSelector"]||(this.firefox=3.6),!e.Uint8Array||(this.firefox=4),!Function.prototype["isGenerator"]||(this.firefox=5),!e["matchMedia"]||(this.firefox=6),!e.FileReader||!e.FileReader.prototype.readAsArrayBuffer||(this.firefox=7),!t.head||!t.head.insertAdjacentHTML||(this.firefox=8)}for(var r=["firefox","chrome","safari","webkit","khtml","ie","opera"],n=0;n<r.length;n++)!function(e,t){e[t+"Upto"]=function(e){return this[t]&&("number"!=typeof this[t]||this[t]<=e)},e[t+"Atleast"]=function(e){return this[t]&&("number"!=typeof this[t]||this[t]>=e)}}(this,r[n]);return this.compatibility={lineClamp:void 0!==t.createElement("div").style["webkitLineClamp"],cssTransforms:function(){for(var e=t.createElement("div"),i=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<i.length;r++)if(void 0!==e.style[i[r]])return!0;return!1}(),passiveEvents:function(){var e=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}()},this},r=function(){var e;this.isTouchDevice="ontouchstart"in window,this.deviceType=(e=navigator.userAgent.match(/iPhone|iPod|iPad/i))?e[0]:"other"};TRC.Browser=new i,TRC.Device=new r}(window,document),function(){var e=function(){function e(t,i,r){_classCallCheck(this,e),this.localStorage=t,this.cacheName=i,this.cacheTtl=r}return _createClass(e,[{key:"isOverTtl",value:function e(t){var i;return(new Date).getTime()-t>this.cacheTtl}},{key:"setCacheClean",value:function e(t,i){var r=this.localStorage,n=this.cacheName,o=this.cacheTtl;TRC.Timeout.set(function(){TRC.tlf&&console.time("in setCacheClean"),i.removeKey(t),r.setValue(n,__trcJSONify(i.getData())),TRC.tlf&&console.timeEnd("in setCacheClean")},o)}},{key:"cleanCache",value:function e(t,i,r){for(var n=t||TRC.util.keys(i.getData()),o,a=0;a<n.length;a++)o=n[a],this.isOverTtl(i.getValue(o).s)&&r.removeKey(o);this.localStorage.setValue(this.cacheName,__trcJSONify(i.getData()))}},{key:"getCache",value:function e(t){var i=this.localStorage.getValue(this.cacheName)||{};try{if(i)return t.getDummyStorage(TRC.util.jsonParseWithNative(i))}catch(e){return t.getDummyStorage()}}}],[{key:"removeKey",value:function e(t,i){return!!i.getValue(t)&&(i.removeKey(t),!0)}}]),e}();TRC.CacheUtils=e}(),function(){var e="allowed-categories-map",t=function(){function t(i){_classCallCheck(this,t);var r=i.trc,n=r.sourceCategory,o=r.global,a=TRC,s=a.publisherId,l=a.dom.addClass,c=o[e],d={};if(this.text="",this.isCategoryCard=!0,this.sourceCategory=n,l(i.container,"tbl-category-card-enabled"),n){c&&(d=c[s]||c);var h=d[n];h?(this.render=this.validateCategoryLogic(i),this.render&&(l(i.container,"tbl-category-card-rendered"),this.text=h.toUpperCase())):this.sendEvent("No category translation")}else this.sendEvent("No Source Category")}return _createClass(t,[{key:"sendEvent",value:function e(t){TRCImpl.sendAbTestEvent("category-card","Channel: ".concat(this.sourceCategory,", Result: ").concat(t))}},{key:"validateCategoryLogic",value:function e(t){var i=t.recommendationList.length,r=void 0===i?0:i;if(!r)return!1;for(var n=0;n<r;n++){var o=t.recommendationList[n];if(!o.category)return this.sendEvent("No Category"),!1;if(this.sourceCategory!==o.category)return this.sendEvent("fallback. item category is: ".concat(o.category)),!1}return!0}}],[{key:"enableCategoryCard",value:function e(t){return!!t.trc.getProperty(t.mode_name,"enable-category-card",t.propertiesOverride)}}]),t}();TRC.CategoryCard=t}(),function(e,t,i){var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h.isInitialized=!0,o(i),n(t),TRC.dom.injectStyle("a.tbl-ccpa { font-weight: normal; font-size: 11px; Color: #999999; margin: 0 3px 0 0; text-decoration: none; font-family: Arial, Helvetica, sans-serif; float: right; } a.tbl-ccpa.tbl-ccpa-left { float: left; } a.tbl-ccpa.tbl-ccpa-right { float: right; }.logoDiv a.tbl-ccpa span { font-size: 11px; color: #999999; }div.tbl-feed-header.tbl-ccpa-container .tbl-ccpa { margin-top: 3px; }div.tbl-feed-header.tbl-ccpa-container div.tbl-feed-header-logo { display: inline-block; }.trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::before { content: '|'; margin-right: 2px; font-size: 11px; color: #999999; }.tbl-rtl .tb-ccpa-mobile { line-height: 11px; }.tbl-rtl .logoDiv.link-ccpa { display: inline-block; }.tbl-rtl div.tbl-feed-header .tbl-ccpa { margin-top: 0; }.tbl-rtl .trc-widget-footer a.tbl-ccpa { float: none; } .tbl-rtl .trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::before { content: ''; } .tbl-rtl .trc-widget-footer a.tbl-ccpa.tbl-cpa-pipe-before::after { content: '|'; margin-left: 2px; font-size: 11px; color: #999999; }",null),d()},n=function e(t){var r=h.config&&h.config.placement;if(r)return i.ccpa.placement=r,r;for(var n=0;n<t.length;n++){var o=t[n];if((r=o.dc||o.uuip||o.uip).toLowerCase().indexOf("below")>-1&&o.v.length>0)return h.placement=r,r}h.placement=r},o=function e(t){var i=t.markup,r=void 0===i?"CCPA Notice":i,n=t.href,o=void 0===n?"https://ccparequest.taboola.com/":n,a=t.enableScrolling,s=void 0===a?"yes":a,l=t.classList,c=t.style,d=t.inlineStyle,u=void 0===d?"":d,p=t.location,m=void 0===p?"beforeend":p,g=t.renderOnce,f=void 0===g||g,v=t.placement,b=void 0===v?"":v,C=l?[].concat(_toConsumableArray(l),["tbl-ccpa"]):"tbl-ccpa";h.config={markup:r,href:o,enableScrolling:s,classList:C,style:c,inlineStyle:u,location:m,renderOnce:f,placement:b}},a=function e(t){var i=h.config,r=h.firstTime,n=h.placement;return i&&!i.renderOnce||r&&n===t},s=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.ccpa.firstTime=!1;var n="tbl-ccpa-container";TRC.dom.isSmartPhone()&&(n+=" tb-ccpa-mobile"),TRC.dom.addClass(t,n);var o=TRC.util.merge({},h.config,r);TRC.PopupLink.create(t,o)},l=function e(t,i,r){if(h.shouldCreateCcpa(i)){var n={},o="";"RIGHT"===r?o=" tbl-ccpa-left":"LEFT"===r&&(o=" tbl-ccpa-right"),n.classList="".concat(h.config.classList).concat(o),h.create(t,n)}},c=function e(t){if(!t.isFeedCard&&a(t.placement)){var i=t.getWidgetFooter(),r="";i.children.length>0&&(r=" tbl-cpa-pipe-before");var n={markup:"<span>".concat(h.config.markup,"</span>"),classList:"".concat(h.config.classList," tbl-ccpa-on-widget").concat(r),location:"afterbegin",wrapper:{type:"div",className:"logoDiv link-ccpa"}};t.hasAdChoicesLogo&&(n.children='<span class="trc_logos_v_align">&nbsp;</span>'),h.create(i,n)}},d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"taboola",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Rendered",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(TRC.dom.isInIframe()){var n="in-iframe";r=r?[r,n].join(", "):n}var o={event_type:"ccpa",event_state:i,event_value:t,event_msg:r};TRCImpl.sendEvent("supply-feature",{d:JSON.stringify(o)},null)},h=i.ccpa={placement:"",isInitialized:!1,firstTime:!0,sendCcpaEvent:d,create:s,init:r,shouldCreateCcpa:a,renderOnWidgetFooter:c,renderOnHeaderFeed:l}}(window,document,TRC),function(){var e=0,t=1,i=2,r=3,n=5,o={taboola_default:"BOOx2jhOOx2mtAKABDENAqAAAAAYSAAA"},a={cmpStatus:r},s="",l={getConsentData:[]},c={getConsentData:1};function d(){a.gdprApplies=!0,a.consentData=o.taboola_default,a.consentPreset="taboola_default"}function h(e,t,i){c[e]&&l[e].push(i)}function u(t){t.cmpStatus=e,v(t)}function p(){return!!window.__cmp&&(window.__cmp("getConsentData",null,u),!0)}function m(e,t){if(t&&("tcloaded"===e.eventStatus||"useractioncomplete"===e.eventStatus)){g(e),v(a);try{window.__tcfapi("removeEventListener",2,function(){},e.listenerId)}catch(e){__trcWarn("Error while calling __tcfapi:removeEventListener",e)}}}function g(t){a.cmpStatus=e,a.gdprApplies=t.gdprApplies,a.tcString=t.tcString,a.consentData=null}function f(){try{return window.__tcfapi("addEventListener",2,m),!0}catch(e){__trcWarn("Error while calling __tcfapi:addEventListener",e)}}function v(e){a=TRC.util.merge(a,e),b()}function b(){var e=l["getConsentData"];if(!0!==e.pushOverride){e.push=function(e){"function"==typeof e&&e(a)},e.pushOverride=!0;for(var t=0;t<e.length;t++)e[t](a)}}function C(e){try{window.__tcfapi("getTCData",2,function(t,i){i&&(g(t),a=TRC.util.merge(a,e))})}catch(e){__trcWarn("Error while calling __tcfapi:getTCData",e)}v()}TRC.consent=TRC.consent||{},TRC.consent.setPresets=function(e){o=TRC.util.merge(o,e)},TRC.consent.setConsent=function(t){"tcf"===s?C(t):TRC.consent.hasCMP()?(d(),t&&(a.cmpStatus=t.consentData?e:a.cmpStatus,a.consentPreset=t.consentData?"":a.consentPreset,(a=TRC.util.merge(a,t)).consentData=o[t.consentPreset]||a.consentData),v()):__trcError("TRC.consent.setConsent:- no consent source was set")},TRC.consent.getConsentStatus=function(){return a.cmpStatus},TRC.consent.hasCMP=function(){return!!s},TRC.consent.setConsentSource=function(e,i){return d(),s=e.source.toLowerCase()||s,o=TRC.util.merge(o,e.presets),TRC.cmp=h,a.cmpStatus=t,i&&(o=i),"tcf"===s?f():"iab"!==s||p()},TRC.consent.getAMPConsent=function(e,t){if(window.context)if(t&&!TRC.util.isEmptyString(window.context.initialConsentValue))a.tcString=window.context.initialConsentValue,a.gdprApplies=!0,a.consentData=null,a.cmpStatus=n,e(null,a);else if("function"==typeof window.context.getConsentState)try{window.context.getConsentState(function(t){1===t.consentState?e("true",null):2===t.consentState?e("false",null):e(null,null)})}catch(t){__trcError("Error while calling AMP getConsentState",t),e(null,null)}else e(null,null);else e(null,null)},window._trcIsUTactive&&(TRC.consent.setCurrentSource=function(e){s=e,l={getConsentData:[]},a={cmpStatus:r}})}(),TRC.CustomModulesManager={registeredModules:{},getPath:function e(t,i){switch(t){case void 0:case"ui-innovation":return"".concat(this.PATH.UI,"/").concat(i);case"demand-formats":return"".concat(this.PATH.DEMAND,"/").concat(i);default:return t}},setGlobalPaths:function e(){var t=TRCImpl.global["cdn-taboola-path"]||"cdn.taboola.com";this.setGlobal=!0,this.CDN=TRC.shiftDomain(t),this.PATH={UI:TRCImpl.global["ui-innovation-modules-path"]||"ui-ab-tests",DEMAND:"demand-formats"}},getCustomModulesFromResponse:function e(t){if(t&&t.trc){var i={feedExtension:this.createModuleMap(t.trc.f,!0,"drp"),demandGenericAction:this.createModuleMap(t.trc.dcga,!1),clientGenericActionPageLevel:this.createModuleMap(t.trc.cga,!1),clientGenericActionPlacementLevel:this.createModuleMap(t.trc.vl,!0,"cga")};this.loadModules(i)}},createModuleMap:function e(t,i,r){return{root:t,loop:i,key:r}},loadModules:function e(t){var i=this,r;!this.setGlobal&&this.setGlobalPaths(),Object.keys(t).forEach(function(e){var r=t[e];r.root&&(r.loop?i.loadModulesFromChildren(r):i.loadModulesFromRoot(r))})},loadModulesFromChildren:function e(t){var i=this;Object.keys(t.root).forEach(function(e){var r=t.root[e];r&&r[t.key]&&r[t.key].customModules&&i.loadCustomModules(r[t.key].customModules,e)})},loadModulesFromRoot:function e(t){t.root&&t.root.customModules&&this.loadCustomModules(t.root.customModules)},loadCustomModules:function e(t,i){var r=this;try{var n=__trcUnJSONify(t);Object.keys(n).forEach(function(e){r.loadModule(e,n[e],i)})}catch(e){__trcError("Error while trying to parse json custom module, error msg: ".concat(e," ,module data: ").concat(t))}},loadModule:function e(t,i,r){var n=this.registeredModules[t],o;if(n&&-1===n.feedsOriginPlacementNames.indexOf(r)&&n.feedsOriginPlacementNames.push(r),!n&&!0!==i.disable){n=this.registeredModules[t]={options:i,moduleName:t,feedsOriginPlacementNames:[r]};var a=this.getPath(i.path,t);if(this.shouldLoadResource(i.js)&&!n.jsRequested){TRC.customHooks||(TRC.customHooks={});var s=i.js||t;this.loadModuleResource("".concat(a,"/").concat(s),"js",t,n),n.jsRequested=!0}if(this.shouldLoadResource(i.css)&&!n.cssRequested){var l=i.css||t;this.loadModuleResource("".concat(a,"/").concat(l),"css",t,n),n.cssRequested=!0}}},shouldLoadResource:function e(t){return void 0===t||!TRC.util.isFalse(t)},runHook:function e(t,i,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),a=3;a<n;a++)o[a-3]=arguments[a];this.dispatchHook(t,i,r,o)},dispatchHook:function e(t,i,r,n){var o=this;Object.keys(this.registeredModules).forEach(function(e){var a=o.registeredModules[e];if(o.isRelevantType(i,a,r))if(a.ready){var s=o.getModuleHook.apply(o,[a,t,r].concat(_toConsumableArray(n)));s&&s()}else TRC.listen("TRC.".concat(e,".ready"),function(){var e=o.getModuleHook.apply(o,[a,t,r].concat(_toConsumableArray(n)));e&&e()})})},isRelevantType:function e(t,i,r){var n=i.options,o=n.uiModes,a=n.placements;return!t||(r instanceof TRC.Feed?-1!==i.feedsOriginPlacementNames.indexOf(r.mainContainerPlacement)&&(!a||t&&a&&a.indexOf(t)>-1):r instanceof TRC.implClasses.TRCRBox?!o||t&&o&&o.indexOf(t)>-1:void 0)},getModuleHook:function e(t,i,r){for(var n,o=TRC.customHooks[t.moduleName],a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o&&o.hooks&&o.hooks[i]&&(n=o.hooks[i]).trcBind.apply(n,[r].concat(s,[r]))},loadModuleResource:function e(t,i,r,n){var o="".concat(TRC.PROTOCOL,"//").concat(this.CDN,"/").concat(t,".").concat(i);TRC.net.loadScript(o,i,function(e){"error"===e.type?__trcError("Failed to load custom module resource ".concat(o)):(n["".concat(i,"Ready")]=!0,!1!==n.options.js&&!n.jsReady||!1!==n.options.css&&!n.cssReady||(TRC.dispatch("TRC.".concat(r,".ready")),n.ready=!0))})}},function(e,t){TRC.docVisibilityUtil=function(){var e="",i="";if(void 0!==t.hidden?(e="hidden",i="visibilitychange"):void 0!==t.msHidden?(e="msHidden",i="msvisibilitychange"):void 0!==t.webkitHidden&&(e="webkitHidden",i="webkitvisibilitychange"),!e)return{addEventListener:function e(){},isVisible:function e(){return null}};function r(){return!t[e]}function n(e){t.addEventListener(i,function(){e(r())},!1)}return{addEventListener:n,isVisible:r}}()}(window,document),TRC.lazyLoadingDependencies={"distance-from-article":[{fileName:"article-detection",objectName:"ArticleDetection"}]},TRC.ModuleLoader={requestedModules:{},load:function e(t,i,r){var n=this;if(i)r();else if(this.requestedModules[t])this.requestedModules[t].callbacks.push(r);else{this.requestedModules[t]={callbacks:[this.logSuccessToPerformance.trcBind(this,t),r]};var o=this.toFingerPrintedName(t),a=TRC.lazyLoadingDependencies[t];if(TRC.performance&&TRC.performance.mark("moduleLazyLoad".concat(t,"start"),null,"",t,"moduleLazyLoadTime",TRC.PerfEvenType.START),!a||a.length<=0)TRC.loadTaboolaScript(o,!0,this.requestedModules[t].callbacks,function(e){n.logError(e,o,t)});else{TRC.loadTaboolaScript(o,!0,function(){},function(e){n.logError(e,o,t)});var s=0;a.forEach(function(e){n.load(e.fileName,TRC[e.objectName],function(e){var i;++s===a.length&&n.chainCallbacks(n.requestedModules[t].callbacks)(e)})})}}},logSuccessToPerformance:function e(t){TRC.performance&&TRC.performance.mark("moduleLazyLoad".concat(t,"stop"),null,"",t,"moduleLazyLoadTime",TRC.PerfEvenType.STOP)},toFingerPrintedName:function e(t){var i="".concat(TRC.hasES6Support()?"es6":"es5",".js");return"".concat(t,".").concat(TRC.version,".").concat(i)},chainCallbacks:function e(t){return Array.isArray(t)?function(e){t.forEach(function(t){return t(e)})}:"function"==typeof t?t:function(){}},logError:function e(t,i,r){__trcError("failed to load module ".concat(i,". Error is: ").concat(t.message)),this.requestedModules[r]=null}},function(e){var t=!!e.navigator.sendBeacon;TRC.hasNetworkAsyncSupport=function(){return t},TRC.sendPostAsyncCall=function(i,r){return!!t&&(e.navigator.sendBeacon(i,r),!0)}}(window),TRC.RBoxUsage={logUsage:function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.file,n=void 0===r?"":r,o=i.method,a=void 0===o?"":o,s=i.position,l=void 0===s?"":s,c=i.skipCaching,d=i.extraData,h=void 0===d?{}:d;TRCImpl&&TRCImpl.global&&TRCImpl.global["disable-rbox-usage-logging"]||TRC.modDebug.logMessageToServer(4,t,{file:n,method:a,position:l,extraData:__trcJSONify(h)},c)}},function(){var e=function(){function e(){_classCallCheck(this,e),this.cardIndexOnPage=0}return _createClass(e,[{key:"shouldRenderCTAForItem",value:function e(t,i){var r=i.video_data;if(this.cardIndexOnPage++,!TRC.Browser.ieUpto(10)){if(!r["cta-text"])return!1;if(!r.isSyndicated)return!1;if(!i.rbox.isFeedCard)return!1;if("start"===i.thumbnail_position)return!1;var n=i.detail_order,o=i.link;return(!n||!n.length||"branding"!==n[0])&&(!!o&&(this.sendAbTestEvent("rendered",r.itemIndex,t.placement),!0))}}},{key:"sendAbTestEvent",value:function e(t,i,r){var n={module:"cta-lazy-module",event:t,cardIndexOnPage:this.cardIndexOnPage,index:i,placement:r};window.TRCImpl.sendAbTestEvent("cta-lazy-module",JSON.stringify(n))}}],[{key:"renderCTAItem",value:function e(t,i){TRC.ModuleLoader.load("call-to-action-component",TRC.CallToActionComponent,function(){i.CallToActionComponent=new TRC.CallToActionComponent(t,i),i.CallToActionComponent.renderCTAButton()})}}]),e}();TRC.CTAManager=e}(),TRC.css=TRC.css||{},TRC.css.utils=function(){var e=0,t=0,i="",r=4040,n=" style_split",o="{class},",a="vidiscovery-note";function s(e,i){var r=e.indexOf("@media")>=0?"".concat(e.split("{")[0],"{"):"",n=(e=r?e.substring(e.indexOf("{")+1):e).split("{"),o=n.length>1?n[0].split("."):e.split("."),s;if(o.length<2)return r+e;var l=o[1];return __trcTrim(l)===a?r+e:(i[__trcTrim(l)]?(h(1),o[0]="#".concat(i[__trcTrim(l)].cssDivsArr.join(" #")," ").concat(o[0])):(h(t),o[0]=m(o.join("."))+o[0]),n.length>1?(n[0]=o.join("."),r+n.join("{")):r+o.join("."))}function l(e,t){var i=e.split(","),o=i.length,a="";if(p()>r&&(a=n,__trcDebug("Number of augmented css rules before Split : ".concat(p())),u(0)),null===t)return c(o<2?e:i,a);if(o<2)return a+s(e,t);for(var l=0;l<o&&(i[l]=s(i[l],t),!(i[l].indexOf("{")>=0&&l<o-1));l++);return a+i.join(",")}function c(e,t){var i=e.length;if("string"==typeof e)return h(1),t+e;for(var r=0;r<i&&(h(1),!(e[r].indexOf("{")>=0&&r<i-1));r++);return t+e.join(",")}function d(e,t){var i=e.split("}"),r;return i.length<2?l(e,t):(i.forEach(function(e){return l(e,t)}),i.join("}"))}function h(t){e+=t}function u(t){e=t}function p(){return e}function m(e){return g(!1,!1).replace(new RegExp("{class}","gm"),e)}function g(e,r){var n;if("object"===_typeof(e)){i="",Object.keys(e).forEach(function(r){"string"==typeof r&&""!==r&&(n="#".concat(e[r].cssDivsArr.join(" #")," "),i="".concat(i).concat(n," ").concat(o)),t++});var a="#".concat(r.iframe.join(" #")," ").concat(o),s="#".concat(r.topDiv.join(" #")," ").concat(o),l=i.slice(0,i.length-o.length);return i="".concat(a).concat(s).concat(l)}return i}function f(e,t,i){var r=i.modes,n=r[TRC.inflate.COMMON],o="",a="";return e&&e.forEach(function(e){var s=i.preloadRequest[e.uip],l=e.m||(s?s.mode:void 0);l&&TRC.injectedModes.indexOf(l)<0&&r[l]&&(o+=TRC.inflate.inflateStyle(l,TRC.inflate.inflateObject(n[TRC.inflate.STYLE],r[l][TRC.inflate.STYLE])),t&&(a+=r[l].mode_custom?r[l].mode_custom:""),TRC.injectedModes.push(l))}),{inflatedStyle:o,customCss:a}}return{bakeCss:function e(t,i){var r=i.global["enable-custom-injection"];TRC.injectedModes=TRC.injectedModes||[];var n=TRC.injectedCustomStyle?"":i.defaults.style+i.global.style.rtl,o=f(t.trc.vl,r,i);n+=o.inflatedStyle,n+=i.global.style.custom&&!TRC.injectedCustomStyle?i.global.style.custom:"",n+=r?o.customCss?o.customCss:"":i.global.style.mode_custom&&!TRC.injectedCustomStyle?i.global.style.mode_custom:"",n+=TRC.injectedCustomStyle?"":TRC.dom.pullAggregatedStyle(),TRC.blocker.blockedState>0&&i.global["switch-abp-class"]&&(n=this.ABPswap(n)),n&&(TRC.dom.injectStyle(n,null),TRC.injectedCustomStyle=!0)},setStyleTextIdPrefix:function e(t,i,r){i&&g(i,r);var n=d(t,i);return __trcDebug("Number of augmented css rules left : ".concat(p())),u(0),n},setStyleElements:function e(t){var i=t.split(n),r;i.length>1&&TRC.pConsole("page","debug","splitting css",""),i.forEach(function(e){return TRC.dom.injectStyle(e)})},setStyleProperty:function e(t,i,r,n){var o=t.style.cssText;o+=";".concat(i,":").concat(r).concat(n?"!important":""),t.style.cssText=o},generateCssRuleWithVendorPrefixes:function e(t,i){var r=[" -webkit-","-moz-","-ms-","-o-"],n,o="{property}: {value};".replace("{property}",t).replace("{value}",i),a=[];return r.forEach(function(e){return a.push(e+o)}),a.push(o),a.join(" ")},escape:window.CSS&&window.CSS.escape||function(e){var t=function e(t){this.message=t};(t.prototype=new Error).name="InvalidCharacterError";for(var i=String(e),r=i.length,n=-1,o,a="",s=i.charCodeAt(0);++n<r;){if(0===(o=i.charCodeAt(n)))throw new t("Invalid character: the input contains U+0000.");a+=o>=1&&o<=31||127===o||0===n&&o>=48&&o<=57||1===n&&o>=48&&o<=57&&45===s?"\\".concat(o.toString(16)," "):o>=128||45===o||95===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?i.charAt(n):"\\".concat(i.charAt(n))}return a}}}(window),TRC.css.Stack=function(e,t){var i=e.stack,r=e.idPrefix,n=void 0===r?"tab_":r,o={},a=document.createDocumentFragment(),s=t?document.head.appendChild(document.createElement("style")):null;i.forEach(function(e){return o[e.type]=TRC.dom.injectStyle(e.cssText||"",a,n+e.type)}),this.injectAllStyles=function(){s?document.head.insertBefore(a,s):document.head.appendChild(a),TRC.styleInjected=!0},this.addStyle=function(e,t,i){var r=o[e],s=i?document:a,l=n+e;t&&(r?r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(document.createTextNode(t)):o[e]=TRC.dom.injectStyle(t,s,l))}},TRC.css.responsive=function(){function e(e,t){return(99.99-e*t)/e}function t(t,i,r,n,o,a){var s=e(t,r),l="rtl"===a?"right":"left",c=TRC.css.utils,d=".".concat(i," .videoCube{width: ").concat(s,"%; position: relative; float: ").concat(l,"; margin: 0 0 ").concat(r,"% 0; margin-").concat(l,": ").concat(r,"%;}");o?n.push(c.setStyleTextIdPrefix(d,TRC.modesCache,TRC.lightBoxCssReset)):n.push(d)}function i(e,t,i,r,n){var o="rtl"===n?"right":"left",a="rtl"===n?"left":"right",s=".".concat(t," .trc_rbox_div .videoCube {width: ").concat(1==+e.cells?"100":"48","%;}"),l=".".concat(t," .trc_header_left_column {width: ").concat(1==+e.cells?"100":"48","%;}"),c=".".concat(t," .trc_header_right_column {display: ").concat(1==+e.cells?"none":"inline",";}"),d=".".concat(t," .trc_rbox_div div.videoCube:nth-of-type(-n+").concat(e.rows,"){float:").concat(o,";clear:").concat(o,";}"),h=".".concat(t," .trc_rbox_div div.videoCube:nth-of-type(n+").concat(e.rows+1,"){float:none;clear:").concat(a,";margin-").concat(o,":auto;}");r?(i.push(TRC.css.utils.setStyleTextIdPrefix(h,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(d,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(s,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(l,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(c,TRC.modesCache,TRC.lightBoxCssReset))):(i.push(h),i.push(d),i.push(s),i.push(l),i.push(c))}function r(e,t,i,r,o,a,s){var l=e.rows*e.cells,c=".".concat(t," div.videoCube:nth-of-type(-n+").concat(l,"){display:block;visibility:visible;}"),d=".".concat(t," div.videoCube:nth-of-type(n+").concat(l+1,"){display:none;visibility:hidden;}");o?(i.push(TRC.css.utils.setStyleTextIdPrefix(c,TRC.modesCache,TRC.lightBoxCssReset)),i.push(TRC.css.utils.setStyleTextIdPrefix(d,TRC.modesCache,TRC.lightBoxCssReset))):(i.push(c),i.push(d)),a&&n(e,t,i,s)}function n(e,t,i,r){var n,o=e.cells/r*100;i.push(".".concat(t," .trc_rbox_div { width: ").concat(o,"%; }")),i.push(".".concat(t," .trc_rbox_outer { overflow-x: scroll; -webkit-overflow-scrolling: touch; }"))}function o(e,t,i,r,n){var o="rtl"===i?"right":"left";return r?".".concat(t," .trc_rbox_div{margin-").concat(o,":-").concat(e.margin*e.cells/n,"%;}"):".".concat(t," .trc_rbox_outer{margin-").concat(o,":-").concat(e.margin,"%;}")}function a(e,i,r,n,a,s,l){var c=1==+e.cells?"video-label-box":"trc-main-label",d=".".concat(i," .trc_rbox_outer .videoCube .").concat(c," {height:auto;}"),h=".".concat(i," .trc_rbox_outer .videoCube {margin-bottom:10px;}"),u=o(e,i,a,s,l),p=TRCImpl.global["disable-one-row-widget-auto-height"],m=(s||!p)&&1==+e.rows;(1==+e.cells||m)&&(n?(r.push(TRC.css.utils.setStyleTextIdPrefix(d,TRC.modesCache,TRC.lightBoxCssReset)),r.push(TRC.css.utils.setStyleTextIdPrefix(h,TRC.modesCache,TRC.lightBoxCssReset))):(r.push(d),r.push(h))),n?r.push(TRC.css.utils.setStyleTextIdPrefix(u,TRC.modesCache,TRC.lightBoxCssReset)):r.push(u),r.push(".".concat(i," .videoCube_aspect{padding-bottom:").concat(e.ratio,"%; width: 100%;}")),t(e.cells,i,e.margin,r,n,a)}return{injectedStyles:{},rulesToCssText:function e(t,n,o,s,l,c,d,h){var u=[],p,m,g;for(p=0;m=n[p];p++)(g=void 0!==m.min||void 0!==m.max)&&u.push("@media screen and "),void 0!==m.min&&(u.push("(min-width: ".concat(m.min,"px) ")),m.max&&u.push("and ")),void 0!==m.max&&u.push("(max-width: ".concat(m.max,"px) ")),g&&u.push("{"),l?i(m,t,u,s,c):a(m,t,u,s,c,d,h),r(m,t,u,o,s,d,h),g&&u.push("} ");return u.join("")},getRulePercentageWidth:e}}(),function(){var e={en:{now:function e(){return"Now"},today:function e(){return"Today"},yesterday:function e(){return"Yesterday"},minutes:function e(t){return"".concat(t+(1===t?" minute":" minutes")," ago")},hours:function e(t){return"".concat(t+(1===t?" hour":" hours")," ago")},days:function e(t){return"".concat(t," days ago")}},de:{now:function e(){return"Jetzt"},today:function e(){return"Heute"},yesterday:function e(){return"Gestern"},minutes:function e(t){return"Vor ".concat(t+(1===t?" minute":" minuten"))},hours:function e(t){return"Vor ".concat(t+(1===t?" stunde":" stunden"))},days:function e(t){return"Vor ".concat(t," tagen")}},ru:{now:function e(){return"Теперь"},today:function e(){return"cегодня"},yesterday:function e(){return"вчера"},minutes:function e(t){return 1===t&&"1 минуту назад"||t<5&&"".concat(t," минуты назад")||"".concat(t," минут назад")},hours:function e(t){return 1===t&&"1 час назад"||t<5&&"".concat(t," часа назад")||"".concat(t," часов назад")},days:function e(t){return 1===t&&"1 день назад"||t<5&&"".concat(t," дня назад")||"".concat(t," дней назад")}},fr:{now:function e(){return"A l`instant"},today:function e(){return"Aujourd`hui"},yesterday:function e(){return"Hier"},minutes:function e(t){return"Il y a ".concat(t+(1===t?" minute":" minutes"))},hours:function e(t){return"Il y a ".concat(t+(1===t?" heure":" heures"))},days:function e(t){return"Il y a ".concat(t," journées")}},es:{now:function e(){return"Ahora"},today:function e(){return"Hoy"},yesterday:function e(){return"Ayer"},minutes:function e(t){return"Hace ".concat(t+(1===t?" minuto":" minutos"))},hours:function e(t){return"Hace ".concat(t+(1===t?" hora":" horas"))},days:function e(t){return"Hace ".concat(t," dias")}},it:{now:function e(){return"Adesso"},today:function e(){return"Oggi"},yesterday:function e(){return"Leri"},minutes:function e(t){return"".concat(t+(1===t?" minuto":" minuti")," fa")},hours:function e(t){return"".concat(t+(1===t?" ora":" ore")," fa")},days:function e(t){return"".concat(t," giorni fa")}}},t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"setTimeAgoCustomLanguage",value:function t(i,r){e[i]=r}},{key:"dateFormatTimeAgo",value:function i(r,n){if(!r||0===parseInt(r,10)||isNaN(r))return __trcWarn("TRCRbox.dateFormatDays - published_date cannot be parsed, it is ".concat(r)),"";r=new Date(1e3*parseInt(r,10));var o=e[n];o||(o=e.en,__trcWarn("TRCRbox.dateFormatDays - language key not recognized in converters, lang is ".concat(n)));var a=Date.now()-r.getTime();try{if(a<30*t.minute)return o.now();if(a<t.hour){var s=Math.floor(a/t.minute);return o.minutes(s)}if(a<7*t.hour){var l=Math.floor(a/t.hour);return o.hours(l)}if(a<24*t.hour)return o.today();if(a<48*t.hour)return o.yesterday();var c=Math.floor(a/t.day);return o.days(c)}catch(e){return __trcError("TRCRbox.dateFormatDays - error in calculating time ago. this might be due to bad date or custom lang not properly init. date: ".concat(r," lang: ").concat(n)),""}}},{key:"dateFormatISO",value:function e(t){var i=new Date(1e3*parseInt(t,10)),r=i.getFullYear(),n=i.getMonth()+1,o=i.getDate();return o<10&&(o="0".concat(o)),n<10&&(n="0".concat(n)),"".concat(r,"-").concat(n,"-").concat(o)}},{key:"dateFormatAmerican",value:function e(t){var i=new Date(1e3*parseInt(t,10)),r=i.getFullYear(),n=i.getMonth()+1,o=i.getDate();return"".concat(n,"/").concat(o,"/").concat(r)}},{key:"dateFormatEuropean",value:function e(t){var i=new Date(1e3*parseInt(t,10)),r=i.getFullYear(),n=i.getMonth()+1,o=i.getDate();return"".concat(o,"/").concat(n,"/").concat(r)}}]),t}();t.millisecond=1,t.second=1e3*t.millisecond,t.minute=60*t.second,t.hour=60*t.minute,t.day=24*t.hour,TRC.DateUtils=t}(),TRC.modDebug=function(e,t){var i=TRC.PROTOCOL,r=2,n,o={timeStamp:"tim=",type:"type=",message:"msg=",debugLevel:"llvl=",id:"id="},a=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},s=(l={},{setMessageCache:function(e){l[e]?l[e]+=1:l[e]=1},getMessageCount:function(e){return l[e]?l[e]:0}}),l;function c(e){TRC.net.fireSimpleHttpRequest(e)}function d(e){switch(e){case 0:return"error";case.5:return"perf";case 1:return"warn";case 2:return"info";case 3:return"debug";case 4:return"usage";default:return}}function h(t,i,r,n){var s=e.TRCImpl&&e.TRCImpl.getSystemFlag("loaderType");return o.timeStamp+encodeURIComponent(r)+"&"+o.type+encodeURIComponent(d(t))+"&"+o.message+encodeURIComponent(i)+(trc_debug_level>1?"&"+o.debugLevel+trc_debug_level:"")+"&"+o.id+Math.floor(1e4*Math.random())+(e.TRC.version?"&cv="+e.TRC.version:"")+(s?"&lt="+s:"")+(n?"&"+a(n):"")}return n={logMessageToServer:function(t,n,o,a){if(s.setMessageCache(n),s.getMessageCount(n)<=r||a){var l=e.TRCImpl&&TRCImpl.domain?TRCImpl.domain:"trc.taboola.com",d=e.TRCImpl?TRCImpl["normalize-log-param"]("publisher",TRC.publisherId):TRC.publisherId,u=__trcClientTimestamp(),p=function(e){c(i+"//"+e+"/"+d+"/log/2/debug"+"?"+h(t,n,u,o))};TRCImpl.trcEventRoute&&TRCImpl.eventTypesToRoute.indexOf("debug")>-1?(p(TRCImpl.trcEventRoute),TRCImpl.enableTrcEventRouteExperiment&&p(l)):p(l)}},getType:d},e._trcIsUTactive&&(n.getType=d,n.messageCache=s,n.getLogParams=h),n}(window,document),function(e,t){var i=[],r=null,n=!1,o,a,s;function l(e){try{if(r&&(TRC.Browser["ieUpto"](10)?t.detachEvent("onreadystatechange",r):(t.removeEventListener("DOMContentLoaded",arguments.callee,!1),TRC.Interval.clear(r))),TRC.dom.isReady)return;TRC.dom.isReady=!0,TRC.dom.onReady=function(e){e()};for(var n=0;n<i.length;n++)i[n]()}catch(e){__trcError("Error in DOMReady processing",e)}}function c(){return e.pageXOffset||t.body.scrollLeft}TRC.dom={injectedStyles:[],aggregatedStyles:"",isReady:!1,onReady:function(e,t){t?TRC.Timeout.set(e,10):i.push(e)},init:function(){if(!n)if(n=!0,t.readyState&&/loaded|complete/.test(t.readyState))l(!0);else{if(TRC.Browser["ieUpto"](10)){var i=t.createElement("div");!function(){try{i.doScroll("left")}catch(e){return void(i.to=TRC.Timeout.set(arguments.callee,10))}l()}(),t.attachEvent("onreadystatechange",r=function(){/loaded|complete/.test(t.readyState)&&(TRC.Timeout.clear(i.to),l())})}else{if(/interactive/.test(t.readyState))return void l(!0);t.addEventListener("DOMContentLoaded",l,!1),r=TRC.Interval.set(function(){/loaded|complete|interactive/.test(t.readyState)&&l()},10)}var o=e.onload;e.onload=function(){if(l(),o)try{o()}catch(e){}}}},on:e.addEventListener?function(e,t,i){var r;"touchstart"!==t&&"touchmove"!==t||!TRC.Browser.compatibility.passiveEvents||(r={passive:!0}),e.addEventListener(t,i,r)}:e.attachEvent?function(e,t,i){e.attachEvent("on"+t,i)}:void(el["on"+sType]=fn),off:e.removeEventListener?function(e,t,i){e.removeEventListener(t,i,!1)}:e.detachEvent?function(e,t,i){e.detachEvent("on"+t,i)}:void(el["on"+sType]=fn),getText:function(e){return e.textContent||e.innerText||e.innerHTML},lineHeight:function(e){var t;return e.computedClientHeight||(t=e.style.display,e.style.display="inline-block",e.computedClientHeight=parseFloat(getComputedStyle(e).height),e.style.display=t),e.computedClientHeight},isAncestor:function(e,t,i){for(t=i?t:t.parentNode;t&&t!==e&&9!=t.nodeType;)t=t.parentNode;return e===t},pullAggregatedStyle:function(){var e=this.aggregatedStyles;return this.aggregatedStyles="",e},aggregateStyles:function(e){TRC.styleInjected?this.injectStyle(e):this.aggregatedStyles+=e},injectStyle:function(e,i,r){var n=document.createElement("style"),i=i||t;return n.type="text/css",r&&(n.id=r),i.head?i.head.appendChild(n):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),this.injectStyleOverflowFix(e),TRC.styleInjected=!0,this.injectedStyles.push(n),n},injectStyleOverflowFix:function(e){if(TRC.Browser.ie&&31==document.styleSheets.length){var i=document.getElementById("trc_rbox_css_loaded");if(null==i&&((i=document.createElement("div")).id="trc_rbox_css_loaded",t.body.appendChild(i)),"hidden"!=document.trcGetCurrentStyle(i,"overflow")){var r=e.split("}"),n=null;try{for(var o=0;o<document.styleSheets.length;o++){var a=document.styleSheets[o];if(r.length+a.rules.length<=4096){n=a;break}}null!=n&&(n.cssText+=e)}catch(e){__trcError("Error in injectStyleOverflowFix processing",e)}}}},removeAllInjectedStyleSheets:function(){for(var e,t=0;t<this.injectedStyles.length;t++)(e=this.injectedStyles[t]).parentNode&&e.parentNode.removeChild(e);this.injectedStyles=[],this.aggregatedStyles="",TRC.styleInjected=!1,TRC.css.responsive.injectedStyles=[]},swapElements:function(e,t,i){return i&&TRC.dom.purgeEventHandlers(e),e&&e.parentNode&&e.parentNode.replaceChild(t,e),t},iterateOnNode:function(e,t){for(t(e),e=e.firstChild;e;)arguments.callee(e,t),e=e.nextSibling},purgeEventHandlers:function(e){try{TRC.dom.iterateOnNode(e,function(e){for(var t in e)"function"==typeof e[t]&&(e[t]=null)})}catch(e){__trcError("TRC.dom.purgeEventHandlers : ",e.message)}},clearInnerElements:function(e){for(var t;t=e.firstChild;)this.purgeEventHandlers(t),e.removeChild(t)},stopEvent:function(e){return e.cancelBubble=!0,e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1},addClass:function(e,t){e&&(e.className+=" "+t+" ")},removeClass:function(e,t){var i;if(e.classList)return e.classList.remove(t);i=new RegExp("s*"+t,"g"),e.className=e.className.replace(i,"")},containsClass:function(e,t){return e.className.split(" ").indexOf(t)>-1},detectAnimationEvent:function(e,t){var i="animation"+t,r={animation:"animation"+t,WebkitAnimation:"webkitAnimation"+t.charAt(0).toUpperCase()+t.slice(1),OAnimation:"oanimation"+t,MozAnimation:"animation"+t,MSAnimation:"MSAnimation"+t};return Object.keys(r).some(function(t){if(void 0!==e.style[t])return i=r[t],!0}),i},createHTMLElement:function(e,t){var i;return i=document.createElement(e),t&&Object.keys(t).length&&Object.keys(t).forEach(function(e){i[e]=t[e]}),i},elementMatchesSelector:function(e,t){var i,r;return["matches","msMatchesSelector","oMatchesSelector","mozMatchesSelector","webkitMatchesSelector"].some(function(t){return"function"==typeof e[t]&&(r=t),e[t]}),r?e[r](t):null},closest:function(e,t){if(TRC.util.isNativeFunction(e.closest))return e.closest(t);for(;!this.elementMatchesSelector(e,t);)if(!(e=e.parentElement))return null;return e},getWindowWidth:function(){return window.innerWidth?this.getWindowWidth=function(){return window.innerWidth}:0!=document.documentElement.clientWidth?this.getWindowWidth=function(){return document.documentElement.clientWidth}:this.getWindowWidth=function(){return document.body.clientWidth},this.getWindowWidth()},getWindowHeight:function(){return window.innerHeight?this.getWindowHeight=function(){return window.innerHeight}:0!=document.documentElement.clientHeight?this.getWindowHeight=function(){return document.documentElement.clientHeight}:this.getWindowHeight=function(){return document.body.clientHeight},this.getWindowHeight()},getDocumentWidth:function(){return Math.max(Math.max(t.body.scrollWidth,t.documentElement.scrollWidth),Math.max(t.body.offsetWidth,t.documentElement.offsetWidth),Math.max(t.body.clientWidth,t.documentElement.clientWidth))},getDocumentHeight:function(){return Math.max(Math.max(t.body.scrollHeight,t.documentElement.scrollHeight),Math.max(t.body.offsetHeight,t.documentElement.offsetHeight),Math.max(t.body.clientHeight,t.documentElement.clientHeight))},getScreenDensity:function(){var e=window.devicePixelRatio&&window.devicePixelRatio.toFixed(3);return e||(e=-1),e},getPageVerticalScroll:function(){return e.pageYOffset||t.body.scrollTop},getScrollTop:function(t){return t===e?this.getPageVerticalScroll()||document.documentElement.scrollTop:t.scrollTop},getViewportVerticalRange:function(){var e=this.getPageVerticalScroll(),t;return{min:e,max:e+this.getWindowHeight()}},getViewportHorizontalRange:function(){var e=c(),t;return{min:e,max:e+this.getWindowWidth()}},getElementRect:function(e){return e.getBoundingClientRect()},isInIframe:function(t){try{return e.top!==e.self}catch(e){return"boolean"==typeof t&&t}},createAugmentingContainers:function(e,t){for(var i=[],r=null,n,o=0;o<e;o++)r=n=this.createAugmentingContainer(r),i.push(n);return t&&i[e-1].appendChild(t),i},createAugmentingContainer:function(e){var i=t.createElement("div");return i.id="tbl-aug-"+Math.floor(2147483648*Math.random()).toString(36),e&&e.appendChild(i),i},generateAugmentationPrefix:function(e){for(var t="",i=0;i<e.length;i++)t+="#"+e[i].id+" ";return t},isHighDensity:(s=window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 124dpi), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 48.8dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (min-device-pixel-ratio: 1.3)").matches)||window.devicePixelRatio&&window.devicePixelRatio>1.3,function(){return s}),isSmartPhone:(a=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 320px) and (max-device-width : 480px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent),function(){return a}),isTablet:(o=window.matchMedia&&window.matchMedia(" only screen and (min-device-width : 768px) and (max-device-width : 1024px)").matches||/(iPhone|iPod)/g.test(navigator.userAgent),function(){return o}),isDesktop:function(){return!(this.isTablet()||this.isSmartPhone())},getOuterWidth:function(e){var t,i,r;return e.getBoundingClientRect().width+parseFloat(getComputedStyle(e).marginLeft)+parseFloat(getComputedStyle(e).marginRight)}}}(window,document),function(){var e={ID:"id",TITLE:"title",THUMBNAIL:"thumb"},t=function(){function t(e,i){_classCallCheck(this,t),this.trcManager=e,this.parentContainerSelector=i.parentContainerSelector,this.additionalLogDataBuilder=i.additionalLogDataBuilder,this.initReportedItemsMap(),this.trcManager.sendAbTestEvent("DEDUP_DEBUG","true"),TRC.modDebug.logMessageToServer(1,"Duplicated items monitoring enabled",{pcs:this.parentContainerSelector,vi:TRC.pageManager.getPageData()})}return _createClass(t,[{key:"initReportedItemsMap",value:function t(){var i=this;this.reportedItems={},Object.keys(e).forEach(function(t){var r=e[t];i.reportedItems[r]=[]})}},{key:"checkForDuplicatedItems",value:function t(){var i=[].slice.call(document.querySelectorAll("".concat(this.parentContainerSelector," .videoCube")));this.checkAndNotifyMetaDataDuplication(i,e.ID)||(this.checkAndNotifyMetaDataDuplication(i,e.TITLE),this.checkAndNotifyMetaDataDuplication(i,e.THUMBNAIL))}},{key:"checkAndNotifyMetaDataDuplication",value:function e(i,r){var n=this,o="data-item-".concat(r),a=i.map(function(e){return e.getAttribute(o)}),s=i.filter(function(e){return t.isItemMetaDataFoundMoreThanOnce(e,a,o)});if(s.length)return s.forEach(function(e){return n.notifyItemMetaDataDuplication(e,o,r)}),!0}},{key:"notifyItemMetaDataDuplication",value:function e(t,i,r){if(-1===this.reportedItems[r].indexOf(t)){var n="DUP_".concat(r.toUpperCase()),o=t.getAttribute("data-item-id"),a,s={mdt:r,md:t.getAttribute(i),ii:o,pcs:this.parentContainerSelector,vi:TRC.pageManager.getPageData()};this.trcManager.sendAbTestEvent(n,o),"function"==typeof this.additionalLogDataBuilder&&__trcCopyProps(this.additionalLogDataBuilder(t),s),TRC.modDebug.logMessageToServer(1,"Duplicated item served",s,!0),this.reportedItems[r].push(t)}}}],[{key:"isItemMetaDataFoundMoreThanOnce",value:function e(t,i,r){var n=t.getAttribute(r);return i.indexOf(n)!==i.lastIndexOf(n)}}]),t}();TRC.DuplicatedItemsMonitor=t}(),function(e,t){"use strict";var i={},r=e.TRC,n;function o(e,t){e.innerHTML=i._tokenizeSingle(r.dom.getText(e),t)}function a(e,t){if(e){var i=n(function e(t){return t.className.search("title")>=0},e,"span"),r=n(function e(t){return t.className.search("description")>=0},e,"span");t.call(this,e,i,r)}}function s(e){return function(t){for(var i in t){var r;if(t.hasOwnProperty(i))t[i].boxes.forEach(function t(i){a(i.labelsBox,e),a(i.preLabelsBox,e)})}}}r.Ellipsis=i,i.doEllipsis=function(e){n=n||r.implClasses.TRCRBox.prototype.findElement,r.ellipsisPerf&&console.timeStamp("Taboola new ellipsis"),r.performance&&r.performance.mark("7.2.1",null,"Ellipsis","all","SmartEllipsis",r.PerfEvenType.START),i.measure(e),i.renderEllipsis(e),r.performance&&r.performance.mark("7.2.9",null,"Ellipsis","all","SmartEllipsis",r.PerfEvenType.STOP)},i.tokenize=function(e,t){return t=t in i._tokenizeStrategies?t:"word",s(function(e,r,n){e.trcEllipsisTokenized&&delete e.trcEllipsisTokenized;var a=i._tokenizeStrategies[t];r&&o(r,a),n&&o(n,a),e.trcEllipsisTokenized=!0})(e)},i.verifyTokenized=function(e){var t=!0;return s(function(e){t=t&&e.trcEllipsisTokenized})(e),t},i.measure=s(function(e,t,r){var n=t&&i._measureSingleElementSizes(t),o=r&&i._measureSingleElementSizes(r);e.trcEllipsisPositions={title:n,description:o}}),i.renderEllipsis=s(function(e,t,r){var n=e.trcEllipsisPositions;if(!n||t&&!n.title||r&&!n.description)__trcDebug("Calling renderEllipsis without measuring first. Skipping");else try{t&&i._repaintSingleEllipsis(t,n.title),r&&i._repaintSingleEllipsis(r,n.description)}catch(e){__trcDebug(e.message+". Skipping")}}),i._tokenizeStrategies={word:function(e){return{spaces:!0,tokens:e.split(/\s+/)}},letter:function(e){return{spaces:!1,tokens:e.match(/&[\w#]+;|./g)}}},i._tokenizeSingle=function(e,t){var i=t.call(this,e);return r.util.map(i.tokens,function(e){return" "===e?e:"<ins>"+e+"</ins>"}).join(i.spaces?" ":"")},i._measureSingleElementSizes=function(e){if(!e||!e.offsetHeight)return null;if(!e.firstChild||"INS"!=e.firstChild.tagName)return __trcDebug("Attempted to call measure on element before tokenize. Skipping");var t=n(function e(t){return t.className.search("lastLineEllipsis")>=0},e,"ins");if(t){var i=e.getElementsByTagName("ins");if(t.className.replace(/[\t\r\n\f]/g," ").indexOf("tblHideAllButFirst")>=0)for(var o=0;o<i.length;o++){var a;(a=i[o]).style.display=""}t.parentNode.removeChild(t)}for(var i=e.getElementsByTagName("ins"),s=r.dom.lineHeight(i[0]),l=Math.floor(parseFloat(getComputedStyle(e).height)/s)*s,c=l-s,d=e.offsetWidth,h=i[0].offsetWidth,u=[],p,m,o=0;o<i.length;o++){var a=i[o];void 0===p&&a.offsetTop>=c&&(p=i[o]),void 0!==p&&u.push(r.dom.getText(a)),!m&&a.offsetTop>=l&&(m=i[o-1])}return{lastLineStartsAt:p,lastVisibleWord:m,singleLineContent:u,elementWidth:d,firstWordWidth:h}},i._repaintSingleEllipsis=function(e,n){if(n.lastVisibleWord){var o=t.createElement("ins");r.dom.addClass(o,"lastLineEllipsis");var a=e.tokenizeStrategy||"word",s=i._tokenizeStrategies[a]("").spaces;if(o.appendChild(document.createTextNode(n.singleLineContent.join(s?" ":""))),e.insertBefore(o,n.lastLineStartsAt),"word"===a&&n.firstWordWidth>=n.elementWidth)for(var l=e.getElementsByTagName("ins"),c=0;c<l.length;c++){var d=l[c];-1==d.className.replace(/[\t\r\n\f]/g," ").indexOf("lastLineEllipsis")?d.style.display="none":d.className+=" tblHideAllButFirst"}}}}(window,document),TRC.eventDelegator=function(e,t){var i=[],r={},n;function o(e,t){var r;i[e]&&(a(r=i[e]["_all"],t||""),t&&i[e][t.container.id]&&a(r=i[e][t.container.id],t))}function a(e,t){if(e){var i,r=e.length;for(i=0;i<r;i++)try{"function"==typeof e[i]&&setTimeout(function(e,t){return function(){e(t)}}(e[i],t),0)}catch(e){__trcError("executeHandlers",e)}}}function s(e,t){var i;if(t)for(i in t)try{"function"==typeof e&&setTimeout(function(e,t){return function(){e(t)}}(e,t[i]),0)}catch(e){__trcError("executeHandlers",e)}else setTimeout(e,0)}function l(e){i[e]=[],i[e]["_all"]=[]}function c(e,t){i[e][t]=[]}var d={subscribe:function(e,t,n){i[e]||l(e),n?(i[e][n]||c(e,n),i[e][n].push(t),r[e]&&r[e][n]&&s(t,{mode:r[e][n]})):(i[e]["_all"].push(t),r[e]&&s(t,r[e]))},dispatch:function(e,t){r[e]=r[e]||{},t?r[e][t.container.id]=t:r[e]["_all"]={},o(e,t||null)},resetEvents:function(){r={}}};if(e._trcIsUTactive&&(d.processDelegatorsStack=o,d.executeHandlers=a,d.executePreviousEvents=s,d.delegatorsStack=i,d.eventsStack=r),TRC.subscriptionRegister)for(;TRC.subscriptionRegister.length;)n=TRC.subscriptionRegister.shift(),d.subscribe(n.event,n.handler,n.container);return d}(window,document),function(e,t){function i(e){return{detail:e}}function r(e){return"api::"+e}function n(e,t){TRC.dispatch(r(e),i(t))}function o(e,t){var i=TRC.TRCParser,r;return e=e||{},r={mode:i.parseModeName(e),placement:i.parsePlacementName(e),baseMode:i.parseBaseModeName(e),variant:i.parseTestVariant(e),itemCount:i.getItemCount(e)},t&&(r.container=t.container,r.items=t.apiData),r}TRC.EventsAPI={dispatchClick:function(e,t){var i=TRC.TRCParser,r;e=e||{},r=new TRC.ItemParser(e),t=t||{},n("click",{slot:r.getSlot(),id:r.getId(),type:r.getType(),title:r.getTitle(),url:r.getUrl(),linkTarget:r.getLinkTarget(),mode:i.parseModeName(t),placement:i.parsePlacementName(t),baseMode:i.parseBaseModeName(t),variant:i.parseTestVariant(t),itemCount:i.getItemCount(t)})},dispatchVisible:function(e,t){var i;n("visible",o(e,t))},dispatchRender:function(e,t){var i;n("render",o(e,t))},dispatchNoContent:function(e,t,i){var r={reason:e};t&&(r.placement=t),r.isFeedCard=i||!1,n("nocontent",r)},listen:function(e,t){TRC.listen(r(e),t,!0)},readmore:function(e,t){var i=TRC.TRCParser;t=t||{},n("readmore."+e,{mode:i.parseModeName(t),placement:i.parsePlacementName(t),variant:i.parseTestVariant(t)})}}}(window,document),function(e,t){var i,r,n={},o=0;function a(e){void 0===n[e]&&(n[e]=[])}function s(e,t){a(e),n[e]=n[e].filter(function(e){return t!==e.id})}if(TRC.listen=function(e,t,i){if("object"==typeof e&&e.length)return e.forEach(function(e){TRC.listen(e,t)}),null;a(e);var r={id:o++,handler:t,eventName:e,sync:i,remove:function(){s(this.eventName,this.id)}};return n[e].push(r),r},TRC.dispatch=function(e,t){a(e);var o=i(e,t);n[e].forEach(function(e){if(e.sync)try{e.handler.call(this,o)}catch(e){}else r(function(){e.handler.call(this,o)}.trcBind(this))}.trcBind(this))},t.addEventListener&&t.dispatchEvent)return t.addEventListener("trcFakeEvents",function(e){e.cx()},!1),i=function(e,i){var r=t.createEvent("Event");return r.initEvent(e,!1,!1),"[object Array]"===Object.prototype.toString.call(i)?r.data=i:"object"==typeof i?__trcCopyProps(i,r):r.data=i,r},void(r=function(e){var r=i("trcFakeEvents");r.cx=e,t.dispatchEvent(r)});t.documentElement.attachEvent("onpropertychange",function(e){"trcFakeEvents"==e.propertyName&&e.cx()}),i=function(e,i){var r;return i&&i.generator&&"ceo"===i.generator?(i.type=e,i):((r=t.createEventObject()).generator="ceo",r.type=e,"[object Array]"===Object.prototype.toString.call(i)?r.data=i:"object"==typeof i?__trcCopyProps(i,r):r.data=i,r)},r=function(e){var r=i("trcFakeEvents");r.cx=e,r.propertyName="trcFakeEvents",t.documentElement.fireEvent("onpropertychange",r)}}(window,document),function(e){var t=TRC.ExpandAnimationManager=function(t){TRC.RBoxUsage.logUsage("ExpandAnimationManager"),this.rbox=t,this.container=t.container,this.trcContainer=this.container._trc_container,TRC.css.utils.setStyleElements(this.createCSS()),this.trcContainer.className+=" trc_expandable",this.throttledExpandScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),TRC.dom.on(e,"scroll",this.throttledExpandScrollHandler)};t.prototype.scrollHandler=function(){this.rbox.isInViewPort(this.container,0)?this.trcContainer.wasOutOfViewPort&&(this.trcContainer.className+=" trc_show",TRC.dom.off(window,"scroll",this.throttledExpandScrollHandler)):this.trcContainer.wasOutOfViewPort=!0},t.prototype.createCSS=function(){for(var e=[],t="#"+TRC.css.utils.escape(this.container.id),i=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-duration"),r=this.rbox.trc.getProperty(this.rbox.mode_name,"expand-animation-max-height"),n=[t+" .trc_rbox_container.trc_expandable {"+TRC.css.utils.generateCssRuleWithVendorPrefixes("transition-duration",i+"ms")+"}",t+" .trc_rbox_container.trc_expandable.trc_show { max-height: "+r+"px;}"],o=0;o<n.length;o++)this.rbox.trc.cssReset?e.push(TRC.css.utils.setStyleTextIdPrefix(n[o],TRC.modesCache,TRC.lightBoxCssReset)):e.push(n[o]);return e.join("")}}(window),function(){var e={collapsedHeight:490,expandButtonCaption:"Show More",collapseButtonCaption:"Show Less",fadeBackgroundColor:"#fff",fadeHeight:60,buttonTop:28,buttonBottom:10,fadeGradient:40},t=function(){function t(i,r,n){_classCallCheck(this,t),this.externalCardMaxRetries=i.global["external-card-max-retries"]||5,this.externalCardRetryInterval=i.global["external-card-retry-interval"]||1e3,n=__trcCopyProps(e,{},n),this.init(r,n)}return _createClass(t,[{key:"init",value:function e(i,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.boxElement=document.getElementById(i),this.boxElement){if(this.boxElement.getBoundingClientRect().height<r.collapsedHeight)return void(n<this.externalCardMaxRetries?(n++,setTimeout(this.init.trcBind(this,i,r,n),this.externalCardRetryInterval)):TRC.dom.addClass(this.boxElement,"tbl-expandable-box-inactive"));TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.injectStyle(t.getExpandableBoxCSS(i,r)),this.boxElement.appendChild(this.createExpandButton(r)),this.boxElement.appendChild(this.createCollapseButton(r)),this.listenToBoxClick()}else __trcError("Cannot find expandable box element by ID: ".concat(i))}},{key:"createExpandButton",value:function e(t){return this.createButton(t.expandButtonCaption,this.handleExpandClick,"tbl-expand-btn-container")}},{key:"createCollapseButton",value:function e(t){return this.createButton(t.collapseButtonCaption,this.handleCollapseClick,"tbl-collapse-btn-container")}},{key:"createButton",value:function e(t,i,r){var n=document.createElement("div"),o=document.createElement("a");return o.className+="tbl-expandable-box-btn",o.textContent?o.textContent=t:o.innerText=t,TRC.dom.on(o,"click",i.trcBind(this)),n.className="tbl-expandable-box-btn-container ".concat(r),n.appendChild(o),n}},{key:"addExpandClasses",value:function e(){TRC.dom.addClass(this.boxElement,"tbl-expanded"),TRC.dom.removeClass(this.boxElement,"tbl-collapsed"),this.isExpanded=!0}},{key:"addCollapseClasses",value:function e(){TRC.dom.addClass(this.boxElement,"tbl-collapsed"),TRC.dom.removeClass(this.boxElement,"tbl-expanded"),this.isExpanded=!1}},{key:"handleExpandClick",value:function e(t){t.preventDefault(),t.stopPropagation(),this.isExpanded||this.addExpandClasses()}},{key:"handleCollapseClick",value:function e(t){t.preventDefault(),t.stopPropagation(),this.addCollapseClasses(),this.boxElement.scrollIntoView&&this.boxElement.scrollIntoView()}},{key:"listenToBoxClick",value:function e(){var t=this;TRC.listen("expandableBoxChildIFrameClick",function(e){e.container!==t.boxElement||t.isExpanded||t.addExpandClasses()})}}],[{key:"getExpandableBoxCSS",value:function e(t,i){return"#".concat(t,".tbl-expanded { max-height: inherit; } #").concat(t,".tbl-expanded .tbl-collapse-btn-container { display: block; padding: 0 5px; }#").concat(t,".tbl-collapsed { max-height: ").concat(i.collapsedHeight,"px; overflow: hidden; position: relative; } #").concat(t,".tbl-collapsed .tbl-expand-btn-container { display: block; }#").concat(t," .tbl-expandable-box-btn { margin: ").concat(i.buttonTop,"px 0 ").concat(i.buttonBottom,"px !important; display: inline-block !important; line-height: 38px !important; text-align: center !important; white-space: nowrap !important; vertical-align: middle !important; cursor: pointer !important; -webkit-touch-action: manipulation; -moz-touch-action: manipulation; -ms-touch-action: manipulation; -o-touch-action: manipulation; touch-action: manipulation; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; color: #326891 !important; background: #edf2f5 none !important; border: 1px solid #93abbc !important; height: 38px !important; width: 100% !important; font-size: 15px !important; font-weight: bold !important; border-radius: 3px !important; font-family: sans-serif !important; } #").concat(t," .tbl-expandable-box-btn:hover { background-color: #bed0dc !important; border-color: #7399b3 !important; color: #326891 !important; }#").concat(t," .tbl-expandable-box-btn-container { display: none; text-align: center; }#").concat(t," .tbl-expand-btn-container { position: absolute; z-index: 100; left: 0; right: 0; bottom: 0; padding: ").concat(i.fadeHeight,"px 10px 0px 10px; box-sizing: border-box; background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ").concat(i.fadeBackgroundColor," ").concat(i.fadeGradient,"%, ").concat(i.fadeBackgroundColor," 100%); background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(255, 255, 255, 0)), color-stop(50%, ").concat(i.fadeBackgroundColor,"), color-stop(100%, ").concat(i.fadeBackgroundColor,")); background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ").concat(i.fadeBackgroundColor," ").concat(i.fadeGradient,"%, ").concat(i.fadeBackgroundColor," 100%); background: -o-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ").concat(i.fadeBackgroundColor," ").concat(i.fadeGradient,"%, ").concat(i.fadeBackgroundColor," 100%); background: -ms-linear-gradient(top, rgba(255, 255, 255, 0) 0%, ").concat(i.fadeBackgroundColor," ").concat(i.fadeGradient,"%, ").concat(i.fadeBackgroundColor," 100%); background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, ").concat(i.fadeBackgroundColor," ").concat(i.fadeGradient,"%, ").concat(i.fadeBackgroundColor," 100%); }")}}]),t}();TRC.ExpandableBox=t}(),TRC.ExternalContainerAppender={MAX_RETRIES:50,TIMEOUT:100,move:function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(document.querySelector)if(i){var n,o=!1;try{n=document.querySelector(t)}catch(e){__trcWarn("Exception while trying to find external container with selector ".concat(t,": ").concat(e)),o=!0}n?(i.appendChild(n),TRC.dispatch("trcContentReady",{container:i})):r<this.MAX_RETRIES&&!o?TRC.Timeout.set(this.move.trcBind(this,t,i,r+1),this.TIMEOUT):__trcWarn("Could not find external container with selector ".concat(t," to move"))}else __trcError("Could not find target container for external container move")}},function(){var e={},t={},i={isPlacementApprovedToRender:function e(){return!0},hideFallbackElements:function e(){return this},reportTimeToRender:function e(){}},r=function(){function e(t,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.enable,a=n.elements_to_hide,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=s.should_render,c=s.on_error;_classCallCheck(this,e),this.originalPlacementName=t,this.placementName=i,this.recommendationsListSize=r?r.length:null,this.isApprovedToRender=null,this.triedToHideFallbackElements=!1,this.enable=o,this.elements_to_hide=a,this.should_render=l,this.on_error=c}return _createClass(e,[{key:"setIsApprovedToRender",value:function e(){if(null===this.isApprovedToRender&&this.enable&&"function"==typeof this.should_render)try{this.should_render()?this.isApprovedToRender=!0:(this.isApprovedToRender=!1,l.report({type:"ERROR",reason:"notAllowedToRender",originalPlacementName:this.originalPlacementName}))}catch(e){this.isApprovedToRender=!1,__trcError("Fallback Error in should_render",e)}}},{key:"isPlacementApprovedToRender",value:function e(){return this.setIsApprovedToRender(),this.isApprovedToRender}},{key:"hideFallbackElements",value:function e(){return this.isApprovedToRender&&!this.triedToHideFallbackElements&&(this.triedToHideFallbackElements=!0,this.hideElements()),this}},{key:"reportTimeToRender",value:function e(t){var i=t.isCache;l.report({type:"placementData",timeToRendered:performance.now&&performance.now(),originalPlacementName:this.originalPlacementName,placementName:this.placementName,items:this.recommendationsListSize,isCache:!!i})}},{key:"hideElements",value:function e(){var t=this;Array.isArray(this.elements_to_hide)&&this.elements_to_hide.forEach(function(e){var i=document.querySelectorAll(e);if(i.length)for(var r=0;r<i.length;++r)i[r].style.display="none";else l.report({type:"ERROR",reason:"noFallbackElements",placement:t.placementName})})}}]),e}(),n=function e(t,i){try{return a(t,i).isPlacementApprovedToRender()}catch(e){__trcError("Fallback shouldRenderPlacement Error",e)}return!0},o=function e(t){try{s(t).hideFallbackElements().reportTimeToRender(t)}catch(e){__trcError("Fallback Error in finalize",e,.2)}},a=function t(n){var o=n.cga,a=n.fpl,s=n.uip,l=n.v,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=o&&o.fallback;if(d){var h=a||s;return e[h]||(e[h]=new r(h,s,l,d,c[h])),e[h]}return i},s=function t(r){var n=r.response,o=r.placement,a=n.feedPlacement||o;return e[a]||i},l={report:function e(t){if(TRC.util.isPercentEnabled(TRCImpl.global,"enable-fallback-events")){var i={data:JSON.stringify(t),type:"fallback"};TRCImpl.sendEvent("pubs-generic",{d:JSON.stringify(i)},{})}},runOnError:function i(r){var n=r.placement,o=e[n],a=t[n];if(a&&"function"==typeof a)try{a()}catch(e){__trcError("Fallback Error in on_error",e)}o&&o.enable&&l.report({type:"ERROR",reason:"failedToRender",placement:n})},setOnError:function e(i){var r=i.placement,n=i.on_error;t[r]=n}};TRC.listen("onRboxFlowError",l.runOnError),TRC.fallbackApi={shouldRenderPlacement:n,finalize:o,setOnError:l.setOnError},window._trcIsUTactive&&(TRC.fallbackApi.unitestsHelpers={fallbackUtils:l,getFallbackPlacement:s,build:a,clearFallbackPlacements:function t(){e={}}})}(),function(){var e=function(){function e(t,i){_classCallCheck(this,e),this.trcManager=t,this.trcCache=t.trcCache,this.firstIframe=i,this.renderedCardsPreviously=!1,this.feedContainerNum=TRC.feedContainerNum,this.shouldBreakForAMPSplitFeed=!1,this.CACHE_KEYS={F:"tbl_f",SYNC_FI:"tbl_syncFi",SYNC_FB:"tbl_syncFb",SYNC_VIEW_ID:"tbl_syncViewID",PUB_CARD_LOCS:"tbl_pubCardLocs",NEXT_IFRAME_TO_LOAD:"tbl_nextIframeToLoad",CURRENT_AMP_FRAME_NUM:"tbl_currentAmpFrameNum"}}return _createClass(e,[{key:"cacheOrAssignFeedResponseData",value:function e(t){!0===this.firstIframe&&!1===this.renderedCardsPreviously?(this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.F,t.trc.f),this.renderedCardsPreviously=!0):!1===this.renderedCardsPreviously&&!1===this.firstIframe&&(t.trc.f=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.F),this.renderedCardsPreviously=!0)}},{key:"handleFeedIndexOffset",value:function e(t){return t.fi=this.syncFi+1,t.fi}},{key:"cacheLeftoverCards",value:function e(t,i){var r={};__trcCopyProps(t,r);var n=TRC.TrcCache.extractKey(this.reqForCacheKey);this.trcCache.enableCacheViaStorageFlag(),r.trc.vl.splice(0,i+1),this.trcCache.cacheResponse(n,r)}},{key:"handlePubCardInResponse",value:function e(t,i){var r=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.PUB_CARD_LOCS),n=parseInt(sessionStorage.getItem(this.CACHE_KEYS.NEXT_IFRAME_TO_LOAD),10);n===parseInt(this.feedContainerNum,10)&&sessionStorage.setItem(this.CACHE_KEYS.NEXT_IFRAME_TO_LOAD,n+1);var o=i+1+this.oldSyncFi;-1===r.indexOf(o)&&this.currentAmpFrameNum<=this.feedContainerNum&&r.push(o),this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.PUB_CARD_LOCS,r),this.currentAmpFrameNum=r.length+1,TRC.currentAmpFrameNum=this.currentAmpFrameNum,this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.CURRENT_AMP_FRAME_NUM,this.currentAmpFrameNum),TRC.keyWriting=!0,this.cacheLeftoverCards(t,i),this.shouldBreakForAMPSplitFeed=!0}},{key:"updateFeedIndexAndBatch",value:function e(t){var i,r;this.oldSyncFi=this.syncFi,i=Number(this.oldSyncFi)+t.trc.vl.length;var n,o=Object.keys(t.trc.f)[0];this.syncFb=parseInt(t.trc.f[o].nb,10),!0===t.cached&&(i-=r=t.trc.vl.length),this.syncFi=i,this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_FI,i),this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_FB,this.syncFb)}},{key:"copyReqToReqForCacheKey",value:function e(t){this.reqForCacheKey={},__trcCopyProps(t,this.reqForCacheKey)}},{key:"detectDuplicateCards",value:function e(t){var i=parseInt(t.placement.split(" ").pop(),10);null!==this.ampSplitFeedCache.getCacheData(i)?__trcError("Duplicate Card Index In AMP Split Feed"):this.ampSplitFeedCache.cacheData(i,!0)}},{key:"detectSkippedCard",value:function e(t){var i=parseInt(t.placement.split(" ").pop(),10)-1;i>0&&null===this.ampSplitFeedCache.getCacheData(i)&&__trcError("Card(s) Skipped In AMP Split Feed")}},{key:"initParametersForSplitFeedFrames",value:function e(){var t=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_FI),i=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_FB);this.syncFi=null===t?null:parseInt(t,10),this.syncFb=null===i?null:parseInt(i,10);var r=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.SYNC_VIEW_ID);null===r?this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.SYNC_VIEW_ID,TRC.pageManager.getPageData()):TRC.syncViewID=r;var n=this.ampSplitFeedCache.getCacheData(this.CACHE_KEYS.PUB_CARD_LOCS);n||(n=[],this.ampSplitFeedCache.cacheData(this.CACHE_KEYS.PUB_CARD_LOCS,n)),this.currentAmpFrameNum=n.length+1}},{key:"checkAMPSplitFeedFlagsAndInit",value:function e(t,i){this.nextIframeToLoad=sessionStorage.getItem("tbl_nextIframeToLoad"),this.sentIframeLoadFailed=!1,this.attemptCounter=0,this.MAX_ATTEMPTS=20,!this.nextIframeToLoad&&this.firstIframe&&(this.nextIframeToLoad="1",sessionStorage.setItem("tbl_nextIframeToLoad",this.nextIframeToLoad)),this.nextIframeToLoad!==this.feedContainerNum?this.timeoutID=setTimeout(this.delayInit.trcBind(this,t,i),300):(this.didInit=!0,i(t))}},{key:"delayInit",value:function t(i,r){try{this.attemptCounter++,!this.sentIframeLoadFailed&&this.attemptCounter>=this.MAX_ATTEMPTS&&(e.sendIframeLoadFailed(TRC.feedContainerNum),this.sentIframeLoadFailed=!0),this.nextIframeToLoad=sessionStorage.getItem("tbl_nextIframeToLoad"),this.nextIframeToLoad===TRC.feedContainerNum?(this.didInit=!0,clearTimeout(this.timeoutID),r(i)):this.timeoutID=setTimeout(this.delayInit.trcBind(this,i,r),300)}catch(e){__trcError("AMP split feed - error in delaying iframe init",e)}}},{key:"initAmpSplitFeedIframe",value:function e(t){this.trcManager.trcCache.reloadCache(),this.ampSplitFeedCache=new TRC.KeyValueCache({cacheName:"trc_amp_split_feed_cache",noTtl:!0}),this.initParametersForSplitFeedFrames(),this.trcManager.dispatchRequestWrapper(t)}}],[{key:"sendIframeLoadFailed",value:function e(t){TRC.pConsole("errors","error","AMP split feed iframe",t,"blocked from out of order loading")}}]),e}();TRC.AmpSplitFeedManager=e}(),function(){var e="card-available",t="card-visible",i="card-interaction",r=["click"],n=function(){function n(e,t,i,r){_classCallCheck(this,n);var o=t.feedDynamicParameters;this.trcManager=e,this.cardPlacementData=i,this.exactVisibleDistanceThresholdFromTop=o&&o.exactVisibleDistanceThresholdFromTop||this.trcManager.global["exact-visible-distance-threshold-from-top"]||200,this.listenToCardInteractionEvents(r)}return _createClass(n,[{key:"sendEvent",value:function e(t,i){TRC.TrcEventsLogger.sendPlacementEvent(this.trcManager,this.cardPlacementData,t,i)}},{key:"handleRenderedCard",value:function t(i){i.style.position="relative",this.sendEvent(e),this.observeCardVisibility(i)}},{key:"listenToCardInteractionEvents",value:function e(t){var i=this;r.forEach(function(e){TRC.dom.on(t,e,i.sendCardInteractionEvent.trcBind(i,e)),"click"===e&&t.querySelector("iframe")&&TRC.dom.on(window,"blur",i.checkIfCardIFrameClickedAndLog.trcBind(i,t))})}},{key:"checkIfCardIFrameClickedAndLog",value:function e(t){var i,r=document.activeElement;r&&"iframe"===r.tagName.toLowerCase()&&(r===t||t.contains(r))&&this.sendCardInteractionEvent("click")}},{key:"sendCardInteractionEvent",value:function e(t){var r={id:Date.now(),type:t},n={d:JSON.stringify(r)};this.sendEvent(i,n)}},{key:"observeCardVisibility",value:function e(i){var r={targetElement:i,enableDelayedVisibilityCheck:!0,exactVisibleThresholdFromTop:this.exactVisibleDistanceThresholdFromTop,onTrigger:this.sendEvent.trcBind(this,t,null)};TRC.intersections.isInViewPort(r)}}]),n}();TRC.CardEventsManager=n}(),function(){var e="tbl-feed-container",t="tbl-feed-card",i="tbl-feed-full-width",r="tbl-feed-partial-width",n="tbl-feed-abp",o="data-feed-container-num",a="data-feed-main-container-id",s="data-parent-placement-name",l="data-pub-lang",c="FULL_WIDTH",d="PARTIAL_WIDTH",h=function(){function h(e,t,i){var r=this;_classCallCheck(this,h);var n=__trcCopyProps(i,{});this.trcManager=e,this.container=t.container,this.origContainer=this.container,this.mainContainerId=this.container.id,this.mainContainerPlacement=t.placement,this.numContainers=1,this.testData=e.testData,this.experimentsData=e.experimentsData,this.experimentsHash=e.experimentsHash,this.options=i,this.numPendingPublisherCards=0,this.layout=i.mobileLayout||i.feedUi&&i.feedUi.layout,this.shouldDisableScopeCss=this.trcManager.global["disable-scope-feed-css"],this.firstCardRequestId=t.firstCardRequestId,this.unifiedPlacement=t.unifiedPlacement,i.wasWidget&&(this.widgetToFeedHelper=new TRC.WidgetToFeedHelper(this,e,i.hasFeedUI)),i.videoSingleManager&&this.loadVideoSingleManager(t,e,i),!1!==i.hasFeedUI&&TRC.dom.injectStyle(this.createCss(i),null),n.afterPlacementContainerCreated=h.addFeedCardAttributes.trcBind(this),n.itemsParentContainerSelector="[".concat(a,'="').concat(this.mainContainerId,'"]'),this.infiniteScrollEngine=new TRC.InfiniteScrollEngine(e,t,n),this.publisherCardsManager=new TRC.PublisherCardsManager(this,e,t,i);var o=h.getFeedConfig(i,"footerOverlayConfig","footerOverlay");o&&TRC.ModuleLoader.load("feed-footer-overlay",TRC.FooterOverlay,function(){r.footerOverlay=new TRC.FooterOverlay(e,o)}),TRC.isAMPSplitFeed&&(this.numContainers=this.trcManager.ampSplitFeedManager.feedContainerNum),this.setMainContainerCssClassesAndAttributes(this.container,i),this.listenToCardContentReady(),this.header=this.createHeader(i.feedUi),TRC.Heatmap.isEnabled(this.trcManager)&&(this.heatmap=new TRC.Heatmap(e),TRC.dom.on(this.container,"click",function(e){r.heatmap.captureAndSendClickData(e)}))}return _createClass(h,[{key:"handlePlacement",value:function e(t){var i=t.trcResponse&&t.trcResponse.spl,r=t.trcResponse&&t.trcResponse.pcp,n=t.trcResponse&&t.trcResponse.scac?null:this.infiniteScrollEngine.numPlacements;return i?(this.infiniteScrollEngine.handlePlacement(t),this.publisherCardsManager.registerPublisherCardForHandling(t),void this.publisherCardsManager.handlePendingPublisherCards(0,n,null,i)):(TRC.isAMPSplitFeed&&(this.trcManager.ampSplitFeedManager.detectDuplicateCards(t),this.trcManager.ampSplitFeedManager.detectSkippedCard(t)),r?TRC.isAMPSplitFeed?void this.stopScrolling():(this.publisherCardsManager.registerPublisherCardForHandling(t),this.infiniteScrollEngine.numPlacements++,void this.numPendingPublisherCards++):(this.numPendingPublisherCards>0&&(this.publisherCardsManager.handlePendingPublisherCards(0,n,null,i),this.numPendingPublisherCards=0),this.infiniteScrollEngine.handlePlacement(t),this.trcManager["after-card-created"](t,n,this),void TRC.CustomModulesManager.runHook("after-card-created",this.mainContainerPlacement,this,t,n,this)))}},{key:"stopScrolling",value:function e(){this.infiniteScrollEngine.stopScrolling()}},{key:"setIsAllowedToRequestMoreContent",value:function e(t){this.infiniteScrollEngine.setIsAllowedToRequestMoreContent(t)}},{key:"updateNextBatchNumber",value:function e(t){this.infiniteScrollEngine.updateNextBatchNumber(t)}},{key:"setMainContainerCssClassesAndAttributes",value:function t(h,u){var p=[e];switch(this.layout){case c:p.push(i);break;case d:p.push(r)}u.feedUi&&u.feedUi.cardFrame&&p.push("tbl-feed-frame-".concat(u.feedUi.cardFrame)),TRC.blocker.blockedState>0&&p.push(n),TRC.dom.addClass(this.container,p.join(" ")),this.numContainers>1&&(this.container.id="".concat(this.mainContainerId,"-split-num-").concat(this.numContainers-1)),h.setAttribute(o,this.numContainers),h.setAttribute(a,this.mainContainerId),h.setAttribute(s,this.mainContainerPlacement),this.trcManager.language&&h.setAttribute(l,this.trcManager.language)}},{key:"createHeader",value:function e(t){if(!TRC.isAMPSplitFeed||!this.trcManager.ampSplitFeedManager||1===Number(this.trcManager.ampSplitFeedManager.feedContainerNum)){var i=document.createElement("div"),r=document.createElement("div"),n=!(!t||!t.feedHeaderData),o=t&&t.logoPosition&&"NONE"!==t.logoPosition?t.logoPosition:null,a=o?"tbl-logo-".concat(o.toLowerCase(),"-position"):"";if(r.className="tbl-feed-header-logo",i.className=" tbl-feed-header ".concat(a),i.appendChild(r),TRC.ccpa.renderOnHeaderFeed(i,this.unifiedPlacement,o),n){var s=h.createFeedHeaderTextElement(t.feedHeaderData.headerText);i.className+=" tbl-header-with-text",i.appendChild(s)}return this.container.insertBefore(i,this.container.firstChild),i}}},{key:"listenToCardContentReady",value:function e(){TRC.listen("trcContentReady",this.onCardContentReady.trcBind(this))}},{key:"listenToBoxChildIFrameClick",value:function e(){var i=this;this.expandableBoxIFrameClickListener||(this.expandableBoxIFrameClickListener=!0,TRC.dom.on(window,"blur",function(){var e,r=document.activeElement;r&&TRC.dom.elementMatchesSelector(r,"[".concat(a,'="').concat(i.mainContainerId,'"] .').concat(t," iframe"))&&TRC.dispatch("expandableBoxChildIFrameClick",{container:TRC.dom.closest(r," .".concat(t))})}))}},{key:"onCardContentReady",value:function e(i){var r;if(i.container){var n=i.container,o=n.placementData,a=n.style;(r=o&&o.trcResponse&&o.trcResponse.cpad)&&(a.padding=r),TRC.dom.addClass(i.container,t),o&&o.expandOptions&&(i.container.expandableBox=new TRC.ExpandableBox(this.trcManager,i.container.id,o.expandOptions),this.listenToBoxChildIFrameClick())}}},{key:"createCss",value:function e(t){var i=[];t.feedCss?i.push(t.feedCss.replace(/{FEED_MAIN_CONTAINER_ID_ATT}/g,"[".concat(a,'="').concat(this.mainContainerId,'"]'))):i.push(h.getDefaultFeedCSS()),this.isFullWidthMobileFeed(t)&&i.push(this.getMobileFullWidthMarginsCss()),t.feedUi&&i.push(h.getFeedUiCss(t.feedUi,this.mainContainerId)),t.publisherFeedCss&&i.push(t.publisherFeedCss),i.push(t.feedCssOverride);var r=i.join("");return this.shouldDisableScopeCss||(r=h.scopeCss(r,this.mainContainerId)),r}},{key:"getTestData",value:function e(){return this.testData}},{key:"getExperimentsData",value:function e(){return this.experimentsData}},{key:"getExperimentsHash",value:function e(){return this.experimentsHash}},{key:"getMobileFullWidthMarginsCss",value:function t(r){var n=r?this.container.parentNode:this.container,a=n.getBoundingClientRect(),s=-1*a.left,l=-1*(document.documentElement.clientWidth-a.width-Math.abs(s)),c="#".concat(this.container.id,".").concat(e,".").concat(i);return(s||l)&&n.offsetParent?(r&&(c+="[".concat(o,'="').concat(r,'"]')),"@media screen and (max-width: 480px) {\n                        ".concat(c," {\n                            margin-left: ").concat(s,"px;\n                            margin-right: ").concat(l,"px;\n                        }\n                    }")):""}},{key:"getVideoManagerRequestData",value:function e(){return{"session-data":TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),req:this.firstCardRequestId}}},{key:"loadVideoSingleManager",value:function e(t,i,r){var n=__trcCopyProps(t,{},null),o=__trcCopyProps(r.videoSingleManager,{});o.parentFeedOptions=r,this.videoManager=new TRC.VideoTagLoader(i,o,n,null,this.getVideoManagerRequestData()),this.videoManager.loadVideo()}},{key:"switchMainContainer",value:function e(t){this.container=t,this.infiniteScrollEngine.switchMainContainer(this.container)}},{key:"isFullWidthMobileFeed",value:function e(t){var i;return(t.mobileLayout||this.layout)===c}},{key:"getIsFirstBatch",value:function e(){return this.infiniteScrollEngine.getIsFirstBatch()}}],[{key:"createFeedHeaderTextElement",value:function e(t){var i=document.createElement("div");return i.className="tbl-feed-header-text",i.innerText=t,i}},{key:"addFeedCardAttributes",value:function e(t,i){t.setAttribute("tbl-feed-card",""),i.isStandaloneVideo&&h.setFeedVideoCardAttribute(t),h.setFeedCardVideoIndication(t,i)}},{key:"setFeedCardVideoIndication",value:function e(t,i){i.trcResponse.nvb&&t.setAttribute("no-vbelow",""),i.trcResponse.nva&&t.setAttribute("no-vabove","")}},{key:"setFeedVideoCardAttribute",value:function e(t){t.setAttribute("tbl-feed-video","")}},{key:"scopeCss",value:function t(i,r){return i.replace(new RegExp(".".concat(e),"g"),"[".concat(a,'="').concat(r,'"]'))}},{key:"getFeedUiCss",value:function e(t,i){var r=[],n=t.feedBackgroundColor||t.feedBackground,s="[".concat(a,'="').concat(i,'"]');if(r.push("".concat(s,"[").concat(o,"] {background-color: ").concat(n,"; padding: ").concat(t.feedPadding,";}")),"NONE"===t.logoPosition?r.push("".concat(s," .tbl-feed-header .tbl-feed-header-logo {display:none;}")):r.push("".concat(s," .tbl-feed-header {padding: 0px 5px 10px 5px; background: transparent; text-align: initial; display: table; width: 100%;}")),t.feedHeaderData){var l=t.feedHeaderData,c=l.headerFontSize,d=void 0===c?"20px":c,h=l.headerFontFamily,u=void 0===h?"Arial, Helvetica, sans-serif":h,p=l.headerColor,m=void 0===p?"#000000":p,g=l.headerFontStyle,f=void 0===g?"normal":g;r.push("".concat(s," .tbl-feed-header .tbl-feed-header-text {font-size: ").concat(d,"; color: ").concat(m,"; line-height: ").concat(d,"; font-family: ").concat(u,"; font-weight: ").concat(f,"}"))}return r.join("")}},{key:"getDefaultFeedCSS",value:function i(){return".".concat(e," { position: relative; margin-top: 20px; margin-bottom: 20px; -webkit-text-size-adjust: 100%; clear: both; } .").concat(e," .tbl-feed-header { padding: 5px; background-color: #ffffff; display: inline-block; } .").concat(e," .tbl-feed-header-logo { background: url(//cdn.taboola.com/static/f8/f89e1763-220d-4e09-ba69-9e040548fb7a.svg) no-repeat 0 0; background-size: contain; height: 11px; width: 76px; display: inline-block; } .").concat(e," .tbl-loading-spinner { margin-bottom: 10px; } .").concat(e," .").concat(t," { margin-bottom: 10px; background-color: #ffffff; border: 1px solid #f1f1f1; } .").concat(e," .").concat(n," { max-width: 770px; margin: 20px auto 0; }/** Mobile CSS Rules **/@media screen and (max-width: 480px) { .").concat(e," { padding: 0; background-color: #ffffff; } .").concat(e," .tbl-feed-header { margin-left: 2px; padding: 5px 0; } .").concat(e," .").concat(t," { margin-bottom: 5px; padding-bottom: 5px; border-width: 0; border-bottom: 4px solid #f1f1f1; } .").concat(e," .trc_header_ext, .").concat(e," .trc-widget-footer { padding-right: 3px; } }/** End of Mobile CSS Rules **/")}},{key:"getFeedConfig",value:function e(t,i,r){if(t){var n=this.getFeedDynamicParameter(t.feedDynamicParameters,i);return n||t[r]}return null}},{key:"getFeedDynamicParameter",value:function e(t,i){if(t){var r=t[i];if(r)return JSON.parse(r)}return null}}]),h}();TRC.Feed=h}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.trcManager=t,this.feeds={},this.invalidFeedsMap={},this.configs={}}return _createClass(e,[{key:"handleFeedCardPlacement",value:function t(i,r){r.isFeedCard=!0,e.setScaArray(r,i);var n=this.getOrCreateFeed(i),o=n&&n.options,a=o&&TRC.Feed.getFeedDynamicParameter(o.feedDynamicParameters,"feedViewConfig"),s=o&&o.feedView,l=o&&(a||s),c=a&&TRC.util.isFalse(a.isFeedView)?a.isFeedView:l;n&&(c&&(TRC.hasFeedView||this.trcManager.global["disable-feed-view-top-referrer"]||(TRC.hasFeedView=!0),TRC.ModuleLoader.load("feed-view",TRC.FeedView,function(){TRC.feedViewModuleLoaded=!0}),l&&l.enableAEClicks&&(n.enableAEClicks=!0),r.feedViewConfig=l),r.parentFeed=n,r.parentFeed.handlePlacement(r))}},{key:"getOrCreateFeed",value:function e(t){var i=t.fpl,r=this.getFeedConfig(i),n=this.feeds[i]||this.createNewFeed(r,i,t);return r.eof&&n.stopScrolling(),r.nb&&n.updateNextBatchNumber(r.nb),n}},{key:"createNewFeed",value:function t(i,r,n){var o=i.fcs,a=i.rooc,s=i.exm&&!TRC.exploreMoreInitialized,l=n.uuip,c=n.ri,d=e.parseFeedOptionsFromResponse(i);s&&this.trcManager.enableExploreMore(i,r);var h=this.trcManager.preloadRequest[r];if(h.isFeed=!0,!o||(h.container=this.getNewFeedContainer(h.container,r,o,a),h.container))return h.fti=i.fti,h.unifiedPlacement=l,h.firstCardRequestId=c,h.sca=n.sca,this.feeds[r]=new TRC.Feed(this.trcManager,h,d)}},{key:"getNewFeedContainer",value:function e(t,i,r,n){var o="feed",a={container:t,"container-selectors":r,"render-on-orig-container":n},s=this.trcManager.getWidgetContainer(a,o);if(s)return s;this.invalidFeedsMap[i]=!0}},{key:"containersReset",value:function e(){var t=this;Object.keys(this.feeds).forEach(function(e){var i=t.feeds[e].mainContainerId,r=document.querySelectorAll("[data-feed-main-container-id=".concat(i,"]")),n,o,a;for(a=0;a<r.length;a++)o=(n=r[a]).getAttribute(TRC.intersections.TARGET_ATTRIB),a>0?n.remove():(n.className=n.origClassName,n.innerHTML="",o&&TRC.intersections.unobserveAll(o))})}},{key:"getFeedConfig",value:function e(t){return this.configs&&this.configs[t]?this.configs[t]:{}}},{key:"hasFeedConflict",value:function e(t,i){return this.feeds[t]||this.hasFeedTestDataMismatch(i)}},{key:"hasFeedTestDataMismatch",value:function e(t){var i=this.feeds[t];if(!i)return!1;if(i.getTestData()!==this.trcManager.testData)return!0;var r=i.getExperimentsHash(),n=this.trcManager.experimentsHash;return r&&!n||!r&&n||r&&n&&r!==n}}],[{key:"setScaArray",value:function e(t,i){t&&t.globalTrcResponseJSON&&t.globalTrcResponseJSON.sca&&(i.sca=t.globalTrcResponseJSON.sca)}},{key:"isExperimentDataEqual",value:function e(t,i){var r,n;return JSON.stringify(t)===JSON.stringify(i)}},{key:"parseFeedOptionsFromResponse",value:function e(t){return{nextBatchDistanceThreshold:t.nbdt,feedCss:t.css,feedCssOverride:t.fcss,publisherFeedCss:t.pfcss,mobileLayout:t.fml,videoSingleManager:t.vsm,feedUi:t.fui,feedNextUp:t.fnu,exploreMore:t.exm,footerOverlay:t.fov,feedDynamicParameters:t.drp,videoDisclosurePosition:t.vdp,uiDesignVersion:t.udv,wasWidget:TRC.util.isTrue(t.ww),firstBatchLazyLoadingEnabled:TRC.util.isTrue(t.fbll),hasFeedUI:void 0===t.hfu||TRC.util.isTrue(t.hfu),hasPreventReachingFooter:TRC.util.isTrue(t.prf),preventReachingFooterData:t.prfd,feedView:TRC.util.isTrue(t.fv)}}},{key:"createFeedScriptWidgetData",value:function e(t,i){return{placement:t,scriptData:i,addWidget:!0}}},{key:"createFeedIframe",value:function e(t,i){return{placement:t,iframeData:i,addWidget:!0,isIframeCard:!0}}},{key:"createPublisherCardData",value:function e(t,i){return{placement:t,addWidget:!0,publisherCardData:i.pcp}}},{key:"createExternalWidgetData",value:function e(t,i){return{placement:t,externalContainerSelector:i.es}}},{key:"isExternalContainerWidget",value:function e(t){return void 0!==t.es&&null!==t.es}},{key:"isFeedScriptWidget",value:function e(t){return t.fpl&&t.js}},{key:"isFeedIframe",value:function e(t){return t.fpl&&t.ifr}},{key:"isPublisherCard",value:function e(t){return t.fpl&&t.pcp}}]),e}();TRC.FeedsManager=e}(),function(){var e=function(){function e(t,i,r){_classCallCheck(this,e),this.trcManager=t,this.parentPlacementData=i,this.parentPlacementName=i.placement,this.container=i.container,this.origContainer=this.container,this.parentContainerId=this.container.id,this.afterPlacementContainerCreated=r.afterPlacementContainerCreated,this.nextBatchDistanceThreshold=r.nextBatchDistanceThreshold||2e3,this.numPlacements=1,this.scAdjacencyPlacements=0,this.feedDynamicParameters=r.feedDynamicParameters,this.uiBatchNumberCounter=1,this.isPendingNextBatch=!0,this.numOfConsecutiveFailedRequests=0,this.maxNumOfConsecutiveFailedRequests=this.trcManager.global["feed-max-num-of-consecutive-failed-requests"]||10,this.firstBatchLazyLoadingEnabled=r.firstBatchLazyLoadingEnabled,this.isFirstBatchRequest=!0,this.isLoadNextBatchAnchorObserveEnter=!1,this.currentBatchSuccessful=!1,this.enableManualLoadNextBatch=this.trcManager.manualVisibilityTrigger&&this.trcManager.global["enable-manual-visible"]||this.feedDynamicParameters&&this.feedDynamicParameters.manualLoadNextBatch,this.numPlaceholderItems=this.feedDynamicParameters&&this.feedDynamicParameters.numPlaceholderItems||3,this.itemsParentContainerSelector=r.itemsParentContainerSelector||"#".concat(this.parentContainerId);var n=this.feedDynamicParameters&&this.feedDynamicParameters.rootSelectorScrollElement||this.trcManager.global["feed-load-next-batch-root-selector"];this.observerRootSelector=n||null,this.observerScrollElement=n&&document.querySelector(n)||window,this.feedObserverLoadNextBatch=this.feedDynamicParameters&&this.feedDynamicParameters.feedObserverLoadNextBatch||this.trcManager.global["feed-observer-load-next-batch"],this.firstBatchDistanceThresholdFromTop=this.feedDynamicParameters&&this.feedDynamicParameters.firstBatchDistanceThresholdFromTop||this.trcManager.global["first-batch-distance-threshold-from-top"],this.feedObserverLoadNextBatch&&!this.enableManualLoadNextBatch&&(this.isLoadNextBatchUsingObserver=!0),this.isLoadNextBatchUsingObserver||this.enableManualLoadNextBatch||(this.throttledScrollHandler=this.scrollHandler.trcBind(this).trcThrottle(10),this.lastScrollTop=this.getScrollTop(),TRC.dom.on(this.observerScrollElement,"scroll",this.throttledScrollHandler)),this.firstBatchDistanceThresholdFromTop&&!this.enableManualLoadNextBatch&&(this.throttledLoadRestOfBatchScrollHandler=this.loadRestOfBatchScrollHandler.trcBind(this,this.firstBatchDistanceThresholdFromTop).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler)),this.enableManualLoadNextBatch&&(this.lastManualRectsTop=0,this.listenToManualLoadNextBatchEvent()),this.feedDynamicParameters&&this.feedDynamicParameters.enableHistory&&(this.historyManager=new TRC.HistoryManager(t)),this.isLoadNextBatchUsingObserver&&this.createLoadNextBatchObserverAnchorElement();var o=TRC.Feed.getFeedConfig(r,"preventReachingFooterConfig","preventReachingFooterData");this.hasPreventReachingFooter=o&&void 0!==o.enable?TRC.util.isTrue(o.enable):r.hasPreventReachingFooter,o&&this.hasPreventReachingFooter&&TRC.PreventReachingTheFooter.init(this,o),this.listenToTrcResponse(),this.createLoadingIndicator(),this.initMonitoringOfDuplicatedItemsIfNeeded()}return _createClass(e,[{key:"loadRestOfBatchScrollHandler",value:function e(t){var i=this.isNearingStartOfPage(t);this.restOfFirstBatchLoaded||this.isCache?TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler):!this.restOfFirstBatchLoaded&&i&&(this.getNextBatch(),TRC.dom.off(this.observerScrollElement,"scroll",this.throttledLoadRestOfBatchScrollHandler))}},{key:"scrollHandler",value:function e(){this.isNearingEndOfContent()&&this.getNextBatch(),this.lastScrollTop=this.getScrollTop()}},{key:"createNewNextBatchAnchorObserver",value:function e(){TRC.dom.off(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId),this.ampFeedResizeListener&&this.ampFeedResizeListener.remove(),this.nextBatchObserverCreator=null,this.isLoadNextBatchAnchorObserveEnter=!1,this.observeNextBatchAnchor()}},{key:"observeNextBatchAnchor",value:function e(){var t=this.getNextBatchDistanceThreshold(),i={rootSelector:this.observerRootSelector,targetElement:this.loadNextBatchAnchorContainer,threshold:[0,.25,.5,.75,1],rootMargin:"0px 0px ".concat(t,"px 0px"),onEnter:this.getNextBatch.trcBind(this)};this.loadNextBatchAnchorObserverId=TRC.intersections.observe(i)}},{key:"createLoadingSpinner",value:function e(){this.spinnerContainer=document.createElement("div"),this.spinnerContainer.className+="tbl-loading-spinner tbl-hidden",this.container.appendChild(this.spinnerContainer)}},{key:"createLoadingCardPlaceholder",value:function e(){var t=this;this.spinnerContainer=document.createElement("div"),TRC.ModuleLoader.load("feed-card-placeholder",TRC.FeedCardPlaceHolder,function(){TRC.FeedCardPlaceHolder.createLoadingCardPlaceholder({direction:t.trcManager.direction,container:t.container,cardPlaceholder:t.spinnerContainer,numPlaceholderItems:t.numPlaceholderItems})})}},{key:"createLoadingIndicator",value:function e(){var t;this.feedDynamicParameters&&"true"===this.feedDynamicParameters.disableLoadingCardsPlaceholder||this.trcManager.global["disable-loading-cards-placeholder"]?this.createLoadingSpinner():this.createLoadingCardPlaceholder()}},{key:"createLoadNextBatchObserverAnchorElement",value:function e(){this.loadNextBatchAnchorContainer=document.createElement("div"),this.loadNextBatchAnchorContainer.className="tbl-batch-anchor",this.container.appendChild(this.loadNextBatchAnchorContainer),this.observeNextBatchAnchor()}},{key:"stopScrolling",value:function e(){if(this.preventReachingTheFooter&&this.preventReachingTheFooter.disable(),this.isLoadNextBatchUsingObserver)return this.isAllowedToRequestMoreContent=!1,void TRC.intersections.unobserve(this.loadNextBatchAnchorObserverId);this.enableManualLoadNextBatch?this.isAllowedToRequestMoreContent=!1:TRC.dom.off(this.observerScrollElement,"scroll",this.throttledScrollHandler)}},{key:"hideLoadingSpinner",value:function e(){-1===this.spinnerContainer.className.indexOf("tbl-hidden")&&TRC.dom.addClass(this.spinnerContainer,"tbl-hidden")}},{key:"showLoadingSpinner",value:function e(){TRC.dom.removeClass(this.spinnerContainer,"tbl-hidden")}},{key:"listenToTrcResponse",value:function e(){var t;t=this.hasPreventReachingFooter?this.onTrcResponsePreventReachingFooterWrapper.trcBind(this):this.onTrcResponse.trcBind(this),TRC.EventsAPI.listen("nocontent",this.onTrcNoContent.trcBind(this)),TRC.listen("trcResponseHandled",t),TRC.listen("resumeFeedRendering",t)}},{key:"listenToManualLoadNextBatchEvent",value:function e(){TRC.listen("visible::".concat(this.parentPlacementName),this.manualLoadNextBatchHandler.trcBind(this))}},{key:"shouldEnableLoadNextBatch",value:function e(t){var i=t.boundingClientRect.top<this.lastManualRectsTop,r,n;return t.boundingClientRect.top+t.boundingClientRect.height-t.rootBounds.height<=this.getNextBatchDistanceThreshold()&&i}},{key:"manualLoadNextBatchHandler",value:function e(t){this.shouldEnableLoadNextBatch(t)&&this.getNextBatch(),this.lastManualRectsTop=t.boundingClientRect.top}},{key:"isNearingStartOfPage",value:function e(t){return t<=this.getScrollTop()}},{key:"isNearingEndOfContent",value:function e(){var t=this.container.getBoundingClientRect().top+this.container.offsetHeight,i=TRC.dom.getViewportVerticalRange(),r=i.max-i.min,n,o=t>0&&t-r<=this.getNextBatchDistanceThreshold(),a;return this.getScrollTop()>this.lastScrollTop&&o}},{key:"getNextBatchDistanceThreshold",value:function e(){return this.isFirstBatchRequest&&this.firstBatchLazyLoadingEnabled&&this.trcManager.global["feed-first-batch-distance-threshold"]||this.nextBatchDistanceThreshold}},{key:"updateNextBatchNumber",value:function e(t){this.trcNextBatchNumber=+t}},{key:"getNextBatch",value:function e(t){this.preventReachingTheFooter&&this.preventReachingTheFooter.lateRenderEnabled&&this.preventReachingTheFooter.handleGetNextBatch();var i={};if(!1!==this.isAllowedToRequestMoreContent&&!this.isPendingNextBatch){if(this.isLoadNextBatchUsingObserver){if(!t&&this.isLoadNextBatchAnchorObserveEnter)return;this.isLoadNextBatchAnchorObserveEnter=!0}this.isFirstBatchRequest=!1,this.parentPlacementData.fi=this.numPlacements+this.scAdjacencyPlacements,this.parentPlacementData.fb=this.trcNextBatchNumber||++this.uiBatchNumberCounter,this.restOfFirstBatchLoaded=!0,i[this.parentPlacementName]=this.parentPlacementData,this.isPendingNextBatch=!0,this.showLoadingSpinner(),this.trcManager.dispatchLoadRequest(i)}}},{key:"getScrollTop",value:function e(){return TRC.dom.getScrollTop(this.observerScrollElement)}},{key:"handlePlacement",value:function t(i){var r=document.createElement("div"),n=i.trcResponse.scac;if(this.feedDynamicParameters&&e.isVideoItemPreviewOn(this.feedDynamicParameters,i)&&(r.className="tbl-preview"),i.isCache){if(this.isCache=!0,this.cachedViewId=i.cachedViewId,!this.loadFromCacheEventSent){var o="backToFeed_loadFromCache",a=__trcJSONify({origViewId:this.cachedViewId,placement:i.placement,cardIndex:n?null:this.numPlacements});this.trcManager.sendAbTestEvent(o,a),this.loadFromCacheEventSent=!0}}else if(this.isCache&&!this.loadNotFromCacheEventSent){var s="backToFeed_loadNotFromCache",l=__trcJSONify({origViewId:this.cachedViewId,placement:i.placement,cardIndex:n?null:this.numPlacements});this.trcManager.sendAbTestEvent(s,l),this.loadNotFromCacheEventSent=!0}i.container=r,i.modeGroupOrder=this.numPlacements,n||r.setAttribute("data-card-index",this.numPlacements),r.placementData=i,this.uiBatchNumberCounter=+i.trcResponse.fb||this.uiBatchNumberCounter,this.parentContainerId&&(r.id="".concat(this.parentContainerId).concat(n?"-sca".concat(this.scAdjacencyPlacements+1):"-pl".concat(this.numPlacements)),r.setAttribute("data-batch-num",this.uiBatchNumberCounter)),"function"==typeof this.afterPlacementContainerCreated&&this.afterPlacementContainerCreated(r,i),this.isLoadNextBatchUsingObserver?this.container.insertBefore(r,this.container.querySelector(".tbl-batch-anchor")):this.container.insertBefore(r,this.container.querySelector(".tbl-loading-spinner")),this.historyManager&&(this.historyManager.trackElement(r),this.historyManager.scrollToElementIfWasLastInViewPort(r)),n?this.scAdjacencyPlacements++:this.numPlacements++,(!i.trcResponse.v||i.trcResponse.v.length>0)&&(this.currentBatchSuccessful=!0)}},{key:"switchMainContainer",value:function e(t){this.container=t,this.isLoadNextBatchUsingObserver&&this.container.appendChild(this.loadNextBatchAnchorContainer),this.container.appendChild(this.spinnerContainer)}},{key:"onTrcResponsePreventReachingFooterWrapper",value:function e(t){this.preventReachingTheFooter&&this.preventReachingTheFooter.preparePreventScroll(t)}},{key:"onTrcNoContent",value:function e(t){t.detail.placement||(this.currentBatchSuccessful=!1,this.onTrcResponse())}},{key:"onTrcResponse",value:function e(){if(this.currentBatchSuccessful)this.numOfConsecutiveFailedRequests=0;else if(this.numOfConsecutiveFailedRequests++,this.numOfConsecutiveFailedRequests>=this.maxNumOfConsecutiveFailedRequests)return this.stopScrolling(),void this.hideLoadingSpinner();this.currentBatchSuccessful=!1,this.isPendingNextBatch=!1,this.preventReachingTheFooter&&!0===this.preventReachingTheFooter.isWaitToHide?this.preventReachingTheFooter.isWaitToHide=!1:this.hideLoadingSpinner(),this.isLoadNextBatchUsingObserver&&!this.nextBatchObserverCreator&&!1!==this.isAllowedToRequestMoreContent&&(this.nextBatchObserverCreator=this.createNewNextBatchAnchorObserver.trcBind(this).trcThrottle(10),TRC.dom.on(this.observerScrollElement,"scroll",this.nextBatchObserverCreator),this.ampFeedResizeListener=TRC.listen("ampFeedResize",this.nextBatchObserverCreator)),this.duplicatedItemsMonitor&&this.duplicatedItemsMonitor.checkForDuplicatedItems(),this.preventReachingTheFooter&&this.preventReachingTheFooter.isEnableLateRender&&(this.preventReachingTheFooter.isEnableLateRender=!1,this.getNextBatch(!0))}},{key:"setIsAllowedToRequestMoreContent",value:function e(t){this.isAllowedToRequestMoreContent=t}},{key:"getIsFirstBatch",value:function e(){return this.isFirstBatchRequest}},{key:"initMonitoringOfDuplicatedItemsIfNeeded",value:function e(){if(this.shouldMonitorForDuplicatedItems()){var t={parentContainerSelector:this.itemsParentContainerSelector,additionalLogDataBuilder:function e(t){return{cardIndex:TRC.dom.closest(t,"[data-card-index]").getAttribute("data-card-index")}}};this.duplicatedItemsMonitor=new TRC.DuplicatedItemsMonitor(this.trcManager,t)}}},{key:"shouldMonitorForDuplicatedItems",value:function e(){return this.trcManager.global["monitor-dup-items-traffic-pct"]>100*Math.random()||-1!==["yes","true","1"].indexOf(TRC.URL.prototype.getParameter.call(location.href,"taboola_dedup_debug"))}}],[{key:"isVideoItemPreviewOn",value:function e(t,i){return!(t.uimvip!==i.mode&&!t.evip)}}]),e}();TRC.InfiniteScrollEngine=e}(),function(){var e=function(){function e(t){_classCallCheck(this,e),this.getConfig(t),this.trackFastScroller()}return _createClass(e,[{key:"getConfig",value:function e(t){this.lateRenderTimeout=parseInt(t.timeout,10)||5e3,this.fastScrollerTime=parseInt(t.fastScrollerTime,10)||1e4,this.maxCards=parseInt(t.maxCards,10)||5,this.detectCardNumber=parseInt(t.detectCardNumber,10)||5,this.trcManager=t.trcManager,this.infiniteScrollEngine=t.infiniteScrollEngine,this.cardOneTime=null,this.detectCardTime=null,this.observerTargets=[],this.onScroll=this.observeScroll.trcBind(this).trcThrottle(50),this.onEndKey=this.endKeyHandler.trcBind(this),this.isFastScroller=!1,this.prevPosition=window.pageYOffset,this.scrollThrottleTime=parseInt(t.scrollThrottleTime,10)||10,this.timeout=null,this.scrollTimeoutLength=parseInt(t.scrollTimeoutLength,10)||5e3,this.timeoutEnabled=!1,this.stopListenToBatch=!0,this.shouldPreventScrolling=!0,this.loadNextBatchAnchorContainer=t.infiniteScrollEngine.loadNextBatchAnchorContainer,this.isPreventScroll=!1}},{key:"trackFastScroller",value:function e(){TRC.dom.on(window,"scroll",this.onScroll),TRC.dom.on(document,"keydown",this.onEndKey)}},{key:"unTrackFastScroller",value:function e(){TRC.dom.off(window,"scroll",this.onScroll),TRC.dom.off(document,"keydown",this.onEndKey),this.observerTargets.forEach(function(e){TRC.intersections.unobserve(e)})}},{key:"enableLateRender",value:function e(){this.isFastScroller=!0,this.lateRenderEnabled=!0}},{key:"observeScroll",value:function e(){this.cardOne&&0!==this.cardOne.length||(this.cardOne=this.infiniteScrollEngine.origContainer.querySelector('[data-card-index="1"]'),this.cardOne&&this.observeCard(this.cardOne,this.saveCardVisibilityTime.trcBind(this,"cardOneTime"))),this.detectCard&&0!==this.detectCard.length||(this.detectCard=this.infiniteScrollEngine.origContainer.querySelector('[data-card-index="'.concat(this.detectCardNumber,'"]')),this.detectCard&&this.observeCard(this.detectCard,this.saveCardVisibilityTime.trcBind(this,"detectCardTime"))),this.detectCardTime&&this.cardOneTime&&(this.detectCardTime-this.cardOneTime<this.fastScrollerTime&&this.enableLateRender(),this.unTrackFastScroller())}},{key:"observeCard",value:function e(t,i){var r={targetElement:t,onEnter:i,threshold:.5},n=TRC.intersections.observe(r);this.observerTargets.push(n)}},{key:"saveCardVisibilityTime",value:function e(t){this[t]||(this[t]=(new Date).getTime())}},{key:"endKeyHandler",value:function e(){var t=window.event,i=t.keyCode,r=t.metaKey;this.lateRenderEnabled||(35===i||r&&40===i)&&(this.unTrackFastScroller(),this.enableLateRender())}},{key:"handleGetNextBatch",value:function e(){this.getNextBatchTime=(new Date).getTime()}},{key:"handleBatch",value:function e(t,i){var r=i.trc.vl.length;void 0===this.numOfCards&&(this.numOfCards=0),this.numOfCards+=r,this.isPreventScroll=!1,this.numOfCards>=this.maxCards&&(this.numOfCards=0,this.isPreventScroll=!0,this.isEnableLateRender=!0,this.preventScrollBelowAnchor()),this.stopListenToBatch||this.stopListenToScrollForPrevent()}},{key:"listenToScrollForPrevent",value:function e(){this.onScrollForPrevent=this.observeScrollForPrevent.trcBind(this),TRC.dom.on(window,"scroll",this.onScrollForPrevent),this.stopListenToBatch=!1}},{key:"stopListenToScrollForPrevent",value:function e(){TRC.dom.off(window,"scroll",this.onScrollForPrevent),TRC.dom.off(document,"keydown",this.onEndKeyOnPreventScroll),this.stopListenToBatch=!0,clearTimeout(this.timeout)}},{key:"observeScrollForPrevent",value:function e(){var t;if(!((new Date).getTime()-this.scrollEventTime<this.scrollThrottleTime)){var i=TRC.dom.getScrollTop(window),r=this.prevPosition>i,n=this.infiniteScrollEngine.parentContainerId,o=document.getElementById("".concat(n,"-pl").concat(this.infiniteScrollEngine.numPlacements-1)).scrollHeight,a=window.innerHeight-o/1.5,s=TRC.PreventReachingTheFooter.getOffsetFromTopOfPage(this.loadNextBatchAnchorContainer),l;if(!r&&s<i+a&&this.shouldPreventScrolling){var c=s-a;window.scrollTo(TRC.PreventReachingTheFooter.getWindowScrollLeft(),c),this.timeoutEnabled||this.enableScrollBelowAnchorOnTimeout()}this.prevPosition=TRC.dom.getScrollTop(window),this.scrollEventTime=(new Date).getTime()}}},{key:"enableScrollBelowAnchorOnTimeout",value:function e(){var t=this;this.timeout=setTimeout(function(){t.shouldPreventScrolling=!1},this.scrollTimeoutLength),this.timeoutEnabled=!0}},{key:"preventScrollBelowAnchor",value:function e(){this.shouldPreventScrolling=!0,clearTimeout(this.timeout),this.timeoutEnabled=!1}},{key:"listenToKeysOnPreventScroll",value:function e(){this.onEndKeyOnPreventScroll=this.endKeyHandlerOnPreventScroll.trcBind(this),TRC.dom.on(document,"keydown",this.onEndKeyOnPreventScroll)}},{key:"endKeyHandlerOnPreventScroll",value:function e(t){var i=t||window.event,r=i.keyCode,n=i.metaKey;(35===r||n&&40===r)&&window.scrollTo(0,TRC.PreventReachingTheFooter.getOffsetFromTopOfPage(this.loadNextBatchAnchorContainer)-window.innerHeight)}},{key:"shouldLateRender",value:function e(t){return this.isFastScroller&&this.isEnableLateRender&&t<this.lateRenderTimeout}},{key:"preparePreventScroll",value:function e(t){this.trcResponseTime=(new Date).getTime();var i=this.trcResponseTime-this.getNextBatchTime;if(this.shouldLateRender(i)){var r=this.lateRenderTimeout-i;setTimeout(this.infiniteScrollEngine.onTrcResponse.trcBind(this.infiniteScrollEngine,t),r),this.trcResponseTime=null,this.getNextBatchTime=null,this.isWaitToHide=!0,this.isPreventScroll&&(this.listenToScrollForPrevent(),this.listenToKeysOnPreventScroll())}else this.infiniteScrollEngine.onTrcResponse(t)}},{key:"disable",value:function e(){this.infiniteScrollEngine.hideLoadingSpinner(),this.isPreventScroll=!1,this.stopListenToScrollForPrevent()}}],[{key:"getWindowScrollLeft",value:function e(){return window.scrollX?window.scrollX:document.documentElement.scrollLeft}},{key:"getOffsetFromTopOfPage",value:function e(t){return t.getBoundingClientRect().top+window.pageYOffset}},{key:"init",value:function e(t,i){t.preventReachingTheFooter=new TRC.PreventReachingTheFooter({timeout:i.timeout,fastScrollerTime:i.fastScrollerTime,maxCards:i.maxCards,detectCardNumber:i.detectCardNumber,infiniteScrollEngine:t,trcManager:TRCImpl,scrollTimeoutLength:i.scrollTimeoutLength,scrollThrottleTime:i.scrollThrottleTime})}}]),e}();TRC.PreventReachingTheFooter=e}(),function(){var e=5,t=1e3,i=100,r=function(){function r(n,o,a,s){_classCallCheck(this,r),this.parentFeed=n,this.trcManager=o,this.options=s,this.container=n.container,this.origContainer=this.container,this.pendingPublisherCardsList=[],this.feedDynamicParameters=this.options.feedDynamicParameters,this.shouldStopFeedOnMissingPublisherCard=this.feedDynamicParameters&&"STOP"===this.feedDynamicParameters.missingPublisherCardFeedStrategy||"STOP"===this.trcManager.global["missing-publisher-card-feed-strategy"],this.shouldSendCardEvents=!(this.feedDynamicParameters&&this.feedDynamicParameters.disableSendingCardEvents||this.trcManager.global["disable-sending-card-events"]),this.publisherCardMaxRetries=o.global["feed-split-max-retries"]||e,this.publisherCardRetryInterval=o.global["feed-split-retry-interval"]||t,this.feedCardEventsMaxRetries=o.global["feed-card-events-max-retries"]||e,this.feedCardEventsRetryInterval=o.global["feed-card-events-retry-interval"]||t,this.feedCardEventsMinContainerHeight=o.global["feed-card-events-min-container-height"]||i}return _createClass(r,[{key:"handlePendingPublisherCards",value:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o,a,s=(r=r||this.pendingPublisherCardsList[0]).trcResponse[n?"spl":"pcp"],l=s.tps,c=s.sun||s.pun,d,h=!1;try{d=document.querySelector(l)}catch(e){__trcWarn("Exception while trying to find publisher card with selector ".concat(l,": ").concat(e)),h=!0}if(!d||!d.parentNode)return this.parentFeed.setIsAllowedToRequestMoreContent(!1),void(t<this.publisherCardMaxRetries&&!h?(t++,setTimeout(this.handlePendingPublisherCards.trcBind(this,t,i,r,n),this.publisherCardRetryInterval)):(t=0,this.pendingPublisherCardsList.shift(),this.pendingPublisherCardsList.length?setTimeout(this.handlePendingPublisherCards.trcBind(this,t,i,this.pendingPublisherCardsList[0],n),this.publisherCardRetryInterval):(n||this.shouldStopFeedOnMissingPublisherCard?this.parentFeed.stopScrolling():(this.pendingPublisherCardsList=[],this.parentFeed.setIsAllowedToRequestMoreContent(!0),TRC.dispatch("resumeFeedRendering")),TRC.modDebug.logMessageToServer(1,"Load publisher card: ".concat(c," on Card: ").concat(i," with the anchor element selector: ").concat(l," failed after ").concat(this.publisherCardMaxRetries," retries"),{idx:"pc",pc:c,st:0,sel:l,slot:i,plat:this.trcManager.getPlatformCode()}))));this.createFeedContainerForResumeAfterPublisherCard(d,s),this.shouldSendCardEvents&&!n&&this.pendingPublisherCardsList.forEach(this.initCardEventsManager.trcBind(this)),TRC.modDebug.logMessageToServer(2,"Load publisher card: ".concat(c," on Card: ").concat(i," with the anchor element selector: ").concat(l," succeed"),{idx:"pc",pc:c,st:1}),this.pendingPublisherCardsList=[],this.parentFeed.setIsAllowedToRequestMoreContent(!0),t>0&&TRC.dispatch("resumeFeedRendering")}},{key:"initCardEventsManager",value:function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.trcResponse.pcp.tps,n=document.querySelector(r);if(n){var o=new TRC.CardEventsManager(this.trcManager,this.options,t,n);this.checkIfCardRendered(o,n)}else i<this.publisherCardMaxRetries&&(i++,setTimeout(this.initCardEventsManager.trcBind(this,t,i),this.feedCardEventsRetryInterval))}},{key:"createFeedContainerForResumeAfterPublisherCard",value:function e(t,i){var n=document.createElement("div"),o=this.parentFeed.container;if(this.parentFeed.numContainers++,this.parentFeed.switchMainContainer(n),this.parentFeed.setMainContainerCssClassesAndAttributes(n,this.options),t.parentNode.insertBefore(n,t.nextElementSibling),i&&(TRC.util.isTrue(i.scw)||TRC.util.isTrue(i.acw))&&(this.setPublisherCardContainerStyle(n),TRC.dom.on(window,"resize",this.setPublisherCardContainerStyle.trcBind(this,n))),r.sendWarnIfAnchorIsIncorrectlyPositioned(o,t),this.parentFeed.isFullWidthMobileFeed(this.options)){var a=this.parentFeed.getMobileFullWidthMarginsCss(this.parentFeed.numContainers);a&&TRC.dom.injectStyle(a,null)}}},{key:"getPageDirection",value:function e(){return"rtl"===this.trcManager.direction?"right":"left"}},{key:"setPublisherCardContainerMargin",value:function e(t){var i=this.getPageDirection(),r=this.origContainer.getBoundingClientRect()[i],n=t.getBoundingClientRect()[i],o,a=1;if(r!==n){"right"===i?(o="marginRight",a=-1):o="marginLeft";var s,l,c=(r-n+parseInt(getComputedStyle(t)[o],10))*a;t.style[o]="".concat(c,"px")}}},{key:"setPublisherCardContainerStyle",value:function e(t){var i=r.getContainerWidth(this.origContainer),n=r.getContainerWidth(t),o=this.options.feedDynamicParameters,a=o&&o.disableFeedSplitContainerAlignment||this.trcManager.global["disable-feed-split-container-alignment"],s=i===n;s&&a||(s||(t.style.width=i),a||this.setPublisherCardContainerMargin(t))}},{key:"registerPublisherCardForHandling",value:function e(t){this.pendingPublisherCardsList.unshift(t)}},{key:"checkIfCardRendered",value:function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i.getBoundingClientRect().height<this.feedCardEventsMinContainerHeight?r<this.feedCardEventsMaxRetries&&(r++,setTimeout(this.checkIfCardRendered.trcBind(this,t,i,r),this.feedCardEventsRetryInterval)):t.handleRenderedCard(i)}}],[{key:"sendWarnIfAnchorIsIncorrectlyPositioned",value:function e(t,i){var r,n;i.getBoundingClientRect().top<t.getBoundingClientRect().top&&__trcWarn("anchor element is above the original feed container")}},{key:"getContainerWidth",value:function e(t){return getComputedStyle(t).width}}]),r}();TRC.PublisherCardsManager=r}(),function(){var e="trc-w2f",t="trc-w2f-no-ui",i=function(){function i(e,t,r){_classCallCheck(this,i),this.parentFeed=e,this.trcManager=t,this.hasFeedUI=r,this.setUpFeedContainer(),TRC.listen("trcResponseHandled",this.setContentTypeCssClass.trcBind(this))}return _createClass(i,[{key:"setUpFeedContainer",value:function i(){var r=this.parentFeed.container;r.className+=" ".concat(e),!1===this.hasFeedUI&&(r.className+=" ".concat(t))}},{key:"setContentTypeCssClass",value:function e(){var t=this.parentFeed.container,i=t.querySelectorAll(".videoCube.syndicatedItem").length,r,n="sponsored";t.querySelectorAll(".videoCube:not(.syndicatedItem)").length&&(n=i?"hybrid":"organic"),this.parentFeed.container.className=this.parentFeed.container.className.replace(/\btrc-content-(hybrid|sponsored|organic)\b/g,""),this.parentFeed.container.className+=" trc-content-".concat(n)}},{key:"addHeaderToFeed",value:function e(t){this.parentFeed.header.appendChild(t),this.header=t}},{key:"addFooterToFeed",value:function e(t){this.footer=document.createElement("div"),this.footer.className="tbl-feed-footer",this.footer.appendChild(t),this.parentFeed.container.appendChild(this.footer)}},{key:"getHeader",value:function e(){return this.header}},{key:"getFooter",value:function e(){return this.footer}},{key:"applyWidgetHeaderAndFooterStylesToFeed",value:function t(i){if(!this.headerAndFooterStylesApplied){var r=new RegExp("(\\.".concat(i,")([^{]+\\.(trc_rbox_header|logoDiv|trc-widget-footer))"),"g"),n=new RegExp("^(?![^}]*.".concat(e,"[^{]+).*$"),"gm");TRC.dom.injectedStyles.forEach(function(t){if(r.test(t.innerText)){var i=t.innerText.replace(r,".".concat(e,"$2"));i=(i=(i=(i=i.replace(/\n/g,"")).replace(/}/g,"}\n")).replace(n,"")).replace(/\n/g,""),TRC.dom.injectStyle(i,document)}}),this.headerAndFooterStylesApplied=!0}}}]),i}();TRC.WidgetToFeedHelper=i}(),function(){var e={TABOOLA_REMINDER:{name:"taboola_reminder",responseKey:"taboola-reminder",contentElementId:"tbl-taboola-reminder-inner",moduleFileName:"taboola-reminder",moduleClass:"TaboolaReminder",closeBtn:"tbl-taboola-reminder-closeBtn",closeBtnWrapper:"tbl-taboola-reminder-closeBtn-wrapper"},NEXT_UP:{name:"next_up",responseKey:"next-up-widget",contentElementId:"tbl-next-up-inner",moduleFileName:"next-up-widget",moduleClass:"NextUpWidget",closeBtn:"tbl-next-up-closeBtn",closeBtnWrapper:"tbl-next-up-closeBtn-wrapper"}},t=function(){function t(e,i,r){_classCallCheck(this,t),t.isFloatingUnitOn?__trcWarn("Floating Unit: Trying To Add More Than One Floating Unit"):(t.isFloatingUnitOn=!0,this.formattedResponse=e,this.placementData=i,this.trcManager=r,this.videoList=this.formattedResponse.trc["video-list"],this.unit=t.getUnitByResponseKey(this.videoList),this.contentSelector="#".concat(this.unit.contentElementId),this.sendSupplyEvent("RENDERED"),this.initFloatingUnit())}return _createClass(t,[{key:"sendSupplyEvent",value:function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n={event_type:this.unit.name,event_state:t,event_value:i,event_msg:r};TRCImpl.sendEvent("supply-feature",{d:JSON.stringify(n)},null)}},{key:"initFloatingUnit",value:function e(){this.createElementForFloatingUnitContent(),this.setFloatingUnitOptions(),this.definePlacementDataContainerSelector(),this.lazyLoadModules()}},{key:"definePlacementDataContainerSelector",value:function e(){this.placementData["container-selectors"]=[{container:this.contentSelector,location:"first",shouldCreateContainer:!0,isFloatingUnit:!0}]}},{key:"setFloatingUnitOptions",value:function e(){this.floatingUnitOptions=this.videoList[this.unit.responseKey]||{},this.floatingUnitOptions.unit=this.unit}},{key:"setNextUpSpecificOptions",value:function e(){this.floatingUnitOptions.nupOverlayConfig=this.trcManager.global["nup-overlay-config"]?JSON.parse(this.trcManager.global["nup-overlay-config"]):{}}},{key:"lazyLoadModules",value:function e(){var t=this;TRC.ModuleLoader.load("floating-unit",TRC.FloatingUnit,function(){t.lazyLoadChildClass()}.trcBind(this))}},{key:"lazyLoadChildClass",value:function t(){var i=this;this.unit.responseKey===e.NEXT_UP.responseKey&&this.setNextUpSpecificOptions(),TRC.ModuleLoader.load(this.unit.moduleFileName,TRC[this.unit.moduleClass],function(){var e;new(0,TRC[i.unit.moduleClass])(i.floatingUnitOptions,i.trcManager,i.contentElement),i.trcManager.initRBoxDrawingIfPlacementEligible(i.placementData)}.trcBind(this))}},{key:"createElementForFloatingUnitContent",value:function e(){var t=document.createElement("div");t.id=this.unit.contentElementId,t.className=this.unit.contentElementId,TRC.dom.addClass(t,"tbl-hidden"),this.contentElement=document.body.appendChild(t)}}],[{key:"getUnitByResponseKey",value:function t(i){var r;return Object.keys(e).some(function(t){var n=e[t];return!!i[n.responseKey]&&(r=n,!0)}),r}},{key:"isFloatingUnit",value:function e(i){return i&&!!t.getUnitByResponseKey(i)}}]),t}();t.isFloatingUnitOn=!1,TRC.FloatingUnitGenerator=t}(),function(){var t=1000075,i={},r="",n;function o(e,o,a,s,h){var u;r=l(),n=TRCImpl.additional_data&&TRCImpl.additional_data.sdkd||{};var m=c(),g=s.global["fraud-detection-script-url"]||"https://js.ad-score.com/score.min.js?pid="+t+"#",f=i={tid:d(),l1:e,l4:a,uid:o,pub_domain:m,ref:a};n.appid?f["l3"]=f["pub_app"]=n.appid:f["l3"]=TRC.platform_code,u=TRC.URL.prototype.switchProtocol.call(g,TRC.PROTOCOL)+TRC.util.keys(f).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(f[e])}).join("&"),this.isInitialized=!0,p(u,{impressionUTID:{enabled:!0===s.global["fraud-enable-impression-utid"],publisherId:e,userId:o,viewId:h}})}function a(r,n,o,a,s,l){setTimeout(function(){try{if(TRC.clickFraudDetect.isLoaded){var c={},d=TRC.clickFraudDetect.impressionUTID;TRC.util.keys(i).forEach(function(e){c[e]=i[e]}),c["pid"]=""+t,c["l2"]=r,c["l3"]=c["l3"]||TRC.platform_code,c["l4"]=a,c["l5"]=s,c["l6"]="clicked",c["uid"]=n,c["utid"]=d?d+"_"+o:o,c["isTRCUrl"]=l,adScore("send","adclick",{},c)}else __trcWarn("Fraud script did not render",e)}catch(e){__trcWarn("fraudScriptCallback: Error in fraud detection",e)}},0)}function s(){return!!window.taboolaMobile}function l(){if(!s())return TRC.isAMP&&window.context&&window.context.canonicalUrl||TRC.pageManager.getTopMostWindow().location.href;var e=TRC._taboolaClone&&TRC._taboolaClone.filter(function(e){return!!e.url});return e&&e.url||window.location.href}function c(){var e=document.createElement("a");return e.href=r||l(),e.hostname}function d(){return s()?"_InAPP":"PHON"===TRC.platform_code?"_MW":"_Desktop"}function h(e){TRC.clickFraudDetect.isLoaded=!0,e.impressionUTID.enabled&&u(e.impressionUTID)}function u(e){var i=[e.viewId,e.publisherId,e.userId].join("-");if(e.publisherId&&e.userId&&e.viewId)try{window.adScore("set","utid",{},{pid:t,utid:i}),TRC.clickFraudDetect.impressionUTID=i}catch(e){__trcError("Failed to set fraud UTID on impression",e)}else __trcError("Error in clickFraudDetect.setImpressionUTID: missing parameters")}function p(e,t){if(!TRC.botDetected)try{TRC.net.loadScript(e,"js",h.bind(null,t),null,!0)}catch(e){__trcWarn("loadFraudScript: Error appending fraud script",e)}}TRC.clickFraudDetect={init:o,fraudScriptCallback:a,isInitialized:!1,isLoaded:!1,impressionUTID:null}}(),TRC.util=function(win,doc){var modObject={isType:function(e,t){return t=t.charAt(0).toUpperCase()+t.substr(1),Object.prototype.toString.call(e)=="[object "+t+"]"},hasKeys:function(e){var t;if(this.isType(e,"object"))if(Object.keys&&!Object.propertyIsEnumerable("keys")){if(Object.keys(e).length>0)return!0}else for(t in e)if(e.hasOwnProperty(t))return!0;return!1},getRandomIds:function(e){for(var t=0;t<e.len;t++)e.arr[t]=e.prefix+Math.floor(Math.random()*Math.pow(10,e.strength)+1)+e.suffix},getHtmlDecodeText:(element=doc.createElement("div"),function(e){return e&&"string"==typeof e?(element.innerHTML=encodeURI(e),e=element.textContent||element.innerText,element.innerHTML="",decodeURI(e)):""}),isEmptyString:function(e){return!e||/^\s*$/.test(e)},keys:function(){"use strict";if(Object.keys)return function(e){return"object"==typeof e||"function"==typeof e&&null!==e?Object.keys(e):[]};var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=i.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))return[];var o=[],a,s;for(a in n)e.call(n,a)&&o.push(a);if(t)for(s=0;s<r;s++)e.call(n,i[s])&&o.push(i[s]);return o}}(),merge:function(e){"use strict";if(void 0===e||null===e||e.constructor!==Object)return null;for(var t=TRC.util,i=1;i<arguments.length;i++){var r=arguments[i];if(void 0!==r&&null!==r&&r.constructor===Object)for(var n=t.keys(r),o=0,a,s=n.length;o<s;o++)e[a=n[o]]=r[a]}return e},debounce:function(e,t,i,r){var n;return function(){var o=r||window,a=arguments,s=function(){n=null,i||e.apply(o,a)},l=i&&!n;clearTimeout(n),n=setTimeout(s,t),l&&e.apply(o,a)}},jsonParseWithNative:function(e){try{return JSON.parse(e)}catch(t){return TRC.util.jsonParseWithEval(e)}},jsonParseWithEval:function(text){try{return eval("("+String(text)+")")}catch(e){throw new Error("JSON parse error - invalid input!")}},isNativeFunction:function(e){return/\{\s*\[native code\]\s*\}/.test(""+e)},filterObj:function(e,t){var i={};for(var r in t)t.hasOwnProperty(r)&&e.call(this,t[r],r,t)&&(i[r]=t[r]);return i},textIsRTL:function(e){if(!e)return!1;var t="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜︀-﹯﻽-￿",i="֑-߿יִ-﷿ﹰ-ﻼ",r=e.match(new RegExp("^[^"+t+i+"]*(?:(["+t+"]+)|(["+i+"]+))"));return!(!r||!r[2])},isArray:function(e){return!(!e||Array!==e.constructor)},map:function(e,t,i){if(Array.prototype.map)return e.map(t,i);var r,n,o;if(null==e)throw new TypeError(" array is null or not defined");var a=Object(e),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(r=i),n=new Array(s),o=0;o<s;){var l,c;o in a&&(l=a[o],c=t.call(r,l,o,a),n[o]=c),o++}return n},isTrue:function(e){return"true"===e||!0===e||"1"===e},isFalse:function(e){return!e||"false"===e},splitUrlParts:(linkElement=document.createElement("a"),function(e){return e?(linkElement.href=e,{search:linkElement.search}):{}}),hashString:function(e){var t=0;if(0==e.length)return t;for(var i=0;i<e.length;i++){var r;t=(t<<5)-t+e.charCodeAt(i),t&=t}return t},isPercentEnabled:(flags={},window._trcIsUTactive&&(TRC._rolledFlagsByPercent=flags),function(e,t){if(void 0===flags[t]||null===flags[t]){var i=Math.random();flags[t]="true"===e[t]||i<=+e[t]}return flags[t]}),cloudinaryEncoding:function(e){var t,i,r,n,o,a,s,l;if(null===e||void 0===e)return"";for(l="",o=void 0,r=void 0,s=0,o=r=0,s=(a=e+"").length,n=0;n<s;)i=null,(t=a.charCodeAt(n))<128?r++:i=t>127&&t<2048?String.fromCharCode(t>>6|192,63&t|128):String.fromCharCode(t>>12|224,t>>6&63|128,63&t|128),null!==i&&(r>o&&(l+=a.slice(o,r)),l+=i,o=r=n+1),n++;return r>o&&(l+=a.slice(o,s)),escape(l)},haveMutualKeys:function(e,t){if(!(e&&TRC.util.hasKeys(e)&&t&&TRC.util.hasKeys(t)))return!1;var i=TRC.util.merge({},e,t);return Object.keys(i).length<Object.keys(e).length+Object.keys(t).length}},flags,linkElement,element;return modObject}(window,document);var __trcUnJSONify=function(){var e,t=JSON&&JSON.parse&&"function"==typeof JSON.parse&&TRC.util.isNativeFunction(JSON.parse)?TRC.util.jsonParseWithNative:TRC.util.jsonParseWithEval;return function(e){try{return"string"==typeof e?t(e):e}catch(t){throw new Error("JSON parse error - invalid input! "+e)}}}();function __trcTrim(e){return e.replace(/^\s+|\s+$/g,"")}function __trcGetElementsByClass(e,t,i){var r=[],n=new RegExp("(^|\\s)"+e+"(\\s|$)"),o,a,s;for(i=i||document,t=t||"*",a=(o=i.getElementsByTagName(t)).length,s=0;s<a;s++)n.test(o[s].className)&&r.push(o[s]);return r}function __trcToArray(e,t){var i;for(i in e)e.hasOwnProperty(i)&&t.push([i,e[i]])}function __trcObjectCreate(e){if("function"==typeof Object.create)return Object.create(e);var t=function(){};if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{};var i=new t;return t.prototype=null,null===e&&(i.__proto__=null),i}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var i=[],r=!0,n=!1,o=void 0;try{for(var a=e[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==a["return"]||a["return"]()}finally{if(n)throw o}}return i}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}void 0===document.trcGetCurrentStyle&&(document.trcGetCurrentStyle=function(e,t,i){if("string"==typeof e&&(e=document.getElementById(e)),window.getComputedStyle){var r=window.getComputedStyle(e,i);return r?r.getPropertyValue(t):i?null:e.style[t]}return t=t.replace(/-(\w)/,function(e,t){return t.toUpperCase()}),e.currentStyle[t]}),void 0===Function.prototype.trcBind&&(!Function.prototype.bind||window.TRCImpl&&window.TRCImpl.global&&!window.TRCImpl.global["disable-native-function-bind"]?Function.prototype.trcBind=function(e){var t=this,i=Array.prototype.slice.call(arguments,1);return function(){var r=i.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,r)}}:Function.prototype.trcBind=Function.prototype.bind),void 0===Function.prototype.trcThrottle&&(Function.prototype.trcThrottle=function(e){var t,i=this;return function(){var r=arguments;t&&clearTimeout(t),t=setTimeout(function(){i.apply(i,r)},e)}}),void 0===document.head&&(document.head=document.getElementsByTagName("head")[0]),TRC.GoogleAds=function(){return"object"==typeof window.console&&console.log("TRC.GoogleAds is Deprecated"),{draw:function(){}}},TRC.math=TRC.math||function(e,t){function i(e,t,i){return void 0===i||0==+i?Math[e](t):(t=+t,i=+i,isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-i:-i)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+i:i))))}return{roundByDecimal:function e(t,i){var r=t/i,n=r.toFixed(0),o=r-n;return n*i+i*Math.round(o)},round10:function(e,t){return i("round",e,t)}}}(window,document),function(){var e="trc_rbox_div",t="videoCube",i="item-thumbnail-href",r="item-label-href",n=function(){function n(e){_classCallCheck(this,n),this.trcManager=e,this.itemAppearanceTime={}}return _createClass(n,[{key:"captureItemTime",value:function e(t){this.itemAppearanceTime[t]=Date.now()}},{key:"captureAndSendClickData",value:function o(a){if(d(a)&&!l(a)){var s=n.collectClickHeatmapCardData(a);c(a)&&(s["item-d"]=this.collectClickHeatmapItemData(a)),this.trcManager.sendEvent("heatmap",{d:JSON.stringify(s)},{})}function l(e){return TRC.dom.closest(e.target,"a.".concat(i))||TRC.dom.closest(e.target,"a.".concat(r))}function c(e){return TRC.dom.closest(e.target,".".concat(t))}function d(t){return TRC.dom.closest(t.target,".".concat(e))}}},{key:"collectClickHeatmapItemData",value:function e(t){var i=n.collectEventTargetData(t,!1),r=this.itemAppearanceTime[i.el.video_data.id],o;return{x:i.x,y:i.y,h:i.h,w:i.w,slot:i.el.video_data.itemIndex,"ap-time":r}}}],[{key:"isEnabled",value:function e(t){return TRC.util.isPercentEnabled(t.global,"enable-rbox-heatmap")}},{key:"collectEventTargetData",value:function i(r,o){var a=o?e:t,s=TRC.dom.containsClass(r.target,a),l=s?r.target:TRC.dom.closest(r.target,".".concat(a)),c=l.getClientRects()[0],d=s?{x:0,y:0}:r.target.getClientRects()[0],h=n.getClickPoints(r,d),u=_slicedToArray(h,2),p=u[0],m=u[1],g,f;return{el:l,x:s?p:Math.abs((d.x||d.left)-(c.x||c.left))+p,y:s?m:Math.abs((d.y||d.top)-(c.y||c.top))+m,h:c.height,w:c.width}}},{key:"collectClickHeatmapCardData",value:function e(t){var i=n.collectEventTargetData(t,!0);return{x:i.x,y:i.y,h:i.h,w:i.w,"c-time":Math.floor(t.timeStamp)}}},{key:"getClickPoints",value:function e(t,i){if(n(t)){var r={x:i.x||i.left,y:i.y||i.top};return[t.touches[0].clientX-r.x,t.touches[0].clientY-r.y]}return[t.offsetX,t.offsetY];function n(e){return e.touches}}}]),n}();TRC.Heatmap=n}(),function(){var e="trc_vp_els",t=5;function i(e){this.trcManager=e,this.sessionStorage=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","session"),this.lastViewportElementData=this.getVPElementsHistory()[e.getItemId()],e.trcCache.enableCacheViaStorageFlag()}i.prototype.trackElement=function(e){TRC.dom.on(e,"click",this.storeElementPosition.trcBind(this,e))},i.prototype.scrollToElementIfWasLastInViewPort=function(e){var t,i=this.trcManager;this.lastViewportElementData&&e.id===this.lastViewportElementData.id&&(delete(t=this.getVPElementsHistory())[this.trcManager.getItemId()],this.storeVPElementsHistory(t),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),setTimeout(function(){e.scrollIntoView(!1);var t={abTestsEventType:"simple",name:"backToFeed_backToCard",type:__trcJSONify({origViewId:e.placementData.cachedViewId,viewId:TRC.pageManager.getPageData(),placement:e.getAttribute("data-placement-name"),cardIndex:e.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};i.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(t))},null,!1,null,null)},0))},i.prototype.storeElementPosition=function(e){var t=this.getVPElementsHistory();t[this.trcManager.getItemId()]={id:e.id,s:(new Date).getTime()};var i={abTestsEventType:"simple",name:"backToFeed_exitFromCard",type:__trcJSONify({viewId:TRC.pageManager.getPageData(),placement:e.getAttribute("data-placement-name"),cardIndex:e.getAttribute("data-card-index")}),eventTime:(new Date).getTime()};this.trcManager.sendEvent("abtests",{"unescape-d":encodeURIComponent(__trcJSONify(i))},null,!1,null,null),this.storeVPElementsHistory(t)},i.prototype.storeVPElementsHistory=function(t){t=this.removeEntriesToLimit(t),this.sessionStorage.setValue(e,__trcJSONify(t))},i.prototype.getVPElementsHistory=function(){var t=this.sessionStorage.getValue(e)||"{}";return TRC.util.jsonParseWithNative(t)},i.prototype.removeEntriesToLimit=function(e){var i={},r;if(TRC.util.keys(e).length<=t)return e;for(var n in e)e.hasOwnProperty(n)&&(i[e[n].s]=n);for((r=TRC.util.keys(i)).sort();r.length>t;)r.shift();for(var o in i)i.hasOwnProperty(o)&&-1===r.indexOf(o)&&delete e[i[o]];return e},TRC.HistoryManager=i}(),
/** @license
 * Copyright 2016 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var i=[];n.prototype.THROTTLE_TIMEOUT=1e3,n.prototype.POLL_INTERVAL=null,n.prototype.observe=function(e){if(!this._observationTargets.some(function(t){return t.element==e})){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections()}},n.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter(function(t){return t.element!=e}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},n.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},n.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},n.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]})},n.prototype._parseRootMargin=function(e){var t,i=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},n.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this._checkForIntersections(),this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},n.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,l(e,"resize",this._checkForIntersections,!0),l(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},n.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(i){var n=i.element,a=d(n),s=this._rootContainsTarget(n),l=i.entry,c=e&&s&&this._computeTargetAndRootIntersection(n,t),h=i.entry=new r({time:o(),target:n,boundingClientRect:a,rootBounds:t,intersectionRect:c});l?e&&s?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},n.prototype._computeTargetAndRootIntersection=function(i,r){var n=e.getComputedStyle(i);if(n&&"none"!==n.display){for(var o,a=d(i),s=p(i),l=!1;!l;){var h=null,u=1==s.nodeType?e.getComputedStyle(s):{};if(!u||"none"===u.display)return;if(s==this.root||s==t?(l=!0,h=r):s!=t.body&&s!=t.documentElement&&"visible"!=u.overflow&&(h=d(s)),h&&!(a=c(h,a)))break;s=p(s)}return a}},n.prototype._getRootRect=function(){var e;if(this.root)e=d(this.root);else{var i=t.documentElement,r=t.body;e={top:0,left:0,right:i.clientWidth||r.clientWidth,width:i.clientWidth||r.clientWidth,bottom:i.clientHeight||r.clientHeight,height:i.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map(function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100}),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==r)for(var n=0;n<this.thresholds.length;n++){var o=this.thresholds[n];if(o==i||o==r||o<i!=o<r)return!0}},n.prototype._rootIsInDom=function(){return!this.root||u(t,this.root)},n.prototype._rootContainsTarget=function(e){return u(this.root||t,e)},n.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},n.prototype._unregisterInstance=function(){var e=i.indexOf(this);-1!=e&&i.splice(e,1)},TRC.IntersectionObserver=n,TRC.IntersectionObserverEntry=r}function r(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,r=this.intersectionRect,n=r.width*r.height;this.intersectionRatio=i?n/i:this.isIntersecting?1:0}function n(e,t){var i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=a(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function o(){return e.performance&&performance.now&&performance.now()}function a(e,t){var i=null;return function(){i||(i=setTimeout(function(){e(),i=null},t))}}function s(e,t,i,r){"function"==typeof e.addEventListener?e.addEventListener(t,i,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function l(e,t,i,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function c(e,t){var i=Math.max(e.top,t.top),r=Math.min(e.bottom,t.bottom),n=Math.max(e.left,t.left),o=Math.min(e.right,t.right),a=o-n,s=r-i;return a>=0&&s>=0&&{top:i,bottom:r,left:n,right:o,width:a,height:s}}function d(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e,t){for(var i=t;i;){if(i==e)return!0;i=p(i)}return!1}function p(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document),TRC.intersections=function(e,t){var i=0,r={},n={},o="observeId";function a(){}function s(e,t){if(TRC.util.isArray(e.threshold))for(var i=0;i<e.threshold.length;i++){var r=e.threshold[i];-1===t.indexOf(r)&&t.push(e.threshold)}else-1===t.indexOf(e.threshold)&&t.push(e.threshold)}function l(e,i,r,n,o){var a,s;return e.disableCheckOverlay||i!==TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE||(a=t.elementFromPoint(n-1,o-1)||t.elementFromPoint(n+1,o+1),isNaN(e.exactVisibleThresholdFromTop)||(s=t.elementFromPoint(n,r.boundingClientRect.top+e.exactVisibleThresholdFromTop)),c(a,r.target)||c(s,r.target)||(i=TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE,r.intersectionRatio>=1&&null!==a&&TRC.intersections.observePolling(e))),i}function c(e,t){return e&&(e===t||t.contains(e))}function d(e,t,i,r){return i.height>=r||e<=i.right&&t<=i.bottom&&t>0}function h(e){var t,i;return c(u(e),e)}function u(e){var i,r=p(e.getBoundingClientRect()),n=r.targetElementCenterX,o=r.targetElementCenterY;return t.elementFromPoint(n,o)}function p(e){return m(e,["mm"]).mm}function m(e,t){var i={};return t.forEach(function(t){i[t]=r(e,t)}),i;function r(e,t){switch(t){case"lt":return n(e,0,0);case"mt":return n(e,.5,0);case"rt":return n(e,1,0);case"lm":return n(e,0,.5);case"mm":return n(e,.5,.5);case"rm":return n(e,1,.5);case"lb":return n(e,0,1);case"mb":return n(e,.5,1);case"rb":return n(e,1,1);default:__trcWarn("intersections.getPointInElementByPosition - pos parameter not recognized. pos is: "+t)}}function n(e,t,i){return{targetElementCenterX:e.left+Math.round((e.right-e.left)*t),targetElementCenterY:e.top+Math.round((e.bottom-e.top)*i)}}}function g(e,t){t===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&TRC.intersections.unObservePolling(e)}function f(e,t,i){t.onTrigger(e,t.observer,i,t.lastBoundingClientRect),g(i,t)}function v(e){TRC.Timeout.clear(e.visibleTimeout),delete e.visibleTimeout}function b(e,t,i){t.isEnter&&e.isVisible&&("function"!=typeof t.visibleWidgetPredicate||t.visibleWidgetPredicate())&&(delete e.isVisible,e.visibilityReported=!0,f(e,t,i))}function C(e,t,i){v(e),e.visibilityReported||b(e,t,i)}function y(e,t,i){var r=TRCImpl&&TRCImpl.global["visibility-intersection-api-delay"]||1e3,n=i===TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE&&!e.visibleTimeout||TRC.intersections.forceEnableDelayedVisibilityState();t.enableDelayedVisibilityCheck?n&&(e.isVisible=!0,e.lastVisibleBoundingClientRect=t.lastBoundingClientRect,e.lastVisibleBoundingClientRect.pageXOffset=t.geometryOffsets.pageXOffset,e.lastVisibleBoundingClientRect.pageYOffset=t.geometryOffsets.pageYOffset,e.visibleTimeout=TRC.Timeout.set(C.trcBind(this,e,t,i),r)):f(e,t,i)}function T(e,t,i){var r=t.target,n,o,a,s,c;e.isEnter=t.isIntersecting,e.isExit=!e.isEnter,e.intersection=t.intersectionRatio,e.isEnter?e.onEnter(t,r,e.observer):e.isExit&&(r.visibleTimeout&&v(r),r.isVisible=!1,e.onExit(t,r,e.observer),TRC.intersections.unObservePolling(e));var h=p(n=t.boundingClientRect);return a=h.targetElementCenterX,s=h.targetElementCenterY,o=TRCImpl&&TRCImpl.global["visibility-threshold-override"]||0,c=l(e,c=t.isIntersecting&&t.intersectionRatio>=o&&d(a,s,t.intersectionRect,e.exactVisibleThresholdFromTop)?TRC.intersections.visibilityState.IN_VIEW_PORT_VISIBLE:t.isIntersecting?TRC.intersections.visibilityState.IN_VIEW_PORT_NOT_VISIBLE:TRC.intersections.visibilityState.NOT_IN_VIEW_PORT,t,a,s),i.disableDuplicatePrevention?y(r,e,c):e.lastEventId&&e.lastEventId===c||(y(r,e,c),e.lastEventId=c),c}var R={getPointsOnElement:m,TARGET_ATTRIB:o,visibilityState:{IN_VIEW_PORT_VISIBLE:1,IN_VIEW_PORT_NOT_VISIBLE:2,NOT_IN_VIEW_PORT:3},observe:function(e){var t,l,c,d=e.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1];function h(t){for(var i,n=0;n<t.length;n++){var a=t[n];i=a.target.getAttribute(o).split(" ");for(var s=0;s<i.length;s++){var l=i[s],c=r[l];c.lastBoundingClientRect=a.boundingClientRect,c.geometryOffsets={pageXOffset:window.pageXOffset,pageYOffset:window.pageYOffset},c&&c.observer.tblObserverKey===this.tblObserverKey&&T(c,a,e)}}}if(e.targetElement&&null!==e.threshold&&(e.onEnter||e.onExit||e.onTrigger)){t=e.targetElement,l="tbl-observe-"+i,c=t.getAttribute(o)?t.getAttribute(o)+" "+l:l,t.setAttribute(o,c),i++,s(e,d),r[l]={targetSelector:l,targetElement:t,isEnter:null,isExit:null,intersection:null,disableCheckOverlay:e.disableCheckOverlay,disableDuplicatePrevention:e.disableDuplicatePrevention,enableDelayedVisibilityCheck:e.enableDelayedVisibilityCheck,visibleWidgetPredicate:e.visibleWidgetPredicate,exactVisibleThresholdFromTop:e.exactVisibleThresholdFromTop,threshold:e.threshold,onExit:e.onExit||a,onEnter:e.onEnter||a,onTrigger:e.onTrigger||a,boundingClientRect:null};var u={root:e.rootSelector||null,rootMargin:e.rootMargin||"0px",threshold:e.threshold},p=TRC.util.hashString(JSON.stringify(u)),m;return n[p]?m=n[p]:(u.root=u.root&&document.querySelector(u.root),m=TRC.IntersectionObserver?new TRC.IntersectionObserver(h.trcBind(u),u):new IntersectionObserver(h.trcBind(u),u),"MutationObserver"in window||(m.POLL_INTERVAL=TRCImpl.global["intersections-polyfill-poll-interval"]||500),u.tblObserverKey=m.tblObserverKey=p,n[p]=m),r[l].observer=m,m.observe(t),l}__trcDebug("missing params for intersectionHandler")},isInViewPort:function(e){var t=TRCImpl.global["visibility-threshold"]||e.disableCheckOverlay?[0,.5]:[0,.25,.5,.75,1],i={rootSelector:e.rootSelector||null,targetElement:e.targetElement,threshold:t,rootMargin:"0px",disableCheckOverlay:e.disableCheckOverlay,disableDuplicatePrevention:e.disableDuplicatePrevention,enableDelayedVisibilityCheck:e.enableDelayedVisibilityCheck,visibleWidgetPredicate:e.visibleWidgetPredicate,exactVisibleThresholdFromTop:e.exactVisibleThresholdFromTop,onTrigger:e.onTrigger,onEnter:e.onEnter};return this.observe(i)},unobserve:function(e){var t=r[e],i,n;if(t)return n=(i=(t=r[e].targetElement).getAttribute(o).split(" ")).indexOf(e),1===i.length&&(r[e].observer.unobserve(t),t.removeAttribute(o)),n>-1&&i.length>1&&(i.splice(n,1),t.setAttribute(o,i.join(" "))),delete r[e];__trcLog("missing target element for unobserve")},unobserveAll:function(e){for(var t=e.split(" "),i=0;i<t.length;i++)this.unobserve(t[i])},getIntersectionState:function(){return r},observePolling:function(e){var t=500;this.observedElementsInPolling[e.targetSelector]||(this.observedElementsInPolling[e.targetSelector]={target:e.targetElement,state:e},e.underPolling=!0,this.observedElementsInPollingCounter++),this.observedElementsInPollingCounter>0&&this.startPolling(t)},unObservePolling:function(e){this.observedElementsInPolling[e.targetSelector]&&(delete this.observedElementsInPolling[e.targetSelector],this.observedElementsInPollingCounter--,e.underPolling=!1),0===this.observedElementsInPollingCounter&&this.stopPolling()},stopPolling:function(){clearInterval(this.pollingInterval),this.pollingInterval=null},startPolling:function(e){this.pollingInterval||(this.pollingInterval=setInterval(function(){var e,t=!1,i,r,n=R.observedElementsInPolling;for(var o in n)if(n.hasOwnProperty(o)&&(t=h((e=n[o]).target))){i=e.target.getAttribute(R.TARGET_ATTRIB).split(" "),r=R.getIntersectionState();for(var a=0;a<i.length;a++){var s=i[a];y(e.target,r[s],R.visibilityState.IN_VIEW_PORT_VISIBLE)}R.unObservePolling(e.state)}},e))},observedElementsInPolling:{},observedElementsInPollingCounter:0,forceEnableDelayedVisibilityState:function(){return!1}};return R}(window,document),function(){var e="tbl_creative_preview",t="tbl_should_override_all_slots",i="tbl_should_repeat_override_items",r="additional-properties",n={sentUsageLog:!1,overriddenPlacements:{}},o=!1,a=!0,s={autoTriggerConfig:{hover:"true",viewabilityConfig:{percentage:"5",time:"0"}},repeat:"true",scriptUrlTemplate:"//15.taboola.com/tbp?oid=15&pubid=166277&tagid=948107&pstn=[pstn]&cb=[cb]&callback={CALLBACK_NAME}",unitBootSrc:"//vidstat.taboola.com/vpaid/units/{version}/creatives/creative_js.js"},l="tbl_pvideo_version",c="27_6_17",d=function e(t,i){if(n.isEnabled(t)){var r=n.getNewItemFromUrl();p(r);var o,a=_slicedToArray(r,1)[0],s=i&&i.trc&&i.trc.vl||[];r&&a&&s.length&&(T(r,i),n.handleOverrideItems(s,r))}};n.handleOverrideItems=function(e,i){var r;r=n.getValueFromUrl(t,o)?v(e,i):f(e,i[0].itemType),n.overrideItems(r,i)};var h=function e(t){var i=t[r];if(i)try{return __trcUnJSONify(i)}catch(e){return __trcDebug("invalid json in ".concat(t[r])),{}}return{}},u=function e(t,i){var r=h(t);r&&Object.keys(r).forEach(function(e){i[e]=r[e]})};n.overrideItems=function(e,t){e.length>0&&t&&e.forEach(function(i,r){var o=r%t.length;n.overrideItem(e[r],t[o])})},n.overrideItem=function(e,t){e.thumbnail=t.thumbnail||"",e.title=t.title||"",e.description=t.description||"",e["branding-text"]=t["branding-text"]||"",e.uploader=t.uploader||"",u(t,e),e.url="#"};var p=function e(t){if(!n.sentUsageLog){var i=t?t.map(function(e){return e&&e.creativeId||null}):null;TRC.RBoxUsage.logUsage("TRC.ItemOverride",{extraData:{creativeIds:i,url:window.location.href}}),n.sentUsageLog=!0}};n.isEnabled=function(e){return e&&n.isItemOverrideUrlParam()},n.isItemOverrideUrlParam=function(){return location.search.indexOf(e)>=0};var m=function e(t,i){return!!t[i]||!(t["is-syndicated"]||t["is-in-network"]||t["is-native"])&&"is-organic"===i},g=function e(t,i){if(!i)return t[0];for(var r=0;r<t.length;r++)if(m(t[r],i))return t[r]},f=function e(t,i){var r=n.overriddenPlacements,o=void 0===r?{}:r,a=[],s,l;return t.forEach(function(e){l=e.uuip||e.uip;var t=e.v;t&&l&&!o[l]&&(s=g(t,i))&&(a.push(s),o[l]=!0)}),a},v=function e(t,r){var o,s=[];return n.getValueFromUrl(i,a)||b(t,r),t.forEach(function(e){e.v&&e.v.forEach(function(e){s.push(e)})}),s},b=function e(t,i){for(var r=i.length,n=0;n<t.length;n++){var o=t[n].v;o&&(o.length>=r?C(t,n+1,r):(r-=o.length,n===t.length-1&&r>0&&y(o,r)))}},C=function e(t,i,r){t.splice(i),t[i-1].v.splice(r)},y=function e(t,i){for(var r=0;r<i;r++)t.push(Object.assign({},t[0]))};n.getValueFromUrl=function(e,t){try{var i=TRC.URL.prototype.getParameter.call(window.location.search,e,decodeURIComponent),r=__trcUnJSONify(i);return(void 0===r||null===r&&t)&&(r=t),r}catch(t){return __trcDebug("invalid data in url param ".concat(e)),null}},n.getNewItemFromUrl=function(){var t=n.getValueFromUrl(e);return Array.isArray(t)||(t=[t]),t},TRC.ItemOverride={run:d},window._trcIsUTactive&&(TRC.ItemOverride.privateProps=n);var T=function e(t,i){var r=n.getValueFromUrl(l,c);s.unitBootSrc=s.unitBootSrc.replace("{version}",r);for(var o=0;o<t.length;o++)if(t[o]&&t[o]["additional-properties"]&&t[o]["additional-properties"]["pvideo-url"]){for(var a=0;a<i.trc.vl.length;a++)i.trc.vl[a].pvc=s;return}}}(),function(){function e(e){this._data=e}e.prototype.getId=function(){return this._data.id},e.prototype.getLinkTarget=function(){return this._data.linkTarget},e.prototype.getUrl=function(){return this._data.url},e.prototype.getTitle=function(){return this._data.title},e.prototype.getType=function(){var e=this._data;return e["is-syndicated"]?"sponsored":e["is-in-network"]?"exchange":e["is-native"]?"native":"organic"},e.prototype.getSlot=function(){return this._data.itemIndex},TRC.ItemParser=e}(),function(){var e=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_classCallCheck(this,e),this.onlyClean=i,this.pm=TRC.pageManager,this.storageType=t.storageType||"session",this.localStorage=this.pm.getLocalStorageImplementation("strict-w3c-storage",this.storageType),this.keyValueCache=null,this.cacheTtl=t.ttl||1e3*60*20,this.noTtl=t.noTtl||!1,this.cacheName=t.cacheName||"key_value_cache",this.cacheUtils=new TRC.CacheUtils(this.localStorage,this.cacheName,this.cacheTtl),!localStorage)return{isValidCache:!1};this.isValidCache=!0,this.init()}return _createClass(e,[{key:"cacheData",value:function e(t,i){var r=this.setCacheData(t,i);return this.localStorage.setValue(this.cacheName,__trcJSONify(this.keyValueCache.getData())),r}},{key:"setCacheData",value:function e(t,i){var r=(new Date).getTime();try{this.keyValueCache.setValue(t,{value:i,s:r}),!1===this.noTtl&&this.setCacheClean(t)}catch(e){return!1}return!0}},{key:"getCacheData",value:function e(t){var i=this.keyValueCache.getValue(t);return!0===this.noTtl&&i||i&&!this.isOverTtl(this.keyValueCache.getValue(t).s)?this.keyValueCache.getValue(t).value:null}},{key:"isOverTtl",value:function e(t){return this.cacheUtils.isOverTtl(t)}},{key:"setCacheClean",value:function e(t){this.cacheUtils.setCacheClean(t,this.keyValueCache)}},{key:"cleanCache",value:function e(t){this.cacheUtils.cleanCache(t,this.keyValueCache,this)}},{key:"removeKey",value:function e(t){TRC.CacheUtils.removeKey(t,this.keyValueCache)}},{key:"getKeyValueCache",value:function e(){return this.cacheUtils.getCache(this.pm)}},{key:"init",value:function e(){if(this.onlyClean)return this.localStorage.removeKey(this.cacheName),!1;this.keyValueCache=this.getKeyValueCache();var t=TRC.util.keys(this.keyValueCache.getData());return this.cleanCache(t),!0}}]),e}();TRC.KeyValueCache=e}(window,document),function(e,t){var i={source:"|v|h|c|t|s|p|o|z|video|home|category|text|search|photo|other|content_hub",target:"|v|p|t|m|video|photo|text|mix|"},r="v",n=function(e,t){return e=e.toLowerCase(),-1!==i[t].indexOf("|"+e+"|")?"content_hub"===e?"z":e.substr(0,1):(__trcError('illegal parameter "'+e+'" was passed to trc_ListOriginBuilder method: "set'+t.substr(0,1).toUpperCase()+t.substr(1)+'" \nUsing "video" instead'),"v")},o=TRC.ListOriginBuilder=function(e,t){this.setSource(e||r),this.setTarget(t||"v")};o.prototype.setSource=function(e){r=n(e,"source")},o.prototype.getSource=function(){return r},o.prototype.setTarget=function(e){this.target=n(e,"target")},o.prototype.getTarget=function(){return this.target},o.prototype.toString=function(){return(r+"2"+this.target).replace(/v2v/,"blended")}}(window,document),TRC.multiWidget={init:function e(t){var i=t.originalContainer,r=t.multiWidget,n=t.widgetOptions,o=t.initRBox,a=t.trcManager,s=i;this.trcManager=a;var l="rtl"===this.trcManager.direction,c=[r];return i.parentNode?(n.multiWidgetRecItems=[].slice.call(n.response.trc["video-list"].video),!n.multiWidgetRecItems.length&&this.trcManager.global["mw-display-none-on-no-items-to-render"]&&(i.style.display="none"),TRC.multiWidget.recursiveBuild.call(this,{widgetsArr:c,containerElm:s,depth:0,parentLayout:c,widgetOptions:n,initRBox:o,isRTL:l}),s.className+=" trc_multi_widget",s):null},recursiveBuild:function e(t){var i=this,r=t.widgetsArr,n=t.containerElm,o=t.depth,a=t.parentLayout,s=t.widgetOptions,l=t.initRBox,c=t.isRTL;a.isRTL=c,r.forEach(function(e){var t=__trcCopyProps(e,{});if(t.children){if(!t.children.length)return;var r=TRC.multiWidget.createWrapper(t);n.appendChild(r),n=r,TRC.multiWidget.addMargin(n.previousSibling,a),TRC.multiWidget.recursiveBuild.call(i,{widgetsArr:t.children,depth:o+1,parentLayout:t,containerElm:n,widgetOptions:s,initRBox:l,isRTL:c})}else{var d=TRC.multiWidget.createWidget.call(i,{layout:t,widgetOptions:s,initRBox:l,isRTL:c});n.appendChild(d),TRC.multiWidget.addMargin(d.previousSibling,a)}t.flexSize&&(t.container.style.msFlex=t.container.style.flex=t.flexSize,t.container.style.overflow="hidden")})},addMargin:function e(t,i){var r=i.gap,n=i.orientation,o=i.isRTL;if(t&&r){var a,s="margin".concat("V"===n?"Bottom":o?"Left":"Right");t.style[s]=r}},createWrapper:function e(t){var i=document.createElement("div");return i.className+=" trc_multi_widget_container","V"===t.orientation&&(i.style.msFlexDirection=i.style.flexDirection="column"),t.container=i,i},createWidget:function e(t){var i=t.layout,r=t.widgetOptions,n=t.initRBox;i.container=document.createElement("div");var o=i.container,a=i.name;return this.ensureValidContainer(o),a&&o.setAttribute("widget-name",a),r.mode_name=r.mode=r.response.trc["video-list"]["base-mode"]=i.name,i.RBox=n.call(this,o,r),o}},TRC.net=function(e,t){var i=[],r;return{loadScript:function(e,i,r,n,o){var a=t.getElementsByTagName("script")[0],s=null;if("js"==i)(s=t.createElement("script")).type="text/javascript",s.src=TRC.shiftDomain(e),s.charset="UTF-8",n?s.setAttribute("defer","defer"):o&&s.setAttribute("async","async");else{if("css"!=i)throw new Error("External reference loaded must be of type 'js' or 'css'!");(s=t.createElement("link")).rel="stylesheet",s.type="text/css",s.href=e}return"function"==typeof r&&(s.addEventListener?(s.addEventListener("load",r,!1),s.addEventListener("error",r,!1)):s.onreadystatechange=function(){"loaded"!=s.readyState&&"complete"!=s.readyState||r.apply(s)}),a.parentNode.insertBefore(s,a),s},fireSimpleHttpRequest:function(e){var t=new Image;t.src=e,i.push(t)}}}(window,document),function(){var e=null,t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"init",value:function e(i){t.setReferrer(i),i["keep-referrer-in-session"]&&TRC.pageManager.sessionStorageSetValue("tbl-session-referrer",location.href)}},{key:"updateReferrer",value:function t(i){e=i}},{key:"getReferrer",value:function t(){return e}},{key:"setReferrer",value:function t(i){function r(){for(var e=document.head.getElementsByTagName("link"),t=0;t<e.length;t++)if("referrer"===e[t].rel)return e[t].href}function n(){var e="";try{return(e=top.window.TRC&&top.window.TRC.hasFeedView?decodeURI(document.referrer):decodeURI(top.window.document.referrer))&&!/https?:\/\/(\w+)\.taboola(syndication)?\.com/.test(e)?e.substr(0,400):e.split("?")[0]}catch(e){__trcDebug("TRC.Manager.getReferrer : rendering in cross domain iframe")}}function o(e){if(e["keep-referrer-in-session"]){var t=TRC.pageManager.sessionStorageGetValue("tbl-session-referrer");if(t&&location.hostname===new TRC.URL(t).host)return t}}e=e||r()||n()||o(i)||""}}]),t}();TRC.PageReferrer=t}(),function(){var e="ack";TRC.pageLevelFeaturesManager={features:{"explore-more":{responseKey:"exm",enableInIframe:!0,functionCall:function e(t,i){TRC.pageLevelFeaturesManager.getFeatureOnFeedLevel(t,i)}}},pageLevelFeatures:{},disableFeatureOnIframe:function e(){var t=TRC.pageLevelFeaturesManager.pageLevelFeatures,i;if(window.self!==window.top)for(var r=Object.keys(this.features),n=0;n<r.length;n++){var o=r[n],a=this.features[o].responseKey,s=TRCImpl.global["enable-".concat(a,"-inside-iframe")],l=this.features[o].enableInIframe,c;if(void 0!==s&&(l=s),!1===l)t[this.getPlfKey(a)]=!0}},getFeature:function e(t){var i=this;Object.keys(this.features).forEach(function(e){var r=i.features[e],n=r.responseKey,o;if(!i.pageLevelFeatures[n])try{r.functionCall(t,n)}catch(e){__trcError("Error in functionCall in pageLevelFeaturesManager",e)}})},getFeatureOnFeedLevel:function e(t,i){var r=t.trc.f,n=r&&Object.keys(r);if(n)for(var o=0;o<n.length;o++){var a,s;if(r[n[o]][i]){var l=this.getPlfKey(i);return this.pageLevelFeatures[l]=!0}}},getFeatureOnPageLevel:function e(t,i){if(t.trc&&t.trc[i]){var r=this.getPlfKey(i);return this.pageLevelFeatures[r]=!0}},getPlfKey:function t(i){return"".concat(e,"_").concat(i)}}}(),function(e,t){e.TRC=e.TRC||{};var i,r=!1,n="taboola global",o="trctestcookie";function a(){for(var e="trc_cookie_storage",t={},i=document.cookie.split(/;\s+/),r=0;r<i.length;r++){var n=TRC.text.lsplit(i[r],"=",2),o=unescape(n[0]),a=unescape(n[1]);if(o==e){for(var s=a.split("|"),l=0;l<s.length;l++){var n=s[l].split("=");t[unescape(n[0])]=unescape(n[1])}break}}return this.save=function(){var i=new Array,r,n;for(var o in t)t.hasOwnProperty(o)&&null!=t[o]&&(i[i.length]=escape(o)+"="+escape(t[o]));r=i.length>0?1:-1,n=new Date((new Date).getTime()+365*r*864e5);var a=this.getDomain();void 0!==document.cookie&&(document.cookie=e+"="+escape(i.join("|"))+";domain="+a+";path=/;expires="+n.toUTCString())},this.getDomain=function(){return!0===TRCImpl.global["store-first-party-cookie-in-subdomain"]||"true"===TRCImpl.global["store-first-party-cookie-in-subdomain"]?h.getPageSubDomain():""},this.getValue=function(e){return t.hasOwnProperty(e)?t[e]:null},this.setValue=function(e,i){t[e]=i,this.save()},this.removeKey=function(e){delete t[e],this.save()},this.delete=function(){t={},this.save()},this}function s(e){var t=e||{};return this.getValue=function(e){return t[e]?t[e]:null},this.setValue=function(e,i){t[e]=i},this.removeKey=function(e){delete t[e]},this.getData=function(){return t},this.delete=function(){t={}},this}function l(t){return this.getValue=function(i){return e[t+"Storage"].getItem(i)},this.setValue=function(i,r){try{e[t+"Storage"].setItem(i,r)}catch(e){}},this.removeKey=function(i){try{e[t+"Storage"].removeItem(i)}catch(e){}},this}function c(t){var i=e[t+"Storage"],r=(new Date).getTime()+"",n="_taboolaStorageDetection";try{if(i.setItem(n,r),i.getItem(n)==r)return i.removeItem(n),i}catch(e){}return null}function d(t){try{if(e.localStorage instanceof Storage&&TRC.useStorageDetection&&c(t))return new l(t)}catch(e){return null}}var h=function(){return this.publisher_id=null,this.item_id=null,this.page_id=null,this.state={},this.stateStack=[],this.getPageSubDomain=function(){return this.getPageDomainFromHostName(t.location.hostname)},this.getPageDomainFromHostName=function(e){var t="";try{var i=e.split(".").reverse();t="."+i[1]+"."+i[0],i.length>=3&&i[1].match(/^(com|edu|gov|net|mil|org|nom|co|name|info|biz)$/i)&&(t="."+i[2]+"."+i[1]+"."+i[0])}catch(e){}return t},this.getLocalStorageImplementation=function(t,i){if(null!=this.state.privateStorageImpl&&"strict-w3c-storage"!=t)return this.state.privateStorageImpl;var r=e.TRCImpl?e.TRCImpl.global:{};switch(t=t||(r["local-storage-usage"]?r["local-storage-usage"]:"prefer-w3c-storage")){case"strict-w3c-storage":return d("session"===i?"session":"local");case"prefer-w3c-storage":var n=d("local");if(n)return this.state.privateStorageImpl=n;case"prefer-cookies":try{if(this.canWriteCookies())return this.state.privateStorageImpl=new a}catch(e){}default:return this.state.privateStorageImpl=new s}},this.getFirstPartyCookie=function(){if(this.state.firstPartyCookie)return this.state.firstPartyCookie;var e=this.getLocalStorageImplementation();if(e instanceof a||e instanceof s)return this.state.firstPartyCookie=e;try{if(this.canWriteCookies())return this.state.firstPartyCookie=new a}catch(e){}return this.state.firstPartyCookie=new s},this.canWriteCookies=function(){var e;return document.cookie=o+"=ok",e=-1!==document.cookie.indexOf(o),document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;",e},this.getDummyStorage=function(e){return new s(e)},this.trcParseParams=function(e){if(e&&!owner.item_id)for(var t=e.split("&"),i=0;i<t.length;i++){var r=TRC.text.lsplit(t[i],"=",2);switch(unescape(r[0])){case"item_id":owner.item_id=unescape(r[1]);break;case"publisher_id":owner.publisher_id=unescape(r[1])}}},this.trcGetPublisherParams=function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var i=e[t].src.split("taboola(syndication)?.com/libtrc/")[1];if(i&&e[t].src.search(/taboola(syndication)?.com.*page_management/)>=0){var r=(i=i.split("?")[0]).split("/");owner.page_id=r[0],r.length>2&&(owner.page_id+="/"+r[1]),owner.trcParseParams(e[t].src.split("?")[1])}}},this.getPageData=function(){var e=this.getTopMostWindow();return e.taboola_view_id||(e.taboola_view_id=(new Date).getTime()),TRC.isAMPSplitFeed&&void 0!==TRC.syncViewID&&""!==TRC.syncViewID?TRC.syncViewID:e.taboola_view_id},this.storeValue=function(e,t){this.storePublisherValue(n,e,t)},this.removeKey=function(e){this.removePublisherKey(n,e)},this.getValue=function(e){return this.getPublisherValue(n,e)},this.storePublisherValue=function(e,t,i){var r;this.isNotAllowedToWriteValue(t,i)||(r=this.buildKeyWithPublisher(e,t),this.getLocalStorageImplementation().setValue(r,i),this.addKeyToStoredKeysList(r))},this.isNotAllowedToWriteValue=function(e,t){return null==t||void 0==t||TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(e)},this.buildKeyWithPublisher=function(e,t){return e+":"+t},this.getPublisherValue=function(e,t){return TRC.doNotTrack&&!this.isAllowedKeyWhenDoNotTrack(t)?null:this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(e,t))},this.removePublisherKey=function(e,t){return this.getLocalStorageImplementation().removeKey(this.buildKeyWithPublisher(e,t))},this.removeAllKeys=function(){for(var e=this.getStoredKeysList(),t=[],i,r=0;r<e.length;r++)i=e[r],this.isAllowedKeyWhenDoNotTrack(i)?t.push(i):this.getLocalStorageImplementation().removeKey(i);this.setStoredKeysList(t)},this.addKeyToStoredKeysList=function(e){var t=this.getStoredKeysList();-1===t.indexOf(e)&&(t.push(e),this.setStoredKeysList(t))},this.getStoredKeysList=function(){var e=this.getLocalStorageImplementation().getValue(this.buildKeyWithPublisher(n,"local-storage-keys")),t;try{t=TRC.util.jsonParseWithNative(e)||[]}catch(e){t=[],__trcError("Could not parse local storage keys",e)}return t},this.setStoredKeysList=function(e){var t;try{t=__trcJSONify(e),this.getLocalStorageImplementation().setValue(this.buildKeyWithPublisher(n,"local-storage-keys"),t)}catch(e){return void __trcError("Could not stringify local storage keys",e)}},this.isAllowedKeyWhenDoNotTrack=function(t){var i,r=(e.TRCImpl&&e.TRCImpl.global||{})["dnt-allowed-keys"]||["session-id","trc_css-isolation"],n;return null!==t&&void 0!==t&&(n=t.split(":")[1]||t,-1!==r.indexOf(n))},this.removeUserId=function(){TRC.pageManager.removeKey("user-id"),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie().removeKey(this.buildKeyWithPublisher(n,"user-id"))},this.storeUserId=function(e,t){this.isNotAllowedToWriteValue("user-id",e)||(t?this.getFirstPartyCookie().delete():(this.storePublisherValue(n,"user-id",e),TRCImpl.global["store-userid-first-party-cookie"]&&this.getFirstPartyCookie()!==this.getLocalStorageImplementation()&&this.getFirstPartyCookie().setValue(this.buildKeyWithPublisher(n,"user-id"),e)))},this.storeSessionId=function(e,t){this.isNotAllowedToWriteValue("session-id",e)||(t?this.getFirstPartyCookie().delete():1==TRCImpl.global["store-sessiondata-first-party-cookie"]&&this.getFirstPartyCookie()!==this.getLocalStorageImplementation()&&this.getFirstPartyCookie().setValue(this.buildKeyWithPublisher(n,"session-data"),e))},this.getUserIdFirstPartyCookie=function(){return this.getFirstPartyCookie().getValue(this.buildKeyWithPublisher(n,"user-id"))},this.getTopMostWindow=function(){var t;try{if((t=e.top).TRC=t.TRC||{},t.TRC||(t=e),!TRCImpl||!TRCImpl.global||!TRCImpl.global["disable-strict-top-window-check"])var i=t.location}catch(i){t=e}return t},this.additionalDispatchParams=function(){return null==this.state.moreDispatchParams&&(this.state.moreDispatchParams=this.getCurrentURL().filtered),0==this.state.moreDispatchParams.length?"":"&"+this.state.moreDispatchParams.join("&")},this.getForceTrcCache=function(){return r},this.getCurrentURL=function(){var t=TRC.isAMP&&e.context&&e.context.canonicalUrl||e.location.href,i=new TRC.URL(t),n=[],o=[];i.search.replace(/^\?/,"").split(/&/).forEach(function(e){e&&(0==e.search("trc_")||"taboola-debug"==e?(r=new Boolean(e.match(/trc_cache/)).valueOf(),o.push(e)):n.push(e))}),i.search=n.length>0?"?"+n.join("&"):"";var a=new String(i.toString());return a.filtered=o,a},this.sessionStorageGetValue=function(e){var t=this.getLocalStorageImplementation("strict-w3c-storage","session");return t&&t.getValue(e)||null},this.sessionStorageSetValue=function(e,t){var i=this.getLocalStorageImplementation("strict-w3c-storage","session");i&&i.setValue(e,t)},this.initState=function(){void 0===this.state&&(this.state={}),this.state.privateStorageImpl=null,this.state.m_publisherDomains={host:[],path:[],query:[]},this.state.moreDispatchParams=null},this.getReferrer=function(){return TRC.PageReferrer.getReferrer()},this.updateReferrer=function(e){TRC.PageReferrer.updateReferrer(e)},this.initReferrer=function(e){TRC.PageReferrer.init(e)},this.pushState=function(){this.stateStack.push(this.state),delete this.state,this.initState()},this.popState=function(){this.stateStack.length>0&&(this.state=this.stateStack.pop())},this.initState(),this};h.getPageData=function(){return i.getPageData()},h.storeValue=function(e,t){return i.storeValue(e,t)},h.storePublisherValue=function(e,t,r){return i.storePublisherValue(e,t,r)},h.getValue=function(e){return i.getValue(e)},h.getPublisherValue=function(e,t){return i.getPublisherValue(e,t)},h.additionalDispatchParams=function(){return i.additionalDispatchParams()},h.getCurrentURL=function(){return i.getCurrentURL()},h.getPageSubDomain=function(){return i.getPageSubDomain()},h.pushState=function(){return i.pushState()},h.popState=function(){return i.popState()},TRC.pageManager=i=TRC.pageManager||new h,e.PageManager=e.PageManager||h}(window,document),function(){var e=function(){function e(){_classCallCheck(this,e),this.postData={}}return _createClass(e,[{key:"setFullItemList",value:function e(t){"object"===_typeof(t)?this.postData.fil=__trcJSONify(t):"string"==typeof t&&(this.postData.fil=t)}},{key:"setScreenHeight",value:function e(t){this.postData.sh=t}},{key:"setScreenWidth",value:function e(t){this.postData.sw=t}},{key:"setScreenDensity",value:function e(t){this.postData.sde=t}},{key:"setBrowserWidth",value:function e(t){this.postData.bw=t}},{key:"setBrowserHeight",value:function e(t){this.postData.bh=t}},{key:"setDocumentWidth",value:function e(t){this.postData.dw=t}},{key:"setDocumentHeight",value:function e(t){this.postData.dh=t}},{key:"setArticlePos",value:function e(t){this.postData.bad=t}},{key:"setContainerPos",value:function e(t){this.postData.cd=t}},{key:"setContainerWidth",value:function e(t){this.postData.mw=t}},{key:"getAll",value:function e(){return this.postData}}]),e}();TRC.PlacementEventPostData=e}(),function(e,t,i){var r=function e(t,i){var r=i.style,s=void 0===r?"":r,l=i.location,c=void 0===l?"beforeend":l;s&&TRC.dom.injectStyle(s),t.insertAdjacentHTML(c,n(i)),o(a(c,t))},n=function e(t){var i=t.markup,r=void 0===i?"":i,n=t.href,o=void 0===n?"#":n,a=t.enableScrolling,s=void 0===a?"no":a,l=t.classList,c=void 0===l?"":l,d=t.children,h=void 0===d?"":d,u=t.inlineStyle,p=void 0===u?"":u,m=t.wrapper,g='<a tblenablesscrolling="'.concat(s,'" href="').concat(o,'" \n                               class="').concat(c,'" style="').concat(p,'" rel="nofollow" target="_blank"\n                               >').concat(r).concat(h,"</a>");return m&&(g="<".concat(m.type,' class="').concat(m.className,'">').concat(g,"</").concat(m.type,">")),g},o=function e(t){TRC.Device.isTouchDevice||TRC.dom.isInIframe()||TRC.dom.on(t,"click",function(e){return TRC.aboutUs.open(e)||!1})},a=function e(t,i){switch(t){case"beforebegin":return i.previousElementSibling;case"afterbegin":return i.firstElementChild;case"beforeend":return i.lastElementChild;case"afterend":return i.nextElementSibling;default:return i.firstElementChild}};i.PopupLink={create:r}}(window,document,TRC),function(e,t){var i=TRC.PostRenderQueue=function(){return this.backend=[],this};i.prototype.pushBack=function(e,t){__trcDebug("postRenderQueue.pushBack("+e+")"),this.backend.push({name:e,func:t})},i.prototype.pushFront=function(e,t){__trcDebug("postRenderQueue.pushFront("+e+")"),this.backend.unshift({name:e,func:t})},i.prototype.popFront=function(){if(0==this.backend.length)return null;var e=this.backend.shift();return"function"==typeof e?{name:"unknown",func:e}:e}}(window,document),function(e,t){var i="tbl-forkorts-article",r=" ".concat(i," ").concat(i,"-active"),n="tbl-read-more-box-btn",o="tbl-read-more-button-arrow",a={de:"Weiterlesen",el:"%CE%94%CE%B9%CE%B1%CE%B2%CE%AC%CF%83%CF%84%CE%B5%20%CE%A0%CE%B5%CF%81%CE%B9%CF%83%CF%83%CF%8C%CF%84%CE%B5%CF%81%CE%B1",en:"Read%20More",es:"Leer%20M%C3%A1s",fr:"Lire%20La%20Suite",he:"%D7%A7%D7%A8%D7%90%20%D7%A2%D7%95%D7%93",hi:"%E0%A4%94%E0%A4%B0%20%E0%A4%AA%E0%A4%A2%E0%A4%BC%E0%A5%87%E0%A4%82",it:"Per%20saperne%20di%20pi%C3%B9",jp:"%E7%B6%9A%E3%81%8D%E3%82%92%E8%AA%AD%E3%82%80",ko:"%EC%9E%90%EC%84%B8%ED%9E%88%EB%B3%B4%EA%B8%B0",nl:"Lees%20Meer",pt:"Leia%20Mais",ru:"%D1%87%D0%B8%D1%82%D0%B0%D1%82%D1%8C%20%D0%B4%D0%B0%D0%BB%D0%B5%D0%B5",ta:"%E0%AE%AE%E0%AF%87%E0%AE%B2%E0%AF%81%E0%AE%AE%E0%AF%8D%20%E0%AE%AA%E0%AE%9F%E0%AE%BF%E0%AE%95%E0%AF%8D%E0%AE%95",th:"%E0%B8%AD%E0%B9%88%E0%B8%B2%E0%B8%99%E0%B9%80%E0%B8%9E%E0%B8%B4%E0%B9%88%E0%B8%A1%E0%B9%80%E0%B8%95%E0%B8%B4%E0%B8%A1"};function s(e,t,i){return i=i||"en",{caption:e&&e.caption||t&&t.caption||a[i]&&decodeURIComponent(a[i])||"Read More",boxSelector:e&&e.boxSelector||t&&t.boxSelector||null,threshold:e&&e.threshold||t&&t.threshold||1100,backgroundColor:e&&e.backgroundColor||t&&t.backgroundColor||"#fff",minimizedSize:e&&e.minimizedSize||t&&t.minimizedSize||800,scrollSize:e&&e.scrollSize||t&&t.scrollSize||800,buttonTop:e&&e.buttonTop||t&&t.buttonTop||48,buttonBottom:e&&e.buttonBottom||t&&t.buttonBottom||28,divTop:e&&e.divTop||t&&t.divTop||75,gradient:e&&e.gradient||t&&t.gradient||40,cutoffType:e&&e.cutoffType||t&&t.cutoffType||"ARTICLE",anchorSelector:e&&e.anchorSelector||t&&t.anchorSelector||null,lengthFromAnchorElementType:e&&e.lengthFromAnchorElementType||t&&t.lengthFromAnchorElementType||"BELOW",lengthFromAnchorElement:e&&e.lengthFromAnchorElement||t&&t.lengthFromAnchorElement||30}}function l(e){return".".concat(i," { max-height: inherit; } .").concat(i,".tbl-forkorts-article-active { max-height: ").concat(e.minimizedSize,"px; overflow: hidden; position: relative; }.tbl-read-more-box { position: absolute; z-index: 4; left: 0; right: 0; /* there's a small line between the start of the feed/widget aand you can see the content there. so i placed the gradient 2px lower. */ bottom: -2px; display: none; text-align: center; padding: ").concat(e.divTop,"px 12px 50px; background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05) 10%, ").concat(e.backgroundColor," 60%, ").concat(e.backgroundColor," 100%); } .tbl-read-more-box .tbl-read-more-btn { background: #F7F7F7; border: 1px solid #bebebe; border-radius: 24px; color: #5C5C5C; width: 130px; margin: -6px 0 40px 0; padding: 8px 20px 8px 25px; height: 30px; line-height: 14px; font-size: 14px; font-weight: 500; text-align: center; } .tbl-read-more-box .tbl-read-more-btn.tbl-rtl-read-more-btn { padding: 8px 25px 8px 20px; } .tbl-read-more-box .tbl-read-more-btn.tbl-rtl-read-more-btn .tbl-read-more-button-arrow { margin: 0 6px 0 0; } .tbl-read-more-box .tbl-read-more-btn .tbl-read-more-button-arrow { width: 8px; height: 8px; margin: 0 0 0 6px; } .tbl-read-more-box .tbl-read-more-btn:hover { cursor: pointer; text-decoration: none; background: #ececec; color: #5C5C5C; }.").concat(i,"-active .tbl-read-more-box { display: block; }")}function c(){return e.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop}function d(e){var r=t.querySelector(".".concat(i));e.preventDefault(),e.stopPropagation(),r.classList.remove("".concat(i,"-active")),r.style.maxHeight="",f.call(this,"clicked","true",null),TRC.EventsAPI.readmore("click",this.response&&this.response.trc),TRC.dispatch("readMoreClicked"),TRC.readMoreVisible=!1}function h(e,i){var r=t.createElement("div");return r.className="tbl-read-more-box",r.innerHTML='<a \n                            id="'.concat(n,"_").concat(i,'" \n                            class="tbl-read-more-btn ').concat("rtl"===TRCImpl.direction?"tbl-rtl-read-more-btn":"",'"\n                            href="#" \n                        > \n                            ').concat(e.caption,"\n                            ").concat(u(),"\n                        </a>"),r}function u(){return"\n            <svg class='".concat(o,'\' viewBox="0 0 8 6" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path \n                    d="M6.85381 0.203525L3.99181 3.06553L1.12981 0.203525C1.00407 0.0820867 0.835672 0.0148905 0.660874 0.0164095C0.486076 0.0179284 0.318868 0.088041 0.195262 0.211646C0.0716568 0.335252 0.00154415 0.50246 2.52017e-05 0.677258C-0.00149374 0.852056 0.0657025 1.02046 0.187141 1.14619L3.52047 4.47953C3.64549 4.60451 3.81503 4.67472 3.99181 4.67472C4.16858 4.67472 4.33812 4.60451 4.46314 4.47953L7.79647 1.14619C7.86015 1.08469 7.91094 1.01113 7.94588 0.929795C7.98081 0.848459 7.99921 0.760979 7.99997 0.67246C8.00074 0.58394 7.98388 0.496154 7.95036 0.414223C7.91683 0.332292 7.86733 0.257857 7.80474 0.195262C7.74214 0.132667 7.66771 0.083165 7.58578 0.0496444C7.50385 0.0161238 7.41606 -0.00074404 7.32754 2.51711e-05C7.23902 0.000794382 7.15154 0.0191852 7.0702 0.0541246C6.98887 0.0890639 6.91531 0.139852 6.85381 0.203525Z"\n                    fill="#BCBCBC"\n                />\n            </svg>\n        ')}function p(i,r){var n=i.context||r.context;"parent"===n&&(e=e.parent,t=e.parent.document),"top"===n&&(e=e.top,t=e.top.document)}function m(e,i){var r=i||"kortWidgetCssStyle",n=t.querySelector("#".concat(r));n&&n.parentNode.removeChild(n),(n=t.createElement("div")).id=r,n.innerHTML="&shy;<style>".concat(e,"</style>"),t.documentElement.appendChild(n)}function g(e,i,r){var n,o;if("PAGE_ELEMENT"===e.cutoffType&&(o=t.querySelector(e.anchorSelector))){var a=o.getBoundingClientRect(),s=i.getBoundingClientRect();"ABOVE"===e.lengthFromAnchorElementType?n=a.top-s.top-e.lengthFromAnchorElement:(n=a.bottom-s.top+e.lengthFromAnchorElement,n+=r.getBoundingClientRect().height)}return n}function f(e,t,i){if(TRC.util.isPercentEnabled(TRCImpl.global,"read-more-events-enabled")){var r={event_type:"read_more",event_state:e,event_value:t,event_msg:i};this.sendEvent("supply-feature",{d:JSON.stringify(r)},null)}}function v(o){var a;function u(o){try{var a=f.trcBind(o);TRC.tlf&&console.time("init Read More"),a("Available",!0,null);var u=s(o.readMorePageConfig,o.readMoreConfig,o.trc.language);if(p(o.readMorePageConfig,o.readMoreConfig),!e.matchMedia)return a("Rendered",!1,"match media is not supported"),!1;if(!u.boxSelector)return a("Rendered",!1,"no box selector defined"),!1;var v=t.querySelector(u.boxSelector);if(!v)return a("Rendered",!1,"box content not detected"),!1;if(t.querySelector(".".concat(i))===v)return a("Rendered",!1,"box content already in use"),!1;if(v.offsetHeight<u.threshold||c()>=u.scrollSize)return a("Rendered",!1,"dimensions exception"),!1;v.className+=r,m(l(u));var b=h(u,o.id);v.appendChild(b);var C=g(u,v,b);C&&(v.style.maxHeight="".concat(C,"px")),TRC.readMoreVisible=!0,TRC.dispatch("readMoreRendered"),TRC.EventsAPI.readmore("render",o.response&&o.response.trc),t.querySelector("#".concat(n,"_").concat(o.id)).addEventListener("click",d.trcBind(o),!1),a("Rendered",!0,null);var y={targetElement:b,onEnter:function e(){a("Visible",!0,null),TRC.intersections.unobserve(T)}},T=TRC.intersections.observe(y);return TRC.tlf&&console.timeEnd("init Read More"),!0}catch(e){return __trcError("Error read more init",e),!1}}u(o)||TRC.EventsAPI.readmore("none",o.response&&o.response.trc)}TRC.setReadMore=v}(window,document),TRC.ScriptRenderer={render:function e(t,i){t&&t.js?(t.normalizedTag=TRC.text.htmlUnescape(t.js),this.renderInIframe(this.createIframe(i.container),t)):__trcError("could not find script to render")},createIframe:function e(t){if(t){var i=document.createElement("iframe");return i.style.border=i.frameBorder=i.border="0",i.style.display="block",i.scrolling="no",t.appendChild(i),i}__trcError("could not find container to create Iframe within")},renderInIframe:function e(t,i){if(t){var r=t.contentWindow||t.contentDocument;r.document&&(r=r.document),this.setOuterIframeStyle(t,i),this.runTagInIframe(r,i.normalizedTag),this.resetStyleInIframe(r)}else __trcError("could not find iframe to render within")},setOuterIframeStyle:function e(t,i){t.style.width=i.w||"0px",t.style.height=i.h||"0px"},runTagInIframe:function e(t,i){void 0!==i&&null!==i?(t.open(),t.write(i),t.close()):__trcError("could not find normalizedTag to render")},resetStyleInIframe:function e(t){var i=t.createElement("style"),r="body { margin: 0px }";i.type="text/css",i.styleSheet?i.styleSheet.cssText=r:i.appendChild(t.createTextNode(r)),t.getElementsByTagName("head")[0].appendChild(i)}},function(e,t){TRC.SpotlightLoader={load:function(e){this.shouldLoad(e)&&(this.loadedScript?TRC.dispatch("trc_afterRboxDraw"):(__trcDebug("Detected Spotlight Administrator("+e.trc["pi"]+")"),TRC.backstageDomainPrefix=e.trc["bdp"],TRC.backstageDomainSuffix=e.trc["bds"],this.loadedScript=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",TRC.PROTOCOL),TRC.Manager.prototype.loadExternal(this.loadedScript,"js")))},shouldLoad:function(e){return!(!t.querySelectorAll||TRC.Device.isTouchDevice||!e||!e.trc||"1"!=e.trc["sl"])},registerOnMainContainer:function(e,t){e&&this.shouldLoad(t)&&e.setAttribute("data-spotlight-publisher-id",t.trc["pi"])}}}(window,document),function(){var e=!1,t={SHOW_ITEM:"tbl-show-item",NEXT_ITEM:"tbl-next-item",REMOVE_LEFT:"tbl-remove-item",REMOVE_RIGHT:"tbl-remove-item-to-right",IMAGE_HOLDER:"thumbBlock_holder",ZOOM_IN:TRC.Browser.ie?"":"tbl-zoom-in-item",PROGRESS_BAR_WRAPPER:"tbl-story-progressBar-wrp",PROGRESS_BAR_WRAPPER_TEXT_OVER:"tbl-story-progressBar-wrp-text-over",PROGRESS_BAR_OVERFLOW_WRAPPER:"tbl-story-progressBar-overflow-wrp",PROGRESS_BAR:"tbl-story-progressBar",PROGRESS_RUNNER:"tbl-progress-runner",PROGRESS_ANIM:"tbl-progress-anim",PREVENT_CLICK:"tbl-prevent-click-progressBar",ARROW_BUTTON:"tbl-arrow-btn",CLICKABLE_AREA:"tbl-clickable-area-btn"},i={SLIDE_OUT_LEFT:"tbl-animation-slide-out-left",SLIDE_OUT_RIGHT:"tbl-animation-slide-out-right",PROGRESS_BAR_ANIMATION:"tbl-animation-progress-bar"},r=".item-label-href",n="tbl-text-over-container",o="tbl-text-over",a="tbl-text-over-align",s="tbl-text-over-labels-left",l="tbl-text-over-labels-right",c=[i.SLIDE_OUT_LEFT,i.SLIDE_OUT_RIGHT],d=56,h=.15,u=100,p=function(){function r(t){var i=this;_classCallCheck(this,r),this.props=r.GetStoryWidgetProps(t),this.active=!1,this.finishFirstCycle=!1,this.browserWidth=TRC.dom.getWindowWidth(),this.internalc=t.internalContainer,this.mainContainer=t.container,this.rbox=t,this.setNumOfItems(t.responsiveRules),this.items=Array.prototype.slice.call(t.boxes,0,this.amountOfItems),this.intervalLength=this.props.storyInterval,this.debugWidget=-1!==window.location.search.indexOf("tbl-debug=true"),this.deviceType=TRC.Device.isTouchDevice?"touch-device":"desktop",this.calcImageHeight(),this.isEnableTextOver=t.trc.global["enable-text-over"],this.thumbnailPosition=t.getThumbnailPosition(),this.state={previousItem:null,showItem:this.items[0],showNextItem:this.items[1],activePB:null,previousPosition:null,currentPosition:0},!e&&r.setDefaultCss();var n=TRC.listen("trcContentReady",function(e){e.container===i.mainContainer&&i.init(n)})}return _createClass(r,[{key:"calcImageHeight",value:function e(){this.imageHeight=r.getOuter("height",this.items[0].querySelector(".".concat(t.IMAGE_HOLDER))),this.imageWidth=r.getOuter("width",this.items[0].querySelector(".".concat(t.IMAGE_HOLDER)))}},{key:"init",value:function e(t){var i=this;try{t.remove(),setTimeout(function(){i.container=i.mainContainer.querySelector(".trc_rbox_container"),TRC.dom.addClass(i.container,"story-widget ".concat(i.deviceType)),i.calcImageHeight(),i.buildStoryWidget(),i.setDynamicCss(),TRC.dispatch("widgetHeightReady")},0);var r={onEnter:this.startTheStory.trcBind(this),onExit:this.stopTheStory.trcBind(this),targetElement:this.internalc};TRC.intersections.observe(r)}catch(e){__trcError("error on reco reel initialisation",e)}}},{key:"buildStoryWidget",value:function e(){var i=this;if(this.rbox.trc.sendAbTestEvent("animated_story","available"),this.listenToAnimationEvents(),this.arrows=[],this.clickedAreas=[],this.progressBar=this.createProgressBar(),this.internalc.parentNode.appendChild(this.progressBar),this.allowRecalculateSize=!0,"desktop"===this.deviceType)this.arrows=this.createArrowBtns(),TRC.dom.on(this.internalc,"mouseover",this.playStateAnimation.trcBind(this,"paused")),TRC.dom.on(this.internalc,"mouseleave",this.playStateAnimation.trcBind(this,"running"));else{this.clickedAreas=this.createMobileClickedArea();var r=document.createElement("div");r.className=t.PREVENT_CLICK,this.progressBar.appendChild(r)}var n=this.calcCardHeight();this.responsiveAlignment(n),TRC.dom.on(window,"resize",TRC.util.debounce(function(){i.recalculateWidgetSize(n)},100,!1,this))}},{key:"recalculateWidgetSize",value:function e(t){t.item.style.removeProperty("top"),t.itemHeight=r.getOuter("height",t.item),this.responsiveAlignment(t)}},{key:"setNumOfItems",value:function e(t){var i=this,r=this.rbox.boxes.length;t?t.forEach(function(e){var t=e.min<i.browserWidth&&(i.browserWidth<e.max||void 0===e.max),n=e.rows*e.cells,o=n<=r;t&&(i.amountOfItems=o?n:r)}):this.amountOfItems=r}},{key:"setDynamicCss",value:function e(){var t="".concat(this.intervalLength,"s"),i="".concat(+this.intervalLength+.5,"s"),r="".concat(d),n=this.rbox.mode_name,o="touch-device"===this.deviceType?Math.round(.3*this.imageHeight):u,a="touch-device"===this.deviceType?Math.round(.15*this.imageHeight):0,s=this.imageHeight-u;TRC.dom.injectStyle(".story-widget.touch-device .".concat(n," .tbl-story-progressBar-overflow-wrp .tbl-prevent-click-progressBar { height: ").concat(a,"px; }.story-widget .").concat(n," { /*EVENTS*/ } .story-widget .").concat(n," .videoCube.tbl-show-item.tbl-zoom-in-item .thumbBlock_holder .thumbBlock { -webkit-animation: tbl-animation-zoom-In ").concat(i," ease-in; -moz-animation: tbl-animation-zoom-In ").concat(i," ease-in; -ms-animation: tbl-animation-zoom-In ").concat(i," ease-in; -o-animation: tbl-animation-zoom-In ").concat(i," ease-in; animation: tbl-animation-zoom-In ").concat(i," ease-in; } .story-widget .").concat(n," .tbl-story-progressBar-overflow-wrp { height: ").concat(o,"px; } .story-widget .").concat(n," .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { height: ").concat(o,"px; -webkit--webkit-transition: all 1s; -moz--webkit-transition: all 1s; -ms--webkit-transition: all 1s; -o--webkit-transition: all 1s; -webkit-transition: all 1s; } .story-widget .").concat(n," .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-progress-anim { -webkit-animation: tbl-animation-progress-bar ").concat(t," linear; -moz-animation: tbl-animation-progress-bar ").concat(t," linear; -ms-animation: tbl-animation-progress-bar ").concat(t," linear; -o-animation: tbl-animation-progress-bar ").concat(t," linear; animation: tbl-animation-progress-bar ").concat(t," linear; } .story-widget .").concat(n," .tbl-arrow-btn { height: ").concat(r,"px; width: ").concat(r,"px; } .story-widget .").concat(n," .tbl-clickable-area-btn { top: ").concat(a,"px; width: ").concat(r,"px; height: ").concat(this.imageHeight-a,"px; } .story-widget .").concat(n," .tbl-arrow-btn.tbl-arrow-left { left: ").concat(-1*r,"px; } .story-widget .").concat(n," .tbl-arrow-btn.tbl-arrow-right { right: ").concat(-1*r,"px; }"))}},{key:"listenToAnimationEvents",value:function e(){var t=this,i=TRC.dom.detectAnimationEvent(this.container,"end")||"animationend",r=TRC.dom.detectAnimationEvent(this.container,"start")||"animationstart";TRC.dom.on(this.container,r,function(e){return t.animationStartHandler(e)}),TRC.dom.on(this.container,i,function(e){return t.animationEndHandler(e)})}},{key:"listenToSwipeEvents",value:function e(t){var i=this,r={start:{screenX:0,screenY:0},end:{screenX:0,screenY:0}};TRC.dom.on(t,"touchstart",function(e){r.start={screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY}}),TRC.dom.on(t,"touchend",function(e){r.end={screenX:e.changedTouches[0].screenX,screenY:e.changedTouches[0].screenY},i.handleGesture(t,r)})}},{key:"handleGesture",value:function e(t,i){var r=i.start,n=i.end,o=t.getBoundingClientRect(),a=o.width,s=o.height,l=(n.screenX-r.screenX)/a,c=(n.screenY-r.screenY)/s,d=.25;return l>c&&l>d?this.arrowClicked("right",!0):l<c&&l<-d?this.arrowClicked("left",!0):void 0}},{key:"calcCardHeight",value:function e(){var i=this,n={itemHeight:0,item:null};return this.items.forEach(function(e,o){0===o&&(n.item=e);var a=e.querySelector(".thumbBlock_holder");a&&a.insertAdjacentHTML("afterbegin",'<div class="thumbBlock_placeholder">'.concat(r.addASvgPlaceHolder(),"</div>"));var s=r.getOuter("height",e);e.style.top=0,s>n.itemHeight&&(n={itemHeight:s,item:e}),"touch-device"===i.deviceType&&i.listenToSwipeEvents(e.querySelector(".".concat(t.IMAGE_HOLDER)))}),n}},{key:"responsiveAlignment",value:function e(t){var i=this,n=this.progressBar,o=this.arrows,a=this.clickedAreas;t.item.style.top=0,this.calcImageHeight(),t.itemHeight>0&&(this.internalc.style.height="".concat(t.itemHeight,"px"));var s=this.items[0],l=0;s&&s.pre_detail_order&&s.pre_detail_order.length>0&&(l+=r.getOuter("height",s.preLabelsBox));var c="".concat(this.imageHeight-u+l,"px");n.firstChild.style.top=0,n.style.top="touch-device"===this.deviceType?"".concat(l,"px"):c,o.forEach(function(e){e.style.top="".concat((i.imageHeight+l)/2-d/2,"px")}),a.forEach(function(e){e.style.width="".concat(i.imageWidth*h,"px")})}},{key:"playStateAnimation",value:function e(t){var i=this.state,r=i.activePB,n,o=i.showItem.querySelector(".thumbBlock"),a=r.firstChild;a&&(a.style.webkitAnimationPlayState=t,a.style.animationPlayState=t),o&&(o.style.webkitAnimationPlayState=t,o.style.animationPlayState=t)}},{key:"createProgressBar",value:function e(){var i=document.createElement("div");i.className=t.PROGRESS_BAR_OVERFLOW_WRAPPER;var r=document.createElement("div");return r.className=t.PROGRESS_BAR_WRAPPER,this.isEnableTextOver&&"under"===this.thumbnailPosition&&TRC.dom.addClass(r,t.PROGRESS_BAR_WRAPPER_TEXT_OVER),r.insertAdjacentHTML("afterbegin",this.createProgressUnits()),this.progressBars=Array.prototype.slice.call(r.childNodes),this.state.activePB=this.progressBars[0],i.appendChild(r),i}},{key:"createProgressUnits",value:function e(){for(var i="",r=0;this.amountOfItems>r;r++)i+='<div class="'.concat(t.PROGRESS_BAR,'" style="width: ').concat(100/this.amountOfItems-2,'%" data-progress-bar-index="').concat(r,'"><span class="').concat(t.PROGRESS_RUNNER,'"></span></div>');return"".concat(i)}},{key:"createArrowBtns",value:function e(){var i=this;return["left","right"].map(function(e){var n=document.createElement("div");return n.className="".concat(t.ARROW_BUTTON," tbl-arrow-").concat(e),n.insertAdjacentHTML("beforeend",r.addASvgArrow()),TRC.dom.on(n,"click",i.arrowClicked.trcBind(i)),i.internalc.parentNode.appendChild(n),n})}},{key:"createMobileClickedArea",value:function e(){var i=this;return["left","right"].map(function(e){var r=document.createElement("div");return r.className="".concat(t.CLICKABLE_AREA," tbl-clickable-area-").concat(e),TRC.dom.on(r,"click",i.arrowClicked.trcBind(i)),i.internalc.parentNode.appendChild(r),r})}},{key:"startTheStory",value:function e(){if(this.isImageHeightChanged()&&this.allowRecalculateSize){this.allowRecalculateSize=!1;var t=this.calcCardHeight();this.recalculateWidgetSize(t)}this.active=!0,this.restartAnimation()}},{key:"isImageHeightChanged",value:function e(){var t=this.imageHeight;return this.calcImageHeight(),t!==this.imageHeight}},{key:"stopTheStory",value:function e(){this.active=!1}},{key:"restartAnimation",value:function e(){var t=this;setTimeout(function(){t.updateItem(),t.updateCarouselIteration("left")})}},{key:"arrowClicked",value:function e(t,i){if(this.disableClickEvents)return!1;var n=r.resolveAnimationDirection(t,i);return TRCImpl.sendAbTestEvent("animated_story","click_".concat("left"===n?"right":"left")),this.updateIteration(n),!0}},{key:"updateIteration",value:function e(i){i=i||"left",this.debugWidget&&this.debugSlider();var r=1,n=this.state,o=n.showNextItem,a=n.currentPosition,s;"right"===i&&(TRC.dom.removeClass(o,t.NEXT_ITEM),a?(r=-1,s=a-1):s=r=this.amountOfItems-1,TRC.dom.addClass(this.items[s],t.NEXT_ITEM));var l=+a+r===this.amountOfItems?0:a+r;this.setState({showPosition:l,nextShowPosition:Number(l+1)===this.amountOfItems?0:l+1}),this.updateCarouselIteration(i)}},{key:"setState",value:function e(t){var i=t.showPosition,r=t.nextShowPosition,n=this.items[i],o=this.items[r],a=this.progressBars[i];return this.state={previousItem:this.state.showItem,showItem:n,showNextItem:o,activePB:a,previousPosition:this.state.currentPosition,currentPosition:i}}},{key:"isFirstIteration",value:function e(){return null===this.state.previousPosition}},{key:"updateCarouselIteration",value:function e(i){if(this.active){var r,n,o="left"===i?t.REMOVE_LEFT:t.REMOVE_RIGHT,a=this.state.previousPosition;!this.isFirstIteration()&&this.slideAnimation(o),this.updateProgressBar(),this.progressBars.length-1===a&&(this.finishFirstCycle=!0)}}},{key:"debugSlider",value:function e(){var i={},r=["SHOW_ITEM","NEXT_ITEM","REMOVE_LEFT","REMOVE_RIGHT","ZOOM_IN"];this.items.forEach(function(e,n){i["item_".concat(n)]={},Object.keys(t).forEach(function(o){r.includes(o)&&(i["item_".concat(n)][o]=e.classList.contains(t[o])?"X":null)})}),console.log("%c card ".concat(this.container.dataset.cardIndex),"background: #5".concat(10*this.container.dataset.cardIndex,"; color: white")),console.table(i)}},{key:"slideAnimation",value:function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.REMOVE_LEFT,r=this.state.previousPosition,n=this.items[r];TRC.dom.addClass(n,i)}},{key:"updateProgressBar",value:function e(){var i=this.state,r=i.activePB,n=i.currentPosition,o=i.previousPosition;this.isFirstIteration()||TRC.dom.removeClass(this.progressBars[o].firstChild,t.PROGRESS_ANIM),TRC.dom.addClass(r.firstChild,t.PROGRESS_ANIM),this.progressBars.forEach(function(e,t){e.firstChild.style.left=n>t?"0":"-100%"})}},{key:"updateItem",value:function e(){var i=this.state,r=i.showItem,n=i.showNextItem,o=i.currentPosition;this.clearThePreviousItem(),document.querySelector(".".concat(t.SHOW_ITEM))&&this.clearAll(),TRC.dom.addClass(r,"".concat(t.SHOW_ITEM," ").concat(t.ZOOM_IN)),TRC.dom.removeClass(r,t.NEXT_ITEM),TRC.dom.addClass(n,t.NEXT_ITEM),this.finishFirstCycle||TRCImpl.sendAbTestEvent("animated_story","Visible_".concat(o+1))}},{key:"clearThePreviousItem",value:function e(){var t=this.state.previousItem;return!!this.state.previousItem&&(r.clearClassNames(t),!0)}},{key:"clearAll",value:function e(){this.items.forEach(function(e){return r.clearClassNames(e),!0})}},{key:"animationStartHandler",value:function e(t){-1!==c.indexOf(t.animationName)&&(this.disableClickEvents=!0)}},{key:"animationEndHandler",value:function e(t){t.animationName===i.PROGRESS_BAR_ANIMATION&&(this.disableClickEvents=!1,this.updateIteration()),-1!==c.indexOf(t.animationName)&&(this.disableClickEvents=!1,this.updateItem())}}],[{key:"shouldInitStoryWidget",value:function e(t){return!0===t.trc.getProperty(t.mode_name,"storyWidget",t.propertiesOverride)}},{key:"GetStoryWidgetProps",value:function e(t){return{storyInterval:t.trc.getProperty(t.mode_name,"storyWidget-story-interval",t.propertiesOverride)||7}}},{key:"setTextOverForStoryWidget",value:function e(t,i){var r=document.createElement("span"),a=this.getDirection(t);TRC.dom.addClass(r,o),i.link.appendChild(r),TRC.dom.addClass(i.link,n),this.alignLabelsBox(i,a),this.addArrowIcon(i.link,a)}},{key:"getConsts",value:function e(){return{CSS_CLASSES:t,CSS_ANIMATION:i,SLIDE_EVENTS:c,ARROW_SIZE:d,PROGRESS_BAR_HEIGHT:u}}},{key:"setDefaultCss",value:function t(){e=!0,TRC.dom.injectStyle("div.story-widget { position: relative; /*DEFAULTS */ /*EVENTS*/ /*PROGRESS BAR */ /*ARROWS */ } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow { position: absolute; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-align { width: 91%; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-labels-right { right: 0; left: auto; } div.story-widget .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-labels-left { left: 0; right: auto; } div.story-widget.touch-device .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { position: absolute; width: 100%; font-size: 0; background: -webkit-linear-gradient(top, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); background: -webkit-gradient(linear, left top, left bottom, from(rgba(1, 0, 0, 0.8)), to(rgba(0, 0, 0, 0))); background: -o-linear-gradient(top, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); background: linear-gradient(to bottom, rgba(1, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%); } div.story-widget.touch-device .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar { top: 5px; height: 2px; } div.story-widget.touch-device .tbl-story-progressBar-overflow-wrp .tbl-prevent-click-progressBar { pointer-events: auto; } div.story-widget.touch-device .videoCube.thumbnail_under .tbl-text-over-container .video-label-box.tbl-text-over-align { bottom: 0; } div.story-widget.touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow { bottom: 10px; } div.story-widget.touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow-right { right: 3%; } div.story-widget.touch-device .videoCube.thumbnail_under .tbl-text-over-container .tbl-labels-arrow-left { left: 3%; } div.story-widget.desktop:hover .tbl-arrow-btn.tbl-arrow-left { left: 0; } div.story-widget.desktop:hover .tbl-arrow-btn.tbl-arrow-right { right: 0; } div.story-widget.desktop:hover .tbl-story-progressBar-wrp { opacity: 0; transform: translateY(100px); } div.story-widget.desktop:hover .tbl-story-progressBar-wrp-text-over { opacity: 1; transform: none; } div.story-widget.desktop .tbl-text-over-container .video-label-box.tbl-text-over-align { bottom: 15px; } div.story-widget.desktop .tbl-text-over-container .tbl-labels-arrow { bottom: 20px; } div.story-widget.desktop .tbl-text-over-container .tbl-labels-arrow-right { right: 4%; } div.story-widget.desktop .tbl-text-over-container .tbl-labels-arrow-left { left: 4%; } div.story-widget .trc_rbox_outer { margin: 0; } div.story-widget .trc_rbox_outer .trc_rbox_div { overflow: hidden; } div.story-widget .trc_rbox_outer .videoCube { position: absolute; width: 100%; margin: 0; bottom: 0; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder { overflow: hidden; z-index: -1; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock_placeholder { background-color: #aeaeae; position: absolute; top: 0; left: 0; width: 100%; height: 100%; } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock_placeholder svg { width: 100px; height: 100px; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); } div.story-widget .trc_rbox_outer .videoCube .thumbBlock_holder .thumbBlock { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } div.story-widget .trc_rbox_outer .videoCube .video-label-box { z-index: -1; opacity: 0; } div.story-widget .trc_rbox_outer .videoCube .item-label-href.tbl-text-over-container { z-index: -1; opacity: 0; } div.story-widget .trc_rbox_outer .videoCube .item-label-href.tbl-text-over-container .video-label-box { z-index: auto; opacity: 1; } div.story-widget .videoCube.tbl-show-item { z-index: 1; } div.story-widget .videoCube.tbl-show-item .thumbBlock_holder { z-index: 1; } div.story-widget .videoCube.tbl-show-item .video-label-box { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .item-label-href.tbl-text-over-container { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .item-label-href.tbl-text-over-container .video-label-box { animation: none; z-index: auto; } div.story-widget .videoCube.tbl-show-item .tbl-labels-arrow-right { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-show-item .tbl-labels-arrow-left { z-index: 1; -webkit-animation: tbl-animation-fade-in 1s; -moz-animation: tbl-animation-fade-in 1s; -ms-animation: tbl-animation-fade-in 1s; -o-animation: tbl-animation-fade-in 1s; animation: tbl-animation-fade-in 1s; -webkit-animation-fill-mode: forwards; -moz-animation-fill-mode: forwards; -ms-animation-fill-mode: forwards; -o-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .videoCube.tbl-remove-item .thumbBlock_holder { -webkit-animation: tbl-animation-slide-out-left 0.75s; -moz-animation: tbl-animation-slide-out-left 0.75s; -ms-animation: tbl-animation-slide-out-left 0.75s; -o-animation: tbl-animation-slide-out-left 0.75s; animation: tbl-animation-slide-out-left 0.75s; } div.story-widget .videoCube.tbl-remove-item .video-label-box { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .item-label-href.tbl-text-over-container { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .item-label-href.tbl-text-over-container .video-label-box { animation: none; } div.story-widget .videoCube.tbl-remove-item .tbl-labels-arrow-right { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item .tbl-labels-arrow-left { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .thumbBlock_holder { -webkit-animation: tbl-animation-slide-out-right 0.75s; animation: tbl-animation-slide-out-right 0.75s; } div.story-widget .videoCube.tbl-remove-item-to-right .video-label-box { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .item-label-href.tbl-text-over-container { -webkit-animation: tbl-animation-fade-out 1s; -moz-animation: tbl-animation-fade-out 1s; -ms-animation: tbl-animation-fade-out 1s; -o-animation: tbl-animation-fade-out 1s; animation: tbl-animation-fade-out 1s; opacity: 0; } div.story-widget .videoCube.tbl-remove-item-to-right .item-label-href.tbl-text-over-container .video-label-box { animation: none; } div.story-widget .videoCube.tbl-next-item .video-label-box { opacity: 0; } div.story-widget .videoCube.tbl-next-item .item-label-href.tbl-text-over-container { opacity: 0; } div.story-widget .videoCube.tbl-next-item .item-label-href.tbl-text-over-container .video-label-box { opacity: 0; } div.story-widget .videoCube.tbl-next-item .thumbBlock_holder { z-index: 0; } div.story-widget .tbl-story-progressBar-overflow-wrp { z-index: 9; position: absolute; pointer-events: none; overflow: hidden; width: 100%; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp { direction: ltr; width: 100%; box-sizing: border-box; position: absolute; padding: 0 4%; background: -webkit-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 0, 0, 0)), to(rgba(1, 0, 0, 0.8))); background: -o-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(1, 0, 0, 0.8) 100%); opacity: 1; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar { position: relative; top: 85px; display: inline-block; vertical-align: top; /* set bars to the absolute top container when using inline block */ width: 23%; height: 3px; background-color: rgba(255, 255, 255, 0.4); margin: 0 1%; overflow: hidden; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar span.tbl-progress-runner { width: 100%; height: 100%; position: absolute; left: 0; overflow: hidden; display: block; background-color: #fcfcfc; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp .tbl-story-progressBar .tbl-progress-anim { -webkit-animation-fill-mode: forwards; animation-fill-mode: forwards; } div.story-widget .tbl-story-progressBar-overflow-wrp .tbl-story-progressBar-wrp-text-over { padding: 0 3%; background: none; } div.story-widget .tbl-arrow-btn { position: absolute; background-color: rgba(0, 0, 0, 0.419608); z-index: 2; font-size: 40px; text-align: center; color: #ffffff; cursor: pointer; line-height: 0; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; -webkit-transition: left 1s, right 1s; -moz-transition: left 1s, right 1s; -ms-transition: left 1s, right 1s; -o-transition: left 1s, right 1s; transition: left 1s, right 1s; } div.story-widget .tbl-arrow-btn svg { transform: translateY(50%); } div.story-widget .tbl-arrow-btn.tbl-arrow-left { -webkit-transform: scaleX(-1); -moz-transform: scaleX(-1); -ms-transform: scaleX(-1); -o-transform: scaleX(-1); transform: scaleX(-1); } div.story-widget .tbl-clickable-area-btn { position: absolute; z-index: 2; height: 100%; } div.story-widget .tbl-clickable-area-btn.tbl-clickable-area-left { left: 0; } div.story-widget .tbl-clickable-area-btn.tbl-clickable-area-right { right: 0; }@-webkit-keyframes tbl-animation-slide-out-left { 0% { left: 0; } 100% { left: -100%; } }@keyframes tbl-animation-slide-out-left { 0% { left: 0; } 100% { left: -100%; } }@-webkit-keyframes tbl-animation-slide-out-right { 0% { right: 0; } 100% { right: -100%; } }@keyframes tbl-animation-slide-out-right { 0% { right: 0; } 100% { right: -100%; } }@-webkit-keyframes tbl-animation-fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }@keyframes tbl-animation-fade-in { 0% { opacity: 0; } 100% { opacity: 1; } }@-webkit-keyframes tbl-animation-fade-out { 0% { opacity: 1; } 100% { opacity: 0; } }@keyframes tbl-animation-fade-out { 0% { opacity: 1; } 100% { opacity: 0; } }@-webkit-keyframes tbl-animation-zoom-In { 0% { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } 100% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } }@keyframes tbl-animation-zoom-In { 0% { -webkit-transform: scale(1.00); -moz-transform: scale(1.00); -ms-transform: scale(1.00); -o-transform: scale(1.00); transform: scale(1.00); } 100% { -webkit-transform: scale(1.1); -moz-transform: scale(1.1); -ms-transform: scale(1.1); -o-transform: scale(1.1); transform: scale(1.1); } }@-webkit-keyframes tbl-animation-progress-bar { 0% { -webkit-transform: translateX(0); -moz-transform: translateX(0); -ms-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } 100% { -webkit-transform: translateX(100%); -moz-transform: translateX(100%); -ms-transform: translateX(100%); -o-transform: translateX(100%); transform: translateX(100%); } }@keyframes tbl-animation-progress-bar { 0% { -webkit-transform: translateX(0); -moz-transform: translateX(0); -ms-transform: translateX(0); -o-transform: translateX(0); transform: translateX(0); } 100% { -webkit-transform: translateX(100%); -moz-transform: translateX(100%); -ms-transform: translateX(100%); -o-transform: translateX(100%); transform: translateX(100%); } }")}},{key:"getOuter",value:function e(t,i){return i&&i.getBoundingClientRect()[t]}},{key:"addASvgArrow",value:function e(){return'<svg width="17px" height="29px" viewBox="0 0 17 29" version="1.1" xmlns="http://www.w3.org/2000/svg">\n                       <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                           <g id="Desktop-4-cards" transform="translate(-1073.000000, -436.000000)" fill="#FFFDFD" fill-rule="nonzero">\n                               <g id="Group" transform="translate(1081.500000, 450.500000) scale(-1, 1) translate(-1081.500000, -450.500000) translate(1073.000000, 436.000000)">\n                                   <polygon id="Rectangle-5" transform="translate(8.294336, 8.495231) rotate(45.000000) translate(-8.294336, -8.495231) " points="7.05498966 -1.37457069 9.68971053 -1.39537442 9.53368258 18.3650322 6.8989617 18.3858359"></polygon>\n                                   <polygon id="Rectangle-5" transform="translate(8.294336, 20.257858) scale(1, -1) rotate(45.000000) translate(-8.294336, -20.257858) " points="7.05498966 10.3880565 9.68971053 10.3672528 9.53368258 30.1276594 6.8989617 30.1484631"></polygon>\n                               </g>\n\'\n                           </g>\n\'\n                       </g>\n\'\n                   </svg>'}},{key:"addASvgPlaceHolder",value:function e(){return'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"\n                    viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">\n                     <rect fill="none" stroke="#fff" stroke-width="4" x="25" y="25" width="50" height="50">\n                    <animateTransform\n                       attributeName="transform"\n                       dur="0.5s"\n                       from="0 50 50"\n                       to="180 50 50"\n                       type="rotate"\n                       id="strokeBox"\n                       attributeType="XML"\n                       begin="rectBox.end"/>\n                    </rect>\n                     <rect x="27" y="27" fill="#fff" width="46" height="50">\n                    <animate\n                       attributeName="height"\n                       dur="1.3s"\n                       attributeType="XML"\n                       from="50" \n                       to="0"\n                       id="rectBox" \n                       fill="freeze"\n                       begin="0s;strokeBox.end"/>\n                    </rect>\n                  </svg>'}},{key:"addArrowIcon",value:function e(t,i){var r;r="ltr"===i?'<div class="tbl-labels-arrow tbl-labels-arrow-right">\n                          <?xml version="1.0" encoding="UTF-8"?>\n                          <svg width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                          <title>Group 3</title>\n                          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">\n                          <g id="Mobile-SC-CTA" transform="translate(-320.000000, -479.000000)" stroke="#FFFFFF">\n                          <g id="Group-3" transform="translate(321.000000, 480.000000)">\n                          <polyline id="Path" points="8.2173913 5.47826087 13.6956522 10.0434783 8.2173913 14.6086957"></polyline>\n                          <circle id="Oval" cx="10.5" cy="10.5" r="10.5"></circle>\n                          </g>\n                          </g>\n                          </g>\n                          </svg>\n                        </div>':'<div class="tbl-labels-arrow tbl-labels-arrow-left">\n                    <?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\n                    <svg width="23px" height="23px"\n                         viewBox="0 0 23 23"\n                         version="1.1"\n                         xmlns="http://www.w3.org/2000/svg"\n                         xmlns:xlink="http://www.w3.org/1999/xlink">\n                      <title id="title37">Group 3</title>\n                      <desc id="desc39">Created with Sketch.</desc>\n                      <g transform="rotate(180,11.5,11.5)"\n                         stroke-linejoin="round"\n                         stroke-linecap="round"\n                         fill-rule="evenodd"\n                         fill="none"\n                         stroke-width="1"\n                         stroke="none"\n                         id="Page-1">\n                        <g stroke="#ffffff" transform="translate(-320,-479)" id="Mobile-SC-CTA">\n                          <g transform="translate(321,480)" id="Group-3">\n                            <polyline points="8.2173913 5.47826087 13.6956522 10.0434783 8.2173913 14.6086957" id="Path" />\n                            <circle r="10.5" cy="10.5" cx="10.5" id="Oval" />\n                          </g>\n                        </g>\n                      </g>\n                    </svg>\n                    </div>',t.insertAdjacentHTML("beforeend",r)}},{key:"getDirection",value:function e(t){var i=t.trc.getProperty(t.mode_name,"direction",t.propertiesOverride);return TRC.direction||i||"ltr"}},{key:"alignLabelsBox",value:function e(t,i){var r="rtl"===i?l:s;TRC.dom.addClass(t.labelsBox,a),TRC.dom.addClass(t.labelsBox,r)}},{key:"resolveAnimationDirection",value:function e(i,r){var n;return n=r?i:TRC.dom.containsClass(i.currentTarget,t.ARROW_BUTTON)?TRC.dom.containsClass(i.currentTarget,"tbl-arrow-left")?"right":"left":TRC.dom.containsClass(i.currentTarget,t.CLICKABLE_AREA)&&TRC.dom.containsClass(i.currentTarget,"tbl-clickable-area-left")?"right":"left"}},{key:"clearClassNames",value:function e(i){TRC.dom.removeClass(i,t.SHOW_ITEM),TRC.dom.removeClass(i,t.REMOVE_LEFT),TRC.dom.removeClass(i,t.REMOVE_RIGHT),t.ZOOM_IN&&TRC.dom.removeClass(i,t.ZOOM_IN)}}]),r}();TRC.StoryWidget=p}(),function(){var e=TRC.taboolaConnect={},t=!1,i={},r=!!(TRC&&TRC.mobile&&TRC.mobile.reportClick),n="dynamic-content-loader";function o(e,t){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}function a(e,t){"available"===t&&TRC.dispatch("available::"+e.placementName,{container:e.container}),"click"===t&&TRC.dispatch("click::"+e.placementName)}function s(e,t,i){var r=t.config["max-height"]&&parseInt(t.config["max-height"]);r&&parseInt(i.height)>r&&(i.height=r),e.height=e.style.height=parseInt(i.height)+"px"}e.createIframe=function(t,n,a,s,l,c){if(t){var d=a||{},h=Math.floor(2147483648*Math.random()).toString(36),u=document.createElement("iframe");return d.attributes&&o(d.attributes,u),u.style.border=u.frameBorder=u.border="0",u.style.display="block",u.style.height=parseInt(a.height)?parseInt(a.height)+"px":"0px",u.style.width="100%",u.scrolling="no",u.sandbox=d.sandbox||"allow-same-origin allow-scripts allow-popups allow-forms",d.fifr?e.lazyLoadDynamicContentLoader(u):(n=addHashParam(n,"tbcId",h),n=addHashParam(n,"lang",c||window.navigator.language),r&&(n=addHashParam(n,"isMobileSDK",""+r)),u.src=n),i[h]={origin:s,placementName:l,frame:u,config:a,container:t},t.innerHTML="",t.appendChild(u),u}__trcError("could not find container to create Iframe within")},e.lazyLoadDynamicContentLoader=function(e){TRC.ModuleLoader.load(n,TRC.dcl,function(){var t=e.contentWindow||e.contentDocument;t&&(t.document.open(),t.document.write(TRC.dcl),t.document.close())}.trcBind(e))},e.receiveMessage=function(e,t){var r=t.data,n;r&&i[r.id]&&((void 0===e.origin?i[r.id].origin:e.origin)===t.origin&&this[r.action]&&this[r.action](r.payload?r.payload:{sizeObject:r.sizeObject},i[r.id]))},e.openInIframe=function(t,i){var r=i.frame,n=i.container,o=t.iframeArgs,a={isSmallIOS:function(){return TRCImpl["small-ios-device"].indexOf(TRC.Device.deviceType)>=0},getPublisherBrandingName:function(){return o.publisherName},trc:TRCImpl},s={title:o.title,url:o.logger_url,logger_url:o.logger_url};new TRC.FeedView(a,s,n),e.postMessage(r,{action:"openInIframe",message:"openInIframe done",dimension:{height:r.style.height}},"*")},addHashParam=function(e,t,i){var r,n=t+"="+i;if(e.indexOf("#")>0){var o=e.slice(-1);return e+(n="&"===o||"#"===o?n:"&"+n)}return e+"#"+n},e.getOrigin=function(e){return e.match(/^(https:|http:)?\/\/[^/]+/i)[0]},e.postMessage=function(e,t,i){e.contentWindow.postMessage(t,i)},e.rendered=function(t,i){var r=i.frame,n=i.container,o;s(r,i,t.sizeObject),n.className+=" tbl-feed-card",a(i,"available");var l={action:"rendered",message:"rendered done",dimension:{height:r.style.height}},c=TRCImpl.global["start-magazine-url"];c&&i.origin===c&&(l.publisherId=TRC.publisherId,l.placementName=i.placementName),e.postMessage(r,l,"*")},e.expand=function(t,i){var r=i.frame,n;s(r,i,t.sizeObject),e.postMessage(r,{action:"expand",message:"expand done",dimension:{height:r.style.height}},"*")},e.click=function(t,i){var r=i.frame,n=t.sizeObject;n&&s(r,i,n),a(i,"click"),e.postMessage(r,{action:"click",message:"click done",dimension:{height:r.style.height}},"*"),TRC.mobile&&TRC.mobile.reportClick&&TRC.mobile.reportClick(t.sizeObject)},e.collapse=function(t,i){var r=i.frame,n;s(r,i,t.sizeObject),e.postMessage(r,{action:"collapse",message:"collapse done",dimension:{height:r.style.height}},"*")},e.maxHeight=function(t,i){var r=i.frame,n=i.config["max-height"]?i.config["max-height"]:"";e.postMessage(r,{action:"maxHeight",message:n,dimension:{height:r.style.height}},"*")},e.createCard=function(e,i,r,n,o){if(!r.fifr){var a=this.getOrigin(r.origin||i);if(!a)return void __trcError("non valid origin for third party card")}t||(window.addEventListener("message",this.receiveMessage.bind(this,r),!1),t=!0),this.createIframe(e,i,r,a,n,o)},e.error=function(e){__trcWarn("External error report to taboola-connect: "+e)},window._trcIsUTactive&&(TRC.taboolaConnect.addHashParam=addHashParam)}();var TasksExecutorQueue=function(){function e(){_classCallCheck(this,e),this.tasks=[],this.runningTask=null}return _createClass(e,[{key:"add",value:function e(t){return this.tasks.push(t),1===this.tasks.length&&this.callNext(),this}},{key:"callNext",value:function e(){var t=this;if(this.tasks.length)if("function"==typeof this.tasks[0]){var i=_slicedToArray(this.tasks,1);this.runningTask=i[0];var r=!1,n=function e(){r||(r=!0,t.tasks.shift(),t.callNext())};this.runningTask.cancel=function(){r=!0},this.runningTask(n)}else this.tasks.shift(),this.callNext()}},{key:"resetQueue",value:function e(){this.runningTask.cancel(),this.tasks=[]}}]),e}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,i,r){var n=_superPropBase(t,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(r):o.value}})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _get(e,t,i){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function e(t,i,r){var n=_superPropBase(t,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(r):o.value}})(e,t,i||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function e(t,i){return t.__proto__=i,t})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}TRC.TasksExecutorQueue=TasksExecutorQueue,window,document,TRC.text={replaceAll:function e(t,i,r,n){var o;return void 0!==i&&void 0!==r&&i!==r?(o=new RegExp(i,"gi"),t.replace(o,"function"==typeof r&&"object"===_typeof(n)?r.trcBind(n):r)):t},lsplit:function e(t,i,r){var n=t.split(i);return n.slice(0,r-1).concat(n.length>=r?n.slice(r-1).join(i):[])},parseCSV:function e(t){for(var i=t.split(","),r=[];i.length;){var n=i.shift();if('"'===n[0]){do{if('"'===n.slice(1).replace(/""/g,"").slice(-1))break;n+=",".concat(i.shift())}while(i.length);r.push(n.slice(1,n.length-1).replace(/""/g,'"'))}else r.push(n)}return r},toStringList:function e(t){if(!t)return[];if(!(t instanceof Array))return["".concat(t)];var i=[];return t.forEach(function(e){e&&i.push("".concat(e))}),i},htmlUnescape:function e(t){return String(t).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},encodeHTML:function e(t){return"string"==typeof t&&t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},toLowerCamelCase:function e(t){if(-1===t.indexOf("-"))return t;var i=t.toLowerCase().split("-").map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join("");return i.charAt(0).toLowerCase()+i.substr(1)},splitAndJoin:function e(t,i){var r=t.split(".");return r=(r=r.map(function(e){return i(e)})).join(".")}},function(){var e=!1,t={POSITION:{SPONSORED:"syndicated-static-text-position",ORGANIC:"organic-static-text-position",EMBLEM:"emblem-position"},TEXT:{SPONSORED:"syndicated-static-text",ORGANIC:"organic-static-text"},SHOW_ORGANIC_FIXED_LABEL:"organic-show-static-text",EMBLEM:"emblem"},i="thumbnail-emblem",r="static-text",n="tbl-fixed-label",o="tbl-big-label",a="tbl-small-label",s=function(){function s(e,i,r){_classCallCheck(this,s);var n=r.categoryCard,o=r.recommendationList,a=r.add_span,l=i?"SPONSORED":"ORGANIC";if(this.categoryCard=n,this.getModeClientProperty=r.getModeClientProperty.trcBind(r),this.size=o&&o.length,this.addSpan=a,this.emblemSrc=this.getModeClientProperty(t.EMBLEM),this.fixedLabelPosition=this.getFixedLabelPosition(i,t.POSITION[l]),this.fixedLabelText=this.getModeClientProperty(t.TEXT[l]),this.emblemSrc&&"null"!==this.emblemSrc&&(s.setCss(),this.emblemPosition=this.getModeClientProperty(t.POSITION.EMBLEM)||"top-left",this.addEmblem(e,l)),!this.emblemRenderd||this.isEmblemAndTextNotOnSamePosition()){if(this.categoryCard&&this.categoryCard.isCategoryCard&&!this.categoryCard.render)return;this.addFixedLabel(e,i)}}return _createClass(s,[{key:"isEmblemAndTextNotOnSamePosition",value:function e(){return this.emblemRenderd&&this.fixedLabelPosition!==this.emblemPosition}},{key:"addEmblem",value:function e(t){this.emblemRenderd=!0;var r=this.addSpan(i,null,t);r.style.backgroundImage="url('".concat(this.emblemSrc,"')"),TRC.dom.addClass(r,this.emblemPosition)}},{key:"addFixedLabel",value:function e(i,l){var c=[r],d=document.createElement("span");if(!l){var h;if(!this.getModeClientProperty(t.SHOW_ORGANIC_FIXED_LABEL))return;c.push(n),c.push(1===this.size?o:a),this.categoryCard&&this.categoryCard.render&&(this.fixedLabelText=this.categoryCard.text)}s.setCss(),c.push(this.fixedLabelPosition),d.className=c.join(" "),this.fixedLabelText&&d.appendChild(document.createTextNode(this.fixedLabelText)),i.appendChild(d)}},{key:"getFixedLabelPosition",value:function e(t,i){var r=t?"top-right":"bottom-left";return this.getModeClientProperty(i)||r}}],[{key:"setCss",value:function t(){e||(e=!0,TRC.dom.injectStyle(".thumbnail-emblem { height: 35px; width: 35px; }.trc_related_container .thumbnail-emblem.bottom-right, .trc_related_container .static-text.bottom-right { bottom: 0; right: 0; background-position: bottom; }.trc_related_container .thumbnail-emblem.top-right, .trc_related_container .static-text.top-right { top: 0; right: 0; background-position: top; }.trc_related_container .thumbnail-emblem.bottom-left, .trc_related_container .static-text.bottom-left { bottom: 0; left: 0; background-position: bottom; }.trc_related_container .thumbnail-emblem.top-left, .trc_related_container .static-text.top-left { top: 0; left: 0; background-position: top; }.trc_related_container .thumbnail-emblem.top, .trc_related_container .static-text.top { width: 100%; top: 0; }.trc_related_container .thumbnail-emblem.bottom, .trc_related_container .static-text.bottom { width: 100%; bottom: 0; padding: 2px 0; }.trc_related_container .videoCube .thumbBlock .static-text { position: absolute; z-index: 1; margin: 0; padding: 5px; display: block; opacity: 0.7; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label { opacity: 1; padding: 0 5px; text-align: center; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label.tbl-small-label { min-width: 107px; min-height: 27px; line-height: 27px; letter-spacing: 0.31px; } .trc_related_container .videoCube .thumbBlock .static-text.tbl-fixed-label.tbl-big-label { min-width: 140px; min-height: 33px; font-size: 14px; line-height: 33px; letter-spacing: 0.39px; }.trc_related_container .thumbnail-emblem { background-position-x: center; }"))}}]),s}();TRC.ThumbnailOverlayComponents=s}(),function(e){var t="tn_t_on",i=TRC.pageManager.getLocalStorageImplementation("strict-w3c-storage","session"),r=TRC.taboolaNews&&TRC.taboolaNews.timeOn,n=!1;if(!r&&i)try{r=JSON.parse(i.getValue(t)),n=!0}catch(e){__trcError("Error occurred while trying to read Taboola News data from SessionStorage but object data was corrupted.")}if(r){!n&&i&&i.setValue(t,JSON.stringify(r));var o=l(),a=-1,s=0;TRC.docVisibilityUtil.addEventListener(c)}function l(){var t=(new Date).getTime();if(!TRC.isAMP)return e.performance&&e.performance.timing&&e.performance.timing.navigationStart||t;try{var i=JSON.parse(e.context.ca).attributes._context.initialIntersection.time||t;return new Date(e.context.startTime-i)}catch(e){return t}}function c(e){e?o=(new Date).getTime():(a=(new Date).getTime(),s+=1,TRCImpl.sendAbTestEvent&&TRCImpl.sendAbTestEvent("taboola_news_timeon","".concat(s.toString(),"::").concat((a-o).toString()),null,!0))}}(window),function(){function e(e,t){var r=document.createElement("span");a(r,"span");for(var n=0;n<t.length;n++){var o=i(t[n],e);r.appendChild(o)}e.appendChild(r)}function t(e,t){var i;if(e&&e.contentDocument&&t)return(i=e.contentDocument.querySelector(".moat_trackable")).moatObject={adElement:t,adLoaded:1,creativeType:"banner",versions:"1"},i;__trcError("Error occurred while trying to prepare trackable object for MOAT")}function i(e,i){var n=document.createElement("iframe");return a(n,"iFrame"),e&&i?(e.tag&&e.trackableObject?(n.src="javascript:'<html><head></head><body>"+e.tag+e.trackableObject+"</body></html>'",TRC.dom.on(n,"load",function(){e.trackableObject.indexOf("moat_trackable")>-1&&r(t(n,i))})):e.tag?n.src="javascript:'<html><head></head><body>"+e.tag+"</body></html>'":n.src="javascript:'<html><head></head><body>"+e+"</body></html>'",n):n}function r(e){if(e)try{__trcDebug("dispatching adLoaded event for MOAT"),e.dispatchEvent(new CustomEvent("adLoaded",{bubbles:!0,cancelable:!1}))}catch(e){}}function n(e,t){try{TRC.dom.addClass(e,t)}catch(e){__trcError("Error occurred while trying to add tblUniqueTagId To Relevant videoBoxContainer")}}function o(e,t){var i,r=[];try{for(var n=0;n<e.length;n++)i=TRC.TrackingScriptIdAppender&&TRC.TrackingScriptIdAppender.setTagDetails(e[n],t),r.push(i)}catch(t){return __trcError("Error occurred while trying to add tblUniqueTagId To Relevant Js Tags"),e}return r}function a(e,t){e.id="script-tracking-"+t+"-"+parseInt(1e4*Math.random(),10),e.name=e.id,e.width=0,e.height=0,e.style.display="none"}TRC.TrackingScriptLoader={TRC_SCRIPT_TAGS_ATTRIBUTE:"viewability-tags",renderScriptTagIntoVideoBox:function(t,i,r){try{if(t&&i&&i[this.TRC_SCRIPT_TAGS_ATTRIBUTE]&&i[this.TRC_SCRIPT_TAGS_ATTRIBUTE].length>0){var a=o(i[this.TRC_SCRIPT_TAGS_ATTRIBUTE],r);n(t,r),e(t,a)}else __trcDebug("renderScriptTagIntoVideoBox: videoBoxContainer/recommendation is null or TRC_SCRIPT_TAGS_ATTRIBUTE not exist")}catch(e){__trcError("failed to add JS script tracking to single videoBoxContainer Container")}}}}(),function(){var e="adsafeprotected.com",t="ias_adpath",i=".{uniqueId}",r="><\/script>",n="cdn.doubleverify.com",o="btreg",a="z.moatads.com",s="taboolaTrackable",l,c=new RegExp('(src|SRC)\\s*=\\s*"?(.+?)\\"|\\|s>'),d=[new h(e,t,i,u,!1,null),new h(n,o,null,p,!1,null),new h(a,s,null,m,!0,g)];function h(e,t,i,r,n,o){this.tagDomain=e,this.tagParamName=t,this.uniqueParamFormat=i,this.tagUrlExtractor=r,this.hasTrackableObject=n,this.trackableObjectCreator=o}function u(e){var t=e.indexOf(r),i=e.slice(0,t);return this.extractSrcValue(i)}function p(e){return this.extractSrcValue(e)}function m(e){return this.extractSrcValue(e)}function g(){return'<div class="moat_trackable" style="display: none;"></div>'}h.prototype.isMatchingTagDomain=function(e){return-1!==e.indexOf(this.tagDomain)},h.prototype.shouldAddTrackableObject=function(){return this.hasTrackableObject},h.prototype.appendId=function(e,t){try{var i=this.tagUrlExtractor(e);if(i)return t=this.formatUniqueId(t),e.replace(i,i+this.getUrlParamsSeparator(i)+this.tagParamName+"="+t)}catch(t){return __trcError("Error occurred while trying to append unique Id to a specific tag"),e}return e},h.prototype.extractSrcValue=function(e){var t=c.exec(e),i;return t[t.length-1].replace(/^"+|"+$/g,"")},h.prototype.formatUniqueId=function(e){return this.uniqueParamFormat?this.uniqueParamFormat.replace("{uniqueId}",e):e},h.prototype.getUrlParamsSeparator=function(e){return-1!==e.indexOf("?")||-1!==e.indexOf("#")?"&":"?"},h.prototype.createTrackableObject=function(){return this.trackableObjectCreator()},TRC.TrackingScriptIdAppender={setTagDetails:function(e,t){if(!e||!t)return e;for(var i=0;i<d.length;i++){var r=d[i];if(r.isMatchingTagDomain(e)){var n={};return n.tag=r.appendId(e,t),r.shouldAddTrackableObject()&&(n.trackableObject=r.createTrackableObject()),n}}return e}}}(),function(e){e.TRC=e.TRC||{};var t="disable",i=0,r,n,o={bulkingStrategy:{delay:(s=[],function(e,t,i,r,n){s.push(i),1===s.length&&setTimeout(function(){(n=n||{}).bulkSize=s.length,TRC.TRCLogger.post(e,"bulk",c(s),r,n),s=[]},l(t))}),sendFirstThenDelay:(a={},function(e,t,i,r,n){a[t]?o.bulkingStrategy.delay(e,t,i,r,n):((n=n||{}).bulkSize=1,TRC.TRCLogger.post(e,"bulk",c([i]),r,n),a[t]=!0)})}},a,s,l=function e(t){return"number"==typeof TRCImpl.global["bulk-".concat(t,"-events-delay")]?TRCImpl.global["bulk-".concat(t,"-events-delay")]:"number"==typeof TRCImpl.global["bulk-events-delay"]?TRCImpl.global["bulk-events-delay"]:i},c=function e(t){return t.forEach(function(e){e.data=TRC.TRCLogger.formatParams(e.data)}),{sd:n,ui:r,events:__trcJSONify(t)}},d=function e(t,i){return{type:t,timestamp:Date.now(),data:i}},h=function e(i){if(i&&i!==t){var r=o.bulkingStrategy[i];if("function"==typeof r)return r}return null};e.TRC.TRCBulkLogger=TRC.TRCBulkLogger={bulkPost:function e(i,o,a,s,l){var c=TRCImpl.global["bulk-".concat(o,"-events-strategy")]||t,u=h(c);u?(n=n||a.sd,r=r||a.ui,u(i,o,d(o,a),s,l)):(TRC.TRCLogger.post(i,o,a,s,l),c!==t&&__trcWarn("FailedSendingBulkEvent for eventType: ".concat(o,", with strategy: ").concat(c)))}},window._trcIsUTactive&&(TRC.TRCBulkLogger.privateProps=o)}(window),function(){var e=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_classCallCheck(this,e),this.onlyClean=i,this.pm=TRC.pageManager,this.storageType=t.storageType||"session",this.localStorage=this.pm.getLocalStorageImplementation("strict-w3c-storage",this.storageType),this.currentSize=0,this.trcCache=null,this.cacheSize=t.cacheSize||5,this.cacheTtl=t.ttl||1e3*60*20,this.disableFeedCache=t.disableFeedCache,this.trcCacheName=t.cacheName||"trc_cache",this.TRC_CACHE_ACTIVE_STORAGE_KEY="trc_cache_active",this.cacheUtils=new TRC.CacheUtils(this.localStorage,this.trcCacheName,this.cacheTtl),!this.localStorage)return{isValidCache:!1};this.isValidCache=!0,this.init()}return _createClass(e,[{key:"cacheResponse",value:function e(t,i){TRC.tlf&&console.time("in cacheResponse");var r=this.setCacheResponse(t,i);return this.currentSize>this.cacheSize&&this.removeToLimit(),this.localStorage.setValue(this.trcCacheName,__trcJSONify(this.trcCache.getData())),TRC.tlf&&console.timeEnd("in cacheResponse"),r}},{key:"setCacheResponse",value:function e(t,i){var r=(new Date).getTime(),n;try{if(n=this.getFeedRelatedResponseFromCache(this.trcCache,t,i))TRC.TrcCache.updateFeedConfigPropsInCache(i.trc.f,n.r.trc.f),TRC.TrcCache.addNewFeedCardsToCachedResponse(i.trc.vl,n.r.trc.vl);else{var o={s:r,r:i,vi:this.pm.getPageData()},a=!(!i.trc||!i.trc.cga)&&!!i.trc.cga.selectiveCache;a&&(o.is=a),this.trcCache.setValue(t,o),this.currentSize++,this.setCacheClean(t)}}catch(e){return __trcError("setCacheResponse Error",e),!1}return!0}},{key:"getCacheResponse",value:function e(t){var i;if(TRC.tlf&&console.time("in getCacheResponse"),this.trcCache.getValue(t)&&!this.isOverTtl(this.trcCache.getValue(t).s)){TRC.tlf&&console.timeEnd("in getCacheResponse");var r=this.trcCache.getValue(t);return{response:r.r,viewId:r.vi,isSelective:r.is}}return TRC.tlf&&console.timeEnd("in getCacheResponse"),null}},{key:"isOverTtl",value:function e(t){this.cacheUtils.isOverTtl(t)}},{key:"setCacheClean",value:function e(t){this.cacheUtils.setCacheClean(t,this.trcCache)}},{key:"cleanCache",value:function e(t){this.cacheUtils.cleanCache(t,this.trcCache,this)}},{key:"removeKey",value:function e(t){var i;!0===TRC.CacheUtils.removeKey(t,this.trcCache)&&this.currentSize--}},{key:"getTrcCache",value:function e(){return this.cacheUtils.getCache(this.pm)}},{key:"removeToLimit",value:function e(t){t=t||TRC.util.keys(this.trcCache.getData());var i=this.currentSize-this.cacheSize,r;this.sortByStamp(t);for(var n=0;n<i;n++)r=t.shift(),this.removeKey(r)}},{key:"sortByStamp",value:function e(t){for(var i,r,n=1;n<=t.length-1;++n)for(r=n;r>0&&this.trcCache.getValue(t[r-1]).s>=i;)i=t[r],t[r]=this.keys[r-1],t[r]=i,--r}},{key:"reloadCache",value:function e(){this.trcCache=this.getTrcCache()}},{key:"init",value:function e(){if(TRC.tlf&&console.time("in init cache trc"),this.onlyClean)this.localStorage.removeKey(this.trcCacheName);else{this.trcCache=this.getTrcCache();var t=TRC.util.keys(this.trcCache.getData());this.currentSize=t.length,this.cleanCache(t),this.currentSize>this.cacheSize&&this.removeToLimit(t),TRC.tlf&&console.timeEnd("in init cache trc")}}},{key:"enableCacheViaStorageFlag",value:function e(){this.localStorage.setValue(this.TRC_CACHE_ACTIVE_STORAGE_KEY,"true")}},{key:"isCacheEnabledViaStorageFlag",value:function e(){return"true"===this.localStorage.getValue(this.TRC_CACHE_ACTIVE_STORAGE_KEY)}},{key:"getFeedRelatedResponseFromCache",value:function e(t,i){var r,n=t.getValue(i);if(!this.disableFeedCache){if(n&&n.trc&&n.trc.f)return n;var o=t.getData(),a=i.split(",");if(!(a.length>2))for(var s=Object.keys(o),l,c=0;c<s.length;c++)if(l=s[c],Object.prototype.hasOwnProperty.call(o,l)&&(r=l.split(","),a[0]===r[0]&&r.indexOf(a[1])>0&&o[l].r.trc&&o[l].r.trc.f))return o[l]}}},{key:"shouldRequestUseViewIdFromCache",value:function e(t,i,r,n){var o;return t&&t.response&&n.cachedResponses[i]&&(this.isCacheEnabledViaStorageFlag()||!n.global["disable-trc-cache-reuse-view-id"]&&r)}}],[{key:"extractKey",value:function t(i){for(var r=i.it,n=i.ii,o=[],a="".concat(r,"=").concat(n),s=0;s<i.r.length;s++)o.push(",".concat(i.r[s].uip,"=").concat(i.r[s].uim));return e.sortByPlacements(o),a+=o.join(),TRC.isAMPSplitFeed&&void 0!==TRC.currentAmpFrameNum&&(!0===TRC.keyWriting?(a+=TRC.currentAmpFrameNum,TRC.keyWriting=!1):a+=TRC.feedContainerNum),a}},{key:"sortByPlacements",value:function e(t){for(var i,r,n=1;n<=t.length-1;++n){for(i=t[n],r=n;r>0&&t[r-1]>=i;)t[r]=t[r-1],--r;t[r]=i}}},{key:"addNewFeedCardsToCachedResponse",value:function e(t,i){t.forEach(function(e){for(var t,r=0;r<i.length;r++)if(e.uip===i[r].uip){i[r]=e,t=!0;break}t||i.push(e)})}},{key:"updateFeedConfigPropsInCache",value:function e(t,i){t&&i&&Object.keys(t).forEach(function(e){Object.keys(i).some(function(r){if(r===e){var n=t[e],o=i[r];return o.nb=n.nb,o.eof=n.eof,!0}return!1})})}}]),e}();TRC.TrcCache=e}(window,document),function(){var e;(TRC.TrcEventsLogger={}).sendPlacementEvent=function(e,t,i,r,n,o,a,s){var l=!1,c=t.trcResponse,d=t.globalTrcResponseJSON,h=c.ri,u=d.sd,p=t.placement,m=Math.floor(1e5*Math.random()),g={ri:h,sd:e.getSessionData(u),ui:TRC.pageManager.getValue("user-id"),pi:e.getItemId(),wi:d.wi,pt:e.getItemType(),vi:t.cachedViewId||TRC.pageManager.getPageData()},f=function e(){l||(l=!0,a&&a())};t.cachedViewId&&(g.cache="1"),__trcCopyProps(r,g),o?(TRC.pConsole(p,"info","sending event type: ".concat(i),g,"object"),e.log1(i,g,n,f,p)):e.logTrcEvent(i,g,n,f);var v=null;TRC.performance&&"card-visible"===i&&TRC.performance.mark("11.0.".concat(m),v,p,h,"card-visible",TRC.PerfEvenType.MARK),"number"==typeof s&&TRC.Timeout.set(f,s)}}(),function(e,t){TRC.TRCParser={parseModeName:function(e){return e.mode||null},parsePlacementName:function(e){return e.placement||null},parseABModeName:function(e,t){var i=this.parseTestVariant(t);return null===i?null:"ab_"+e+"_"+i},parseBaseModeName:function(e){if("object"!=typeof e)return null;var t=e["video-list"];return"object"==typeof t&&t["base-mode"]?t["base-mode"]:null},parseTestVariant:function(e){var t;return"object"!=typeof e?null:(t=e["video-list"],e.uvpw&&"object"==typeof t&&t["test-variant"]?t["test-variant"]:void 0===e["test-variant"]?null:e["test-variant"])},IsBaseModeAndABModeExist:function(e){var t=this.parseBaseModeName(e),i=this.parseTestVariant(e);return!(!t||!i)},parseBaseModeAndABModeName:function(e){var t=this.parseTestVariant(e),i=this.parseBaseModeName(e);return null!==i&&null!==t?"ab_"+i+"_"+t:null},getItemCount:function(e){return e["video-list"].video?e["video-list"].video.length:0},hasVariantMismatch:function(e){var t=e["test-variant"],i=e["video-list"]["test-variant"];return!(!t||!i)&&t!==i}}}(window,document),function(win,doc){var TRANSPORT_FORM_ELEMENT="trc-transport-form-element";function initEventsRedirectParams(e,t,i){if(this.enableTrcEventRoute||e.trc.el2r&&TRC.util.isArray(e.trc.el2r)){try{e.trc.el2r&&(this.eventTypesToRoute=e.trc.el2r)}catch(e){__trcError("TRC.parseResponse: even list to route is not a valid json",e)}e.trc.route&&(t=e.trc.route.split(":")[1],i=this.global["trc-event-route-template"]||"<dc>-trc-events.taboola.com",this.trcEventRoute=i.replace("<dc>",t.toLocaleLowerCase()))}}var Manager=TRC.Manager=function(t,i){this.feedsManager=new window.TRC.FeedsManager(this),this.totalModeCounter=0,this.renderedModeCounter=0;var r=500;function n(e,t){var i;if((t?t.global:{})["disable-yield"])return!1;if(TRC.URL.prototype.getParameter.call(win.location.href,"yield-batch"))return!0;for(var r in e){var n;if(void 0!==e[r].modeGroupOrder)return!0}return!1}function o(e){try{var t=window.sessionStorage&&window.sessionStorage.getItem("tbl_disable_cache");e["enable-trc-cache"]&&(t||TRC.URL.prototype.getParameter.call(location.href,"tbl_disable_cache"))&&(window.sessionStorage.setItem("tbl_disable_cache","true"),e["enable-trc-cache"]=!1)}catch(e){}}this.numOfResetCssDivs=3,this.eventLogger=[],this.eventCounter={},this.NO_CONTENT={noItems:"NO_ITEMS",mute:"MUTE",error:"ERROR",timeOut:"TIMEOUT"},this.cloudinarySortedRatios,this.cachedResponses={},this.loadedJsTags=[],this.pendingRequests=[],this.iframePixelReporter,this.reset=function(){for(var e in this.reset=!0,TRC.dispatch("trcReset"),this.clearPageElements(),this.widgetContainerReset(),this.feedsManager.containersReset(),TRC.callbacks)TRC.callbacks.hasOwnProperty(e)&&e.search("recommendations")>=0&&(TRC.callbacks[e]=function(){});this.global["enable-old-preloadRequestLoader"]&&this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.clearPreloadRequestLoader());try{delete win.trc_video_id,delete win.trc_article_id,delete win.trc_item_url,delete win.trc_adPlayer}catch(e){win.trc_video_id=null,win.trc_article_id=null,win.trc_item_url=null,win.trc_adPlayer=null}finally{this.global["enable-old-preloadRequestLoader"]||this.clearPreloadRequestLoaderAndResetQueue()}},this.renderRBox=function(e){var t=TRC.dom.closest(e.getContainer(),".trc_rbox_container");function i(){try{t.style.display="none"}catch(e){__trcError("Failed to hide main container on Error",e)}}e.load(i)},this.getConfig=function(e,t){return void 0!==e[t]?e[t]:void 0!==win["trc_"+t]&&null!=win["trc_"+t]?e[t]=win["trc_"+t]:(void 0!==this[t]&&this[t],e[t]=this[t])},this.getItemId=function(){var e=this.itemid;return win.trc_video_id||""==win.trc_video_id?e=win.trc_video_id:(win.trc_article_id||""==win.trc_article_id)&&(e=win.trc_article_id),""==e&&(e=this.getAutoItemMeta("item-id",null,this.urlPreNormalizer,this["normalize-item-id"])),this.itemid=e},this.getGlobalRequestId=function(){return TRC.events_ri},this.getGlobalSessionData=function(){return TRC.session_data},this.getSessionId=function(){return this.sessionId},this.getPlatformCode=function(){return TRC.platform_code},this.getReferrer=function(){return TRC.pageManager.getReferrer()},this.getItemUrlQueryString=function(){if(this.itemUrlQueryString)return this.itemUrlQueryString;var e=TRC.pageManager.getTopMostWindow(),t=this.global["item-query-string-max-length"]||400,i;if(TRC.isAMP){var r=TRC.util.splitUrlParts(document.referrer);this.itemUrlQueryString=r.search||""}else this.itemUrlQueryString=e.location.search;return this.itemUrlQueryString.length>t&&(i=this.itemUrlQueryString.substring(0,t-1),this.itemUrlQueryString=i.substring(0,i.lastIndexOf("&"))),this.itemUrlQueryString},this.getListSize=function(e){return e.visible&&"rbox-only-video"!==e.mode?this.calculateAutoListSize(e):0},this.getListId=function(e){return"rbox-only-video"===e.mode?"rbox-invisible-widget":e.list_id||"rbox-tracking"===e.mode?e.mode:"rbox-"+(e.visible?e.origin.toString():"tracking")},this.getExtraResponsiveRecom=function(e){var t=this.getProperty(e.mode_name,"responsive-extra-columns"),i=this.getProperty(e.mode_name,"rows");return t?t*(i||1):0},this.getResponsiveRecommendations=function(e){var t,i=0,r,n,o,a="function"==typeof win["matchMedia"];t=this.getMatchMediaRuleMaxWidth(e,a);for(var s=0,l=e.length;s<l;s++)r=(o=e[s]).cells*o.rows,n=a&&(win["matchMedia"]("(min-width: "+o.minWidth+"px)"+(isNaN(o.maxWidth)?"":" and (max-width: "+o.maxWidth+"px)")).matches||win["matchMedia"]("screen and (min-height: "+o.minWidth+"px)"+(isNaN(o.maxWidth)?"":" and (max-height: "+o.maxWidth+"px)")+" and (orientation: portrait)").matches),(isNaN(t)||o.minWidth<=t||t<0||n)&&i<r&&(i=r);return{listSize:i,rule:i?o:null}},this.getMatchMediaRuleMaxWidth=function(e,t){var i,r;if(!t)return screen.width;for(var n=0,o=e.length;n<o;n++)if(r=e[n],(i=win["matchMedia"]("screen and (min-device-width: "+r.minWidth+"px)"+(isNaN(r.maxWidth)?"":" and (max-device-width: "+r.maxWidth+"px)"))).matches)return r.maxWidth},this.calculateAutoListSize=function(e){var t=this.getProperty(e.mode_name,"list-size"),i=0,r=this.getProperty(e.mode_name,"responsive-rules"),n=null,o,a;if(this.getProperty(e.mode_name,"mode-is-responsive")){if(r&&r.length)return n=this.getResponsiveRecommendations(r),e.matched_rule=n.rule,n.listSize;i=this.getExtraResponsiveRecom(e)}if(a=t+i,e.autoSize=this.getProperty(e.mode_name,"auto-size"),!e.autoSize)return e.autoSize=!1,a;if(0==(o=Math.floor(e.container.clientWidth>0?e.container.clientWidth:e.container.offsetWidth)))return e.autoSize=!1,a;for(var s=this.getProperty(e.mode_name,"auto-size-rules"),l=0;l<s.length;l++)parseInt(s[l]["minWc"])<=o&&o<=parseInt(s[l]["maxWc"])&&(e.AutoSizeRule=s[l]);return e.AutoSizeRule?(e.rows=this.getProperty(e.mode_name,"rows"),e.rows<=1?this.modes[e.mode_name]["list-size"]=e.AutoSizeRule.n+i:this.modes[e.mode_name]["list-size"]=e.AutoSizeRule.n*e.rows+i):0},this.calculateAutoSizeParameters=function(e){var t,i;if(this.calculateAutoListSize(e),e.AutoSizeRule)for(var r=Math.floor(e.container.clientWidth>0?e.container.clientWidth:e.container.offsetWidth),n=e.AutoSizeRule["minWsRange"];n<=e.AutoSizeRule["maxWsRange"];n++)if(t=(r-(e.AutoSizeRule.n-1)*n)/e.AutoSizeRule.n,(i=parseInt(t))==t){e.AutoSizeRule.Wi=t,e.AutoSizeRule.Ws=n;break}},this.getItemUrl=function(){var e=this.itemurl;return(win.trc_item_url||null==this.itemurl)&&(e=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"])),this.itemurl=e},this.urlPreNormalizer=function(e,t){var i=this["prenormalize-"+e],r;if(!i)return t;(i["truncate-at"]||[]).forEach(function(e){var i=t.search(e);i>=0&&(t=t.substr(0,i))});var n=new win.TRC.URL(t);for(var o in i)if(i.hasOwnProperty(o)){if(!i[o])continue;switch(o){case"host":delete n.host;break;case"trailing-dirsep":for(;"/"==n.pathname.substr(n.pathname.length-1);)n.pathname=n.pathname.substr(0,n.pathname.length-1);break;case"query":var a=[],s=n.search.replace(/^\?/,"").split("&");"string"==typeof(r=i[o])&&(r=new RegExp(r));var l=r instanceof Array?function(e){for(var t=0;t<r.length;t++)if(e==r[t])return!0;return!1}:r instanceof RegExp?r.test.trcBind(r):function(){return!1};s.forEach(function(e){l(decodeURIComponent(e.split("=")[0]))&&a.push(e)}),n.search=(a.length?"?":"")+a.join("&");break;case"fragment":var c=n.hash.replace(/^#/,"");"string"==typeof(r=i[o])&&(r=new RegExp(r)),n.hash="",r instanceof RegExp&&r.test(c)?n.hash="#"+c:r instanceof Array&&r.forEach(function(e){c.search(e)>=0&&(n.hash="#"+c)})}}return n.pathname||(n.pathname="/"),"item-id"==e?n.toString().toLowerCase():n.toString()},this.genCallback=function(e){var t="recommendations_"+(TRC.callbacks.auto_gen_callback_seq=TRC.callbacks.auto_gen_callback_seq+1||1);return TRC.callbacks[t]=e,"TRC.callbacks."+t},this.formatTRCRequest=function(e,t,i){try{e.hasOwnProperty("rbox-tracking")&&Object.keys&&Object.keys(e).length>1&&delete e["rbox-tracking"],TRC.pageLevelFeaturesManager.disableFeatureOnIframe();var r=new this.GlobalRequetParams;return(TRC.isOptim("geom")&&!i||!TRC.isOptim("geom"))&&(this.setGlobalParmas(r,t),this.setGlobalParamsDecorators(r)),r.setPlacementsParamsArray(this.getPlacementsRequestParams(e,r,i)),TRC.pConsole("recommendations","debug","hook : normalize-request-param",this["normalize-request-param"].toString(),"string"),r.setAll(this["normalize-request-param"](r.getAll(),null)),this.setNewPlacementsInRequest(e,r),TRC.pConsole("recommendations","info","formatted request",r.getAll(),"object"),r.getAll()}catch(e){__trcError("TRC.formatTRCRequest",e)}},this.setGlobalParmas=function(e,t){var i=e,r=TRCImpl?TRCImpl.global:{};i.setItemId(this.getItemId()),i.setTemplate(TRC.pageTemplate),i.setItemType(t||this.getItemType()),i.setSessionData(this.getSessionData(TRC.session_data)),i.setUserId(this.getUserId(TRC.user_id)),r["store-userid-first-party-cookie"]&&i.setUserIdFirstPartyCookie(TRC.pageManager.getUserIdFirstPartyCookie()),i.setLoaderBuildTime(this.global["bakeTime"]),i.setViewId(TRC.pageManager.getPageData()),i.setClientVersion(this.version),i.setPublisherVersion(this.getPublisherVersion()),i.setItemUrl(this.getItemUrl()),i.setDeviceId(this.deviceId),i.setUnifiedId(this.unifiedId),i.setUserType(this.userType),i.setPaywall(this.paywall),i.setPremium(this.premium),i.setAdvertorialSource(this.advertorialSource),i.setExternalPageView(this.external_page_view),i.setBlockVideoLoader(this.blockVideoLoader?"1":"0"),i.setUserLanguages(this.getUserLanguages()),i.setExperimentVariant(this.getSystemFlag("experimentID")),this.consentState&&(i.setCmpStatus(this.consentState.cmpStatus),i.setGdprApplies(this.consentState.gdprApplies),i.setConsentDaisyBit(this.consentState.consentData),i.setConsentTcString(this.consentState.tcString,this.global["max-tcs-size"]),i.setGdprWasTimeout(this.consentState.wasTimeout)),TRC.consentData&&(i.setCmpStatus(TRC.consentData.cmpStatus),i.setGdprApplies(TRC.consentData.gdprApplies),i.setConsentDaisyBit(TRC.consentData.consentDaisyBit)),this.getUSPData(function(e){TRC.ccpaPs=e}),i.setCex(TRC.cexConsentData),i.setCcpaDns(TRC.ccpaCdns),i.setCcpaPs(TRC.ccpaPs),i.setBlockThumbnailVideoLoader(this.blockThumbnailVideoLoader?"1":"0"),!1!==r["local-storage-piggyback"]&&i.setLocalStoragePiggyback(TRC.pageManager.getValue(TRC.LOCAL_STORAGE_PIGGYBACK)),void 0!==navigator.connection&&(i.setConnectionType(navigator.connection.type),i.setConnectionSpeed(navigator.connection.effectiveType)),i.setPageLevelFeature(TRC.pageLevelFeaturesManager.pageLevelFeatures)},this.setNewPlacementsInRequest=function(e,t){var i,r,n=t.getPlacementsParamsArray();if(e)for(var o=0,a=n.length;o<a;o++)i=n[o].uip,r=n[o].orig_uip,e[i]||(e[i]=e[r],e[r]=e[i],e[r].new_uip=i)},this.setRequestMetaData=function(e){var t={};for(var i in this.tags&&this.tags.length&&(t.k=this.tags.join(",")),this.metadata)this.metadata.hasOwnProperty(i)&&this.metadata[i]&&(t[this.parseMetaName(i)]=this.metadata[i]);TRC.util.hasKeys(t)&&e.setMetaData(t)},this.parseMetaName=function(e){switch(e){case"user":return"u";case"uploader":return"U";case"content-rating":return"c";case"publish-date":return"t";case"duration":return"d";case"category":return"x";case"v":case"r":default:return e}},this.getPlacementsRequestParams=function(e,t,i){for(var r=[],n,o=TRC.util.keys(e),a,s,l=0;l<o.length;l++)(a=e[s=o[l]]).placement&&(this.setModeGlobalParamsDecorators(t,a),(n=this.createNewPlacementParams(a,e[s],i)).setAll(this["normalize-request-param"](n.getAll(),a.mode_name)),r.push(n.getAll()));return r},this.createNewPlacementParams=function(e,t,i){var r=new this.PlacementParams;return r.setListId(this.getListId(e)),r.setListSize(this.getListSize(e)),r.setUIMode(this.computeUIM(t)),r.setUIPlacement(e.placement),r.setOriginalUIPlacement(e.placement),this.setPlacementParamsDecorators(r,e,i),r},this.setPlacementParamsDecorators=function(e,t,i){var r=this.getProperty(t.mode_name,"required-attributes");if("string"==typeof r&&"none"!=r&&e.setRequiredAttr(r),t.dfp&&t.dfp.campaign_id&&e.setNativeCampaignID(t.dfp.campaign_id),t.category&&e.setAllowedCategories(t.category),this.enablePlacementGeometry&&(TRC.isOptim("geom")&&!i||!TRC.isOptim("geom"))&&this.addGeometryPlacementData(e,t.container),t.exclude&&e.setExclusions(TRC.text.toStringList(t.exclude)),t.fi&&(TRC.isAMPSplitFeed&&(t.fi=this.ampSplitFeedManager.handleFeedIndexOffset(t)),e.setFeedIndex(t.fi)),t.fb){if(TRC.isAMPSplitFeed){var n=Number(this.ampSplitFeedManager.syncFb);null!==n&&(t.fb=n)}e.setFeedBatch(t.fb)}t.fti&&e.setFeedTemplateId(t.fti)},this.addGeometryPageData=function(e,t){try{TRC.tlf&&console.time("page geometry"),e.setArticlePos(this.getGeometryPageData(t)),e.setScreenWidth(window.screen.availWidth),e.setScreenHeight(window.screen.availHeight),e.setBrowserWidth(TRC.dom.getWindowWidth()),TRC.tlf&&console.timeEnd("page geometry")}catch(t){e.bad=-5}},this.addGeometryExtendedPageData=function(e){try{TRC.tlf&&console.time("page geometry extended"),e.setScreenDensity(TRC.dom.getScreenDensity()),e.setBrowserHeight(TRC.dom.getWindowHeight()),e.setDocumentWidth(TRC.dom.getDocumentWidth()),e.setDocumentHeight(TRC.dom.getDocumentHeight()),TRC.tlf&&console.timeEnd("page geometry extended")}catch(t){e.bad=-6}},this.addGeometryPlacementData=function(e,t){try{TRC.tlf&&console.time("mode geometry - "+e.getAll().uim),e.setContainerPos(this.getPosFromDocTop(t,"top")),e.setContainerWidth(this.getModeWidth(t)),TRC.tlf&&console.timeEnd("mode geometry - "+e.getAll().uim)}catch(t){e.cd=-5}},this.getModeWidth=function(e){return e.getBoundingClientRect().width},this.getGeometryPageData=function(e){var t,i;switch(!0){case"function"!=typeof doc.querySelector:return-4;case"string"==typeof e:return this.computeGeometryPageData(e);case e instanceof Array&&e.length>0:for(i=0;i<e.length;i++)if((t=this.computeGeometryPageData(e))>-1)return t;return-2;default:return-1}},this.computeGeometryPageData=function(e){try{var t=doc.querySelector(e);return t?this.getPosFromDocTop(t,"bottom"):-2}catch(e){return-3}},this.getPosFromDocTop=function(e,t){return e.getBoundingClientRect()[t]+TRC.dom.getPageVerticalScroll()},this.setGlobalParamsDecorators=function(e){TRC.pageManager.getValue("past-exclusions")&&e.setPastExclusions(TRC.pageManager.getValue("past-exclusions")),this.excludedItems&&e.setExclusions(TRC.text.toStringList(this.excludedItems)),this.getReferrer()&&e.setReferrer(this.getReferrer()),this.enablePageGeometry&&this.addGeometryPageData(e,this.global["page-geometry-selectors"]),this.enablePageGeometryExtended&&this.addGeometryExtendedPageData(e),this.setRequestMetaData(e),!0===this.global["send-item-query-string-in-req"]&&e.setItemUrlQueryString(this.getItemUrlQueryString()),TRC.networkId&&e.setNetworkID(TRC.networkId),this.tracking_codes&&e.setUTMParams(this.buildUTMParams(this.tracking_codes)),this.additional_data&&e.setAdditionalData(this.additional_data),TRC.rtbRealTimeUserId&&(TRC.performance&&TRC.performance.mark("RealTimeUserSyncMainStop",null,"RealTimeUserSyncMain",0,"RealTimeUserSyncMain",TRC.PerfEvenType.STOP),e.setRtui(TRC.rtbRealTimeUserId))},Manager.prototype.buildUTMParams=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},this.setModeGlobalParamsDecorators=function(e,t){this.setPlayerGlobalParams(e,t),0==t.origin.toString().indexOf("h2")&&e.setItemId("_homepage_")},this.setPlayerGlobalParams=function(e,t){e.setItemId(t.item_id),e.setItemType(t.item_type),e.setItemUrl(t.item_url)},this.computeUIM=function(e){var t=e.mode_name,i,r,n;return t+(this.global["disable-network-uim"]||void 0===TRC.networkId?"":":pub="+TRC.networkId)+(TRC.blocker.blockedState>-2&&this.global["use-abp-uim"]?":abp="+TRC.blocker.blockedState:"")+(this.global["use-calibration-uim"]&&this.getProperty(t,"mode-is-responsive")?this.computeCalbUIM(e):"")},this.computeCalbUIM=function(e){if(!e.matched_rule)return"";var t=TRC.implClasses.TRCRBox,i=this.modes[e.mode_name],r=e.matched_rule,n="none"!=i["thumbnail-position"]&&i["thumbnail-position"]||void 0,o=n?TRC.math.round10(t.prototype.getRuleAspectRatio(r,"ratio")||t.prototype.getThumbAspectRatio(i,"ratio")||t.prototype.DEFAULT_THUMB_RATIO,-1):void 0,a=n?this.caclculateThumbnailWidth(e.container,r):void 0;return":type=responsive,rows="+r.rows+",cells="+r.cells+",thumb-pos="+n+(n&&"none"!=n?",thumb-ratio="+o+",thumb-width="+a:"")},this.caclculateThumbnailWidth=function(e,t){var i=TRC.css.responsive.getRulePercentageWidth(t.cells,t.margin.h)/100,r,n=50;return e&&i?(r=parseInt(e.clientWidth>0?e.clientWidth:e.offsetWidth,10),TRC.math.roundByDecimal(r*i,n)):null},this.dispatchLoadRequest=function(e){this.global["enable-old-preloadRequestLoader"]?this.performDispatchLoadRequest(e):TRC.recoRequestsQueue.add(this.performDispatchLoadRequest.bind(this,e))},this.performDispatchLoadRequest=function(e,t){if(TRC.util.hasKeys(e))if(this.global["enable-old-preloadRequestLoader"]&&this.preloadRequestLoader&&!this.global["disable-simultaneous-req-protection"]){var i=arguments;TRC.Timeout.set(function(){i.callee.apply(this,[].slice.call(i).concat([!0]))}.trcBind(this),100)}else{var r=this.getProperty(null,"timeout")||8e3,n,o,a=!1;if(this.preloadRequest=e,null!=this.getItemId()){this.delayedDispatchLoadRequest=null;try{if(this.formattedTRCRequest=n=this.formatTRCRequest(this.preloadRequest),TRC.isAMPSplitFeed&&this.ampSplitFeedManager.copyReqToReqForCacheKey(n),TRC.utm.push((new Date).getTime()-TRC.utm.start),this.isValidForCache(n.it)&&(a=this.activateTrcCache(n,this.trcCache,this.trcCacheItemType,this.handleLoadResponse,this)))return"function"==typeof t&&t(),void(TRC.usingCacheForPageRefresh=!this.trcCache.isCacheEnabledViaStorageFlag());n.cb=this.genCallback(this.handleLoadResponse.trcBind(this,n.cacheKey)),o=this.createRequestUrl(n);var s=void 0===this.global["enable-trc-ajax"]||TRC.util.isTrue(this.global["enable-trc-ajax"]);TRC.workerInited||TRC.initWorkerIfAvailable(o,r),TRC.worker?this.callTrcByWorker(o,n,r):s?this.callTrcByAjax(o,n,r,t):this.callTrc(o,n,r,t),delete n.cacheKey}catch(e){__trcError("TRC.dispatchLoadRequest: Error in request processing",e)}}else this.delayedDispatchLoadRequest=this.dispatchLoadRequest.trcBind(this,e)}},this.isValidForCache=function(e){return!!(this.trcCache&&this.trcCache.isValidCache&&(this.trcCache.isCacheEnabledViaStorageFlag()||this.trcCacheItemType[e]&&(""===this.trcParams||TRC.pageManager.getForceTrcCache())))},this.activateTrcCache=function(e,t,i,r,n){if(!e.r&&!e.r.length)return!1;void 0===TRC.currentAmpFrameNum&&(TRC.currentAmpFrameNum=1);var o=TRC.TrcCache.extractKey(e),a=t.getCacheResponse(o),s="c"===i[e.it];if(a&&a.response&&!this.cachedResponses[o]){if(s||t.isCacheEnabledViaStorageFlag()||a.isSelective)return this.setCachedResponse(a,r,n,o),this.cachedResponses[o]=!0,!0;"d"===i[e.it]&&(e.cache=1,e.cacheKey=o)}else e.cacheKey=o,t.shouldRequestUseViewIdFromCache(a,o,s,this)&&(e.vi=a.viewId);return!1},this.setCachedResponse=function(e,t,i,r){e.response.cached=!0,e.response.cachedViewId=e.viewId,TRC.Timeout.set(t.trcBind(i,null,e.response,!0),0),TRC.pConsole("recommendations","warn","using cached recommendations","")},this.createRequestUrl=function(e){this.systemFlags&&this.systemFlags.loaderType&&(e.lt=this.systemFlags.loaderType);var t="";e.cache&&(t="&cache=1",delete e.cache);var i=protocol+"//"+this.domain+"/"+encodeURIComponent(TRC.publisherId)+"/trc/3/json?"+"tim="+encodeURIComponent(__trcClientTimestamp())+(this.trcByPass?"&trc_skip_failover=yes&":"&")+(this.enableTrcRoute&&this.trcRoute?"route="+this.trcRoute+"&":"")+(this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr?this.experimentsVariantIdParamsStr+"&":"")+(this.getLoaderTypesValue()?this.getLoaderTypesValue()+"&":"")+"data="+encodeURIComponent(__trcJSONify(e))+this.getOptOut()+TRC.pageManager.additionalDispatchParams()+t+(win.trc_debug_level>1?"&llvl="+win.trc_debug_level:"");return this.enableTrcEventRouteExperiment&&(i+="&trc_evi=21|1434|2154"),i},this.abortLoadRequest=function(e,t){var i;for(i in e?TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.timeOut):TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.error),this.preloadRequest)if(this.preloadRequest.hasOwnProperty(i)){if(i.search("rbox-tracking")>=0)continue;e&&(e=!1,__trcWarn("TRC.abortLoadRequest: pv3 timeout"),t&&(TRC.callbacks[t.replace("TRC.callbacks.","")]=function(){})),TRC.dispatch("onRboxFlowError",{placement:i});var r=this.preloadRequest[i];delete this.preloadRequest[i],r.loadRBoxRequestFailed=!0,this.internalDrawRBox(r)}this.clearPreloadRequestLoaderAndCallNext()},this.getOptOut=function(){return this.userOptOut?"&user.opt_out=true":""},this.handleLoadResponseFailure=function(e){TRC.performance&&TRC.performance.mark("5.1.8",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.STOP),null==this.preloadRequestLoader||!this.global["disable-simultaneous-req-protection"]&&e&&e.target&&this.preloadRequestLoader.src!==e.target.src||(__trcError("Server did not respond to loadRBox"),this.abortLoadRequest())},this.isActivePlacementData=function(e,t){return!e.new_uip||t===e.new_uip},this.handleLoadResponse=function(e,t,i){this.global["enable-mode-injection"]&&TRC.css.utils.bakeCss(t,this),TRC.ItemOverride.run(this.global["enable-item-override"],t);var r,n=TRCImpl?TRCImpl.global:{};function o(){this.parseResponse(t,i),this.global["enable-old-preloadRequestLoader"]&&this.checkPreloadRequest(r),this.global["smart-ellipsis"]&&TRC.dom.on(win,"resize",TRC.util.debounce(this._repaintEllipsis,500,!1,this)),this.clearPreloadRequestLoaderAndCallNext();try{TRC.SpotlightLoader.load(t)}catch(e){__trcError("Error while trying to load Spotlight")}TRC.tlf&&console.timeEnd("in handleLoadResponse"),TRC.tlf&&console.timeStamp("end handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.9",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.STOP)}try{if(TRC.tlf&&console.timeStamp("start handleLoadResponse(pv3)"),TRC.tlf&&console.time("in handleLoadResponse"),TRC.performance&&TRC.performance.mark("6.0.1",null,"TrcPv3","","pv3prase",TRC.PerfEvenType.START),TRC.pConsole("recommendations","info","recommendations response",t,t.trc.verbose?"verbose":"object"),TRC.pConsole("","time","recommendations loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),t&&t.trc&&t.trc.f)for(var a=Object.keys(t.trc.f),s=0;s<a.length;s++){var l=a[s];if(this.feedsManager&&this.feedsManager.feeds&&this.feedsManager.feeds[l]){var c=this.feedsManager.feeds[l];if(c&&c.infiniteScrollEngine&&c.infiniteScrollEngine.preventReachingTheFooter){var d=c.infiniteScrollEngine.preventReachingTheFooter;d&&d.lateRenderEnabled&&c.infiniteScrollEngine.preventReachingTheFooter.handleBatch(e,t)}}}if(t&&t.trc&&t.trc.ui&&(this.watchedItem=t.trc["wi"],this.globaleRequestId=t.trc["vl"]&&t.trc["vl"].length?t.trc["vl"][0].ri:this.globaleRequestId,TRC.events_ri=this.globaleRequestId,TRC.session_data=t&&t.trc?t.trc["sd"]:null,TRC.platform_code=t&&t.trc?t.trc["plc"]:null,TRC.user_id=t.trc["ui"]||null,TRC.isOptim("defer-events")?setTimeout(function(){TRC.eventDelegator.dispatch("user_id_ready")},0):TRC.eventDelegator.dispatch("user_id_ready"),TRC.eventDelegator.dispatch("user_id_ready"),t.trc.stp&&(TRC.isOptim("defer-events")?setTimeout(function(){TRC.dispatch("send_user_id",t.trc.stp)},0):TRC.dispatch("send_user_id",t.trc.stp)),t.trc.jst&&(TRC.isOptim("defer-events")?setTimeout(function(){TRC.dispatch("load_script_tags",t.trc.jst)},0):TRC.dispatch("load_script_tags",t.trc.jst)),TRC.responseLoaded=!0,TRC.alertVVResponseLoaded&&TRC.alertVVResponseLoaded(TRC.version)),TRC.CustomModulesManager.getCustomModulesFromResponse(t),!(t&&t.trc&&t.trc["vl"]&&t.trc["vl"].length))return __trcError("Invalid response from server: "+t),void this.abortLoadRequest();t.trc["tc"]&&!TRC.taboolaConsole&&TRC.Manager.prototype.loadExternal("//c2.taboola.com/console/console_loader.js","js"),TRC.UserIdMerger.notifyPossibleUserChange(this,TRC.publisherId,t.trc["ui"],t.trc["sd"]),t.trc["cm"]||TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",t.trc["sd"]),!1!==n["local-storage-piggyback"]&&t&&t.trc&&t.trc[TRC.LOCAL_STORAGE_PIGGYBACK]&&TRC.pageManager.storeValue(TRC.LOCAL_STORAGE_PIGGYBACK,t.trc[TRC.LOCAL_STORAGE_PIGGYBACK]),t.trc["DNT"]&&"TRUE"===t.trc["DNT"].toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):(TRC.pageManager.storeUserId(t.trc["ui"],t.trc["cm"]),!0!==n["store-sessiondata-first-party-cookie"]&&"true"!==n["store-sessiondata-first-party-cookie"]||TRC.pageManager.storeSessionId(t.trc["sd"],t.trc["cm"]),TRC.pConsole("page","debug","Storing user-id: "+t.trc["ui"])),e&&(this.trcCache.cacheResponse(e,t,TRC.pageManager.state.moreDispatchParams),this.cachedResponses[e]=!0),n["disable-page-level-feature"]||TRC.pageLevelFeaturesManager.getFeature(t),o.call(this),this.global["enable-old-preloadRequestLoader"]?this.handleLoadResponseFailure():this.checkPreloadRequest(),TRC.dispatch("trcResponseHandled")}catch(e){__trcError("Error in TRC.handleLoadResponse : ",e)}},this.parseResponse=function(t,r){var o,a,s,l,c,d={},h,u,p;this.yieldingEnabled=n(this.preloadRequest,this),this.testData=t.trc["td"],this.experimentsData=t.trc["evi"],this.experimentsHash=t.trc["evh"],this.sourceCategory=t.trc["scat"];var m=this.parseClientGenericAction(t);if(this.initCcpa(m,t),this.initPubConfigGenericActionOverride(m),this.enableTrcRoute&&(h=t.trc["route"])&&(this.trcRoute=h),this.enableLoaderCacheBuster)try{if(window.fetch&&window.Request){var g=TRC.PROTOCOL+"//cdn.taboola.com/libtrc/"+i.publisher+"/loader.js";if(t.trc["lfr"]){var f=new Request(g,{cache:"reload",mode:"no-cors"});fetch(f)}}else __trcWarn("Cache Bust not supported: "+g,e)}catch(e){__trcError("failed to run cache busting on this browser on: "+g,e)}for(initEventsRedirectParams.call(this,t,u,p),this.enableExperimentsVariantIdEvent&&this.experimentsData&&this.buildExperimentsVariantIdParams(),TRC.isAMPSplitFeed&&(this.ampSplitFeedManager.updateFeedIndexAndBatch(t),this.ampSplitFeedManager.cacheOrAssignFeedResponseData(t)),__trcCopyProps(t.trc["f"],this.feedsManager.configs),s=0;s<t.trc["vl"].length;s++)if((l=t.trc["vl"][s])["pcp"]&&TRC.isAMPSplitFeed&&this.ampSplitFeedManager.handlePubCardInResponse(t,s),o=l.uip,this.global["disable-skip-placement"]||!this.shouldSkipPlacement(l,t))if(this.sessionId=t.trc["si"],void 0!==(a=this.getOrCreatePlacementData(o,l))){if(a.unifiedPlacement=l.uuip,a.globalTrcResponseJSON=t.trc,a.trcResponse=l,TRC.fallbackApi.shouldRenderPlacement(l,this.preloadRequest))if(o.search("rbox-tracking")>=0)a.response=this.formatPlacementRecommendations(t,s);else if(this.feedsManager.hasFeedConflict(o,l.fpl))__trcWarn("Feed conflict detected for '"+o+"' with feed placement '"+l.fpl+"' and test data '"+this.td+"' and '"+JSON.stringify(this.experimentsData)+"'"),TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.noItems,o,!0);else{if(l.et&&(a.expandOptions=this.getExpandOptions(l)),a.isCache=r,t.cachedViewId&&(a.cachedViewId=t.cachedViewId),l.fpl){if(this.feedsManager.invalidFeedsMap[l.fpl])continue;this.feedsManager.handleFeedCardPlacement(l,a)}if(TRC.isAMPSplitFeed&&!0===this.ampSplitFeedManager.shouldBreakForAMPSplitFeed)break;if(!a.scriptData&&!a.publisherCardData)if(l.es)TRC.ExternalContainerAppender.move(l.es,a.container);else if(this.isStandaloneVideo(l))a.videoTagLoader=new TRC.VideoTagLoader(this,l.vtag,a,null,{"session-data":t.trc["sd"],req:l["ri"]}),a.videoTagLoader.loadVideo();else if(c=this.formatPlacementRecommendations(t,s,d),a.response=c,this.addFormattedResponseToWidgetAddedFromTrc(l,c,a.addWidget),a.response){a.dc&&delete a.dc;var v=c.trc["video-list"];TRC.FloatingUnitGenerator.isFloatingUnit(v)?this.floatingUnitGenerator=new TRC.FloatingUnitGenerator(c,a,this):(v&&(a["container-selectors"]=v["container-selectors"],a["render-on-orig-container"]=v["render-on-orig-container"]),this.initRBoxDrawingIfPlacementEligible(a))}}}else __trcWarn("Invalid placement in server response",o);else __trcDebug("'parseResponse' : Skip on placement '"+o+"'");if(d.text&&(TRC.cssStack?TRC.cssStack.addStyle("override",d.text,TRC.styleInjected):TRC.dom.injectStyle(d.text)),this.yieldingEnabled){var b=this.global?this.global:{},C=b["yield-delay"]?b["yield-delay"]:0;this.executeRBoxDrawQueue(C)}},this.checkPreloadRequest=function(){for(var e in this.preloadRequest)if(this.preloadRequest.hasOwnProperty(e)&&(placementData=this.preloadRequest[e],this.placementShouldHaveResponseData(placementData,e)&&!this.placementHasResponseData(placementData)&&(__trcWarn("Server did not provide response for '"+e+'"!'),delete this.preloadRequest[e],this.shouldRetryFailedPlacementRequest(placementData)?this.retryFailedPlacementRequest(e,placementData):TRC.dispatch("onRboxFlowError",{placement:e})),this.isActivePlacementData(placementData,e)&&placementData.dc&&placementData.dc.renderAd(),placementData.scriptData&&(TRC.isOptim("defer-scripts")?setTimeout(function(e,t){TRC.ScriptRenderer.render(t.scriptData,t)}.trcBind(null,placementData.scriptData,placementData),0):TRC.ScriptRenderer.render(placementData.scriptData,placementData)),placementData.iframeData)){var t="tb-jp"===this.language?"ja-JP":this.language;TRC.taboolaConnect.createCard(placementData.container,placementData.iframeData.url,placementData.iframeData.config,placementData.placement,t)}},this.initNextUpWidget=function(e,t,i){e.enableSendingNextUpClickAbTestEvent=this.getProperty(i["base-mode"],"send-next-up-click-abtest-event",i["properties-override"])||this.global["send-next-up-click-abtest-event"],e.nupOverlayConfig=this.global["nup-overlay-config"]?__trcUnJSONify(this.global["nup-overlay-config"]):{},TRC.ModuleLoader.load("next-up-widget",TRC.NextUpWidget,function(e,t){new TRC.NextUpWidget(e,this),t["container-selectors"]=[{container:"#tbl-next-up-inner",location:"first",shouldCreateContainer:!0,isNextUp:!0}],this.initRBoxDrawingIfPlacementEligible(t)}.trcBind(this,e,t))},this.initRBoxDrawingIfPlacementEligible=function(e){(void 0!==e.container||e.addWidget)&&(this.yieldingEnabled?this.loadRBoxDrawQueue(e):this.internalDrawRBox(e))},this.buildExperimentsVariantIdParams=function(){var e=this.global["rbox-reported-experiments-layers"]||[2,6];this.experimentsVariantIdParamsStr="",this.experimentsVariantIdParamsMap=Object.keys(this.experimentsData).reduce(function(t,i){return e.indexOf(Number(i))>-1&&(t["tvi"+i]=this.experimentsData[i].split("|")[1]),t}.trcBind(this),{}),this.experimentsVariantIdParamsStr=TRC.TRCLogger.formatParams(this.experimentsVariantIdParamsMap)},this.addFormattedResponseToWidgetAddedFromTrc=function(e,t,i){i&&(this.preloadRequest[e.uip].response=t)},this.getWidgetContainer=function(e,t){var i=e["container"],r=!(0==e["render-on-orig-container"]);if(!doc.querySelectorAll)return i;var n=this.getOrCreateContainerForMoveOrAddWidget(e["container-selectors"],i,t);return n||(r?i:(__trcWarn("TRC.getWidgetContainer: Not falling back to original container even though could not find valid container when trying to move "+t),null))},this.getOrCreateContainerForMoveOrAddWidget=function(e,t,i){if(e)try{for(var r=0;r<e.length;r++){var n=e[r].container,o=e[r].shouldCreateContainer,a=doc.querySelectorAll(n);if(a&&1===a.length){1==o&&(e[r].shouldCreateContainer=!1,a=[this.createNewContainer(e[r].location,a[0])]);var s=this.ensureValidContainer(a[0]);if(s===t)return t;if(s)return e[r].isFloatingUnit||this.cleanContainerClasses(t),s}}__trcWarn("TRC.extractValidContainer: Could not find any valid container when trying to move "+i)}catch(e){__trcError("TRC.extractValidContainer: Error occured while trying to find valid container",e)}return null},this.createNewContainer=function(e,t){var i;return(i=doc.createElement("div")).id=(new Date).getTime(),e&&"first"===e?t.insertBefore(i,t.firstChild):e&&"last"===e&&t.appendChild(i),i},this.cleanContainerClasses=function(e){e&&(e.className="")},this.formatPlacementRecommendations=function(e,t,i){var r=e.trc["vl"][t],n,o=this.preloadRequest[r.uip]||{},a={trc:{req:r["ri"],"session-id":e.trc["si"],"session-data":e.trc["sd"],"user-id":e.trc["ui"],"watched-item":e.trc["wi"],"country-code":e.trc["cc"],"test-variant":e.trc["t"],"is-provider":!!e.trc["iframeData"],uvpw:e.trc["uvpw"],placement:r.uip,mode:o.mode,DNT:e.trc["DNT"],cpb:e.trc["cpb"],sl:e.trc["sl"],pi:e.trc["pi"],bdp:e.trc["bdp"],ppb:r["ppb"],"test-data":e.trc["td"],"placement-group":r["pg"]}};return(r.prty||r.caty)&&(a.trc.prty=r.prty,a.trc.caty=r.caty),e.cached&&(a.cached=!0,a.cachedViewId=e.cachedViewId),r.dc&&"tbl"!==r.typ?a.trc["tag"]=r:a.trc["video-list"]={video:r["v"],"base-mode":r["m"],"test-variant":r["t"],"properties-override":r["po"]?TRC.util.jsonParseWithEval("{"+r["po"]+"}"):null,"container-selectors":r["cs"],"next-up-widget":r["nup"],"taboola-reminder":r["tr"],"render-on-orig-container":r["rooc"],vtag:r["vtag"],pvc:r["pvc"],"content-hub-forced-placement":!!r["chf"]},e.trc["cm"]&&(a.trc["consent-missing"]=e.trc["cm"]),(n=r["csso"])&&(i.text=this.getModeOverrideCss(i,n,o)),r["fpl"]&&(a.feedPlacement=r["fpl"]),e.trc["evi"]&&(a.experimentsData=e.trc["evi"]),a},this.getModeOverrideCss=function(e,t,i){if(t.indexOf("$container_id$")>-1)try{t=TRC.text.replaceAll(t,"\\$container_id\\$","#"+i.container.id,null)}catch(e){t=TRC.text.replaceAll(t,"\\$container_id\\$","",null)}return e.text?e.text+t:t},this.loadSpotlight=function(){document.querySelectorAll&&(this.spotlightLoaded?TRC.dispatch("trc_afterRboxDraw"):(this.spotlightLoaded=TRC.URL.prototype.switchProtocol.call(TRC.getBackstageUrl()+"resources/js/1.1.0/spotlight.js",protocol),this.loadExternal(this.spotlightLoaded,"js")))},this.setCssDivsIds=function(e,t){var i=4;for(var r in e)e.hasOwnProperty(r)&&(e[r].cssDivsArr=[],r&&TRC.util.getRandomIds({arr:e[r].cssDivsArr,len:t,strength:i,prefix:"t",suffix:"_r"}))},this.setLBCssDivsIds=function(e,t){var i=4;TRC.util.getRandomIds({arr:e.iframe,len:t,strength:i,prefix:"t",suffix:"_r"}),TRC.util.getRandomIds({arr:e.topDiv,len:t,strength:i,prefix:"t",suffix:"_r"})},this.getModesCache=function(){if(TRC.modesCache)return TRC.modesCache;for(var e in TRC.modesCache={},this.modes)this.modes.hasOwnProperty(e)&&(TRC.modesCache[e]={});return TRC.modesCache},this.sendUserIdTags=function(e){this.sendExternalTracking(e.data)},this.initFrameworks=function(e){"amp"===e&&TRC.amp?TRC.amp.setAMPmodule(this):"mobile-sdk"!==e||(this.manualVisibilityTrigger=!0)},this.init=function(e){TRC.tlf&&console.timeStamp("init TRCImpl");var t=TRC.URL.prototype.getParameter.call(location.href,"trc_css-isolation")||TRC.pageManager.getValue("trc_css-isolation"),n=TRC.URL.prototype.getParameter.call(location.href,"trc_abp"),a;if(__trcCopyProps(e,this),TRC.util.hasKeys(this["trc-network-mapping"])){TRC.networkId=TRC.publisherId,this.shiftPublisherId(this["trc-network-mapping"]);var s=this["network-pubs-global"];s&&s[TRC.publisherId]&&TRC.util.merge(this.global,s[TRC.publisherId])}i.framework&&this.initFrameworks(i.framework),this.boxes={},this.unique_placement_count={},this.tags=[],this.metadata={},this.cssReset="yes"===t||"no"!==t&&!1!==this.global["css-isolation"],this.trcRequestDelay=this.global["trc-request-delay"]||r,this.trcByPass=!0===this["trc-skip-failover"],this.enablePageGeometry=this.global["has-page-geometry"],this.enablePageGeometryExtended=this.global["has-page-geometry-extended"],this.enableSlotsGeometry=this.global["has-slots-geometry"],this.enableSlotsSaliency=this.global["has-slots-saliency"],this.spatialSlotsThrottleMax=this.global["spatial-slots-throttle-max"],this.spatialSlotsThrottleTH=this.global["spatial-slots-throttle-th"],this.spatialSlotsThrottleTHPerPage=this.global["spatial-slots-throttle-th-per-page"],this.enablePlacementGeometry=this.global["has-mode-geometry"],this.maxRetriesPerFailedPlacementRequest=this.global["max-retries-per-failed-placement-req"]||1,t&&TRC.pageManager.storeValue("trc_css-isolation",t),this.configForPostEvent={available:this.global["send-avail-as-post"],visible:this.global["send-event-as-post"],"new-visible":this.global["send-event-as-post"],explore:this.global["send-explore-as-post"],"content-hub-available":this.global["send-avail-as-post"],"content-hub-visible":this.global["send-event-as-post"],"content-hub-explore":this.global["send-explore-as-post"],perf:!0,"rtb-win":!0},this.configForGetEvent={available:this.global["send-avail-as-get"],visible:this.global["send-visible-as-get"],"new-visible":this.global["send-visible-as-get"],explore:this.global["send-explore-as-get"],"content-hub-available":this.global["send-avail-as-get"],"content-hub-visible":this.global["send-visible-as-get"],"content-hub-explore":this.global["send-explore-as-get"],perf:!1,"rtb-win":!1},this.trcRoute=null,this.enableTrcRoute=!0===this.global["enable-trc-route"],this.enableLoaderCacheBuster=!0===this.global["enable-loader-cache-buster"],this.eventTypesToRoute=this.global["event-types-to-route"]||[],this.enableTrcEventRoute=this.eventTypesToRoute.length>0,this.trcEventRoute=this.enableTrcEventRoute?this.global["default-event-route"]||!1:null,this.enableTrcEventRouteExperiment=!0===this.global["enable-trc-event-route-experiment"],this.enableExperimentsVariantIdEvent=this.global["enable-experiments-variant-id-event"],this.enableLoaderTypeEvent=this.global["enable-loader-type-event"],this.isDeferredAvailable=this.global["enable-deferred-available"],this.enableExpoImageTag=!1!==this.global["enable-expo-img-tag"],this.trcParams=TRC.pageManager.additionalDispatchParams(),this.trcCacheClean=this.global["clean-trc-cache"],o(this.global),this.trcCache=this.global["enable-trc-cache"]?new TRC.TrcCache(this.global["trc-cache-conf"]||{}):null,this.trcCacheItemType=this.global["trc-cache-it"],this.disableReadMore=!1===this.global["enable-read-more"]||!1===this.disableReadMore,this.blockVideoLoader=this.shouldBlockVideoLoader(this.global["block-video-prob"]),this.blockThumbnailVideoLoader=this.shouldBlockThumbnailVideoLoader(this.global["block-thumbnail-video-prob"]),this.global["enable-consent"]&&this.setConsentConfig(this.consentConfigOverride,this.global["consent-presets"]),TRC.getBackstageUrl=function(){var e=TRC.backstageDomainPrefix||"backstage",t=TRC.backstageDomainSuffix||"taboola.com";return this["backstage-domain-url"]||"https://"+e+"."+t+"/backstage/"}.trcBind(this),n?this.setABPEmulation(n):this.global["abp-detection-enabled"]?TRC.blocker.blockedState=TRC.blocker.getBlockedState(this.global["abp-detection-class-names"]||["banner_ad","sponsored_ad"],this.global["abp-ignore-cached-state"]):TRC.blocker.blockedState=TRC.blocker.states.ABP_DETECTION_DISABLED,TRC.styleInjected||this.global["enable-mode-injection"]||this.bakedStyelInjection(),this.domain=TRC.shiftDomain(this.global["requests-domain"]?this.global["requests-domain"]:"trc.taboola.com"),this.origin instanceof Array||(this.origin=[this.origin]),null!=this.userMetadata?this.metadata.user=__trcJSONify(this.userMetadata):void 0===win["trc_user_id"]?this.metadata.user=this["get-user"]():this.metadata.user=win["trc_user_id"];try{TRC.pConsole("page","debug","Hook : publisher_start",this["publisher-start"].toString()),this["publisher-start"]()}catch(e){__trcError("Error running publisher-start",e)}this.metadata.uploader=this["get-creator"](),this.tags=this["get-tags"]();try{this.metadata.v=this["get-views"](),this.metadata.r=this["get-rating"](),this["metafields"].split(",").forEach(function(e){e&&(this.metadata[e]=this["get-"+e]?this["get-"+e]():this.readMetaTag(e))}.trcBind(this))}catch(e){}this.initFraudDetection(),TRC.listen("send_user_id",this.sendUserIdTags.trcBind(this)),TRC.listen("load_script_tags",this.loadScriptTags.trcBind(this)),window.context&&window.context.data&&window.context.data.feedContainerNum&&parseInt(window.context.data.feedContainerNum,10)>=1&&(TRC.isAMPSplitFeed=!0,TRC.feedContainerNum=window.context.data.feedContainerNum),!(!TRC.mobile||!TRC.mobile.reportClick)||TRC.isAMP||!TRC.util.isPercentEnabled(this.global,"spa-detection-enabled")||TRC.ModuleLoader.load("spa-detector",TRC.SpaDetector,function(){TRC.SpaDetector.getInstance(this)}.trcBind(this)),TRC.util.isPercentEnabled(this.global,"guarantee-card-clash-detection")&&TRC.ModuleLoader.load("card-interference-detector",TRC.CardInterferenceDetector,function(){}),TRC.pageManager.initReferrer(this.global),this.init=function(){},TRC.isInteractive=!1,TRC.isPageLoaded=!1,this.trcCacheClean&&!this.trcCache&&(this.trcCache=new TRC.TrcCache({},!0),this.trcCache=null),this.listenToRenderedModes(),this.global["enable-always-track"]&&!TRC.pushedRboxTracking&&(c(),TRC.pushedRboxTracking=!0)},this.initFraudDetection=function(){this.shouldEnableFraudDetection()&&TRC.listen("trcResponseHandled",this.enableFraudDetection.trcBind(this))};var a=null;this.getExpoImageTag=function(){return null!==a?a:(a="",this.enableExpoImageTag&&null!==this.getSystemFlag("imageExternal")&&(a="tb_expo_img="+this.getSystemFlag("imageExternal")),a)};var s=null,l=null;function c(){if(document.body){var e="rbox-tracking",t=e+"-div";if(!document.getElementById(t)){var i=document.createElement("div");i.id=t,document.body.appendChild(i).style.display="none"}win._taboola.push({mode:e,container:t})}}return this.getLoaderTypesValue=function(){if(l)return s;if(s="",l={},!this.enableLoaderTypeEvent)return s;this.systemFlags.loaderType&&(s="lti="+this.systemFlags.loaderType,l["lti"]=this.systemFlags.loaderType);var e=this.systemFlags.eventExternal;return e?(Object.keys(e).forEach(function(t){s+=(s?"&":"")+"ex_"+t+"="+e[t],l["ex_"+t]=e[t]}),s):s},this.getLoaderTypesObject=function(){return l||this.getLoaderTypesValue(),l},this.ABPswap=function(e){return TRC.text.replaceAll(e,"\\."+TRC.SYNDICATED_CLASS_NAME+"|"+"\\."+TRC.SPONSORED_CONTAINER_CLASS_NAME,function(e){return"."+this[e.slice(1)]},this.global["switch-abp-class"])},this.stackedStyleInjection=function(e,t,i,r){TRC.cssStack||(TRC.cssStack=new TRC.css.Stack({idPrefix:"tab_",stack:[{type:"default",cssText:e+(i||"")},{type:"mode",cssText:""},{type:"publisher",cssText:t},{type:"custom",cssText:""}]},r))},this.bakedStyelInjection=function(){var e=this.defaults.style+this.global.style;TRC.blocker.blockedState>0&&this.global["switch-abp-class"]&&(e=this.ABPswap(e)),this.cssReset?(this.setLBCssDivsIds(TRC.lightBoxCssReset={iframe:[],topDiv:[]},this.numOfResetCssDivs),this.setCssDivsIds(this.getModesCache(),this.numOfResetCssDivs),TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(e,TRC.modesCache,TRC.lightBoxCssReset)),__trcInfo("CSS Isolation is active")):this.global["css-ie-split"]&&TRC.Browser["ieUpto"](9)?TRC.css.utils.setStyleElements(TRC.css.utils.setStyleTextIdPrefix(e,null,TRC.lightBoxCssReset)):TRC.dom.injectStyle(e)},this.setABPEmulation=function(e){TRC.blocker.blockedState=e,this.global["abp-detection-enabled"]=!0,this.global["use-abp-uim"]=!0,TRC.pConsole("page","warn","emulating Ad Blocker Plus detection.")},this.setConsentConfig=function(e,t){TRC.consent.hasCMP()||(t&&TRC.consent.setPresets(t),e?TRC.consent.setConsentSource(TRC.util.merge({source:"iab_override"},e)):"function"==typeof window.__tcfapi?TRC.consent.setConsentSource({source:"tcf"}):"function"==typeof window.__cmp&&TRC.consent.setConsentSource({source:"iab"}))},this.countTrcContainerMissingError=0,this.ensureValidContainer=function(e,t){var i=e,r="trc_related_container",n,o,a=" "+r+" trc_spotlight_widget"+(TRC.dom.isInIframe(!0)?" trc_in_iframe":"")+("rtl"===this.direction?" tbl-rtl":"");if("string"==typeof e&&(e=document.getElementById(e),t&&!e))return null;if("object"!=typeof e&&(e=null),null!=e){if(e.className.match(r))return e;for(;e.hasChildNodes();)e.removeChild(e.firstChild);return e.origClassName=e.className,e.className+=a,e}return null!=(e=document.getElementById(r))?(e.className.search(r)<=0&&(e.origClassName=e.className),e.className+=a,e):document.body?(this.countTrcContainerMissingError<2&&(this.countTrcContainerMissingError+=1,__trcError("Didn't manage to find TRC container for R-Box with ID "+i+" (retry="+this.countTrcContainerMissingError+") "+(TRC.dom.isReady?"(Document is Ready)":"")+"!")),null):null},this.getPublisherVersion=function(){try{if(TRC.baseDomain.search(TRC.publisherId)>=0){var e=TRC.baseDomain.split("/");if(""==e[e.length-1]&&e.pop(),e[e.length-1]!=TRC.publisherId)return e[e.length-1]}}catch(e){}return"default"},this.getItemType=function(){switch(TRC.listOrigin.getSource()){case"h":return"home";case"c":return"category";case"t":return"text";case"s":return"search";case"p":return"photo";case"o":return"other";case"z":return"content_hub";case"v":default:return"video"}},this.getUserLanguages=function(){return navigator.languages||(navigator.language?[navigator.language]:[])},this.playVideo=function(e){TRC.RBoxUsage.logUsage("TRCImpl.playVideo");try{TRC.dispatch("videoPlaying",e)}catch(e){__trcError("Problem in playVideo:videoPlaying",e)}if(void 0!==e.id&&win.trc_video_id!=e.id){var t=TRC.listOrigin.getSource();void 0===e.url&&(win.trc_video_id||"v"!=t?e.url=null:(e.url=this.getAutoItemMeta("item-url",null,this.urlPreNormalizer,this["normalize-item-url"]),this.trc_url_auto_detection=e.id)),win.trc_video_id=e.id,win.trc_item_url=e.url,null!=this.delayedDispatchLoadRequest&&this.delayedDispatchLoadRequest()}},this.setUser=function(e){this.userMetadata=e,TRC.pConsole("page","info","user meta data ",e,"object")},this.calculatePlacement=function(e){if(e["mode_name"].search("rbox-tracking")>=0)return e["mode_name"];var t=e["mode_name"]+(e["category"]?"!"+e["category"]:"");return void 0!==this.unique_placement_count[t]&&(t+="#"+ ++this.unique_placement_count[t]),t},this.computeRBoxOptions=function(e){return"string"==typeof e&&(e={mode_name:e}),e.pubOpts?e:(e.pubOpts=__trcCopyProps(e,{}),e.on_error&&TRC.fallbackApi.setOnError(e),e["tracking"]=(this.tracking?this.tracking:"")+(e["tracking"]?e["tracking"]:""),e["target_type"]=e["target_type"]||this.target_type||this.getProperty(e["mode_name"],"target_type")||"video",e["origin"]=new TRC.ListOriginBuilder(TRC.listOrigin.getSource(),e["target_type"]),e["mode_name"]=!!e["mode"]&&e["mode"]||!!e["mode_name"]&&e["mode_name"]||!!win["trc_mode_name"]&&win["trc_mode_name"]||"rbox-"+e["origin"].toString(),e["mode_name"]=e["mode_name"].replace(/\s+/g,""),e["category"]=!!e["category"]&&e["category"],e["link_target"]=e["link_target"]||this.link_target,void 0===e["placement"]&&(e["placement"]=this.calculatePlacement(e)),this.unique_placement_count[e["placement"]]=0,e["visible"]="boolean"==typeof e["visible"]?e["visible"]:!this.invisible,"string"==typeof e["autoplaybox"]&&(e["autoplaybox"]=document.getElementById(e["autoplaybox"])),!e["player"]&&!0!==e["slider"]&&e["visible"]&&(e["original_container"]=e["container"],e["container"]=this.ensureValidContainer(e["container"])),e.addWidget||(e.response=null),e.computed=!0,e)},this.listenToPlayer=function(e,t){var i="trc_related_container",r="rtl"===this.direction?" tbl-rtl":"",n;n=TRC.listen("videoPlaying",function(o){var a=document.getElementById(o.player_id),s;a?TRC.dom.isAncestor(t,a,!0)?(n.remove(),TRC.listen("videoPlaying",function(e){e.player_id===t.player_id?s.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for videoPlaying")}),t.player_id=o.player_id,e["container"]&&("string"==typeof e["container"]&&(e["container"]=document.getElementById(e["container"])),s=e["container"]),s||(e["container"]=s=document.createElement("div")),s.className=i+" trc-inplayer-rbox"+r,s.style.left="-999999em",s.style.width=a.offsetWidth+"px",s.style.marginTop="-"+a.offsetHeight+"px",t.appendChild(s),TRC.kaltura_API&&TRC.Browser.firefox&&(delete TRC.kaltura_API,TRC.kaltura_support()),e.getListId=function(){return"rplayer-after"},e.list_id=e.getListId(),e.loaded=!0,this.internalDrawRBox(e)):__trcError("TRC.listenToPlayer: object with player_id wasn't found in playerContainer that was passed"):__trcError("TRC.listenToPlayer: wrong player_id was passed")}.trcBind(this)),TRC.listen("videoDone",function(i){var r=e["container"];r?i.player_id===t.player_id?r.style.left="0":__trcError("TRC.listenToPlayer: wrong player_id was used for videoDone"):__trcError("TRC.listenToPlayer:videoDone mainContainer wasn't found")}),TRC.ooyala_API&&(TRC.listen("ooyala_stateChanged",function(i){var r=e["container"];r&&(i.player_id===t.player_id?r.style.left="-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_stateChanged"))}),TRC.listen("ooyala_activePanelChanged",function(i){var r=e["container"];r&&(i.player_id===t.player_id?r.style.left="more"===i["activePanel"]||"info"===i["activePanel"]?"0":"-999999em":__trcError("TRC.listenToPlayer: wrong player_id was used for ooyala_activePanelChanged"))}))},this.loadRBoxDrawQueue=function e(t){function i(e){if(!this.urlOverrideYieldArr){var t=TRC.URL.prototype.getParameter.call(win.location.href,"yield-batch");this.urlOverrideYieldArr=t?t.split("|"):[]}return this.urlOverrideYieldArr.indexOf(e)>-1}if(i(t.placement)&&(t.modeGroupOrder=0),this.itemsToDraw=this.itemsToDraw||[],this.itemsToDrawWithoutOrder=this.itemsToDrawWithoutOrder||[],void 0!==t.modeGroupOrder){var r=parseInt(t.modeGroupOrder,10);isNaN(r)?this.itemsToDrawWithoutOrder.push(t):(this.itemsToDraw[r]=this.itemsToDraw[r]||[],this.itemsToDraw[r].push(t))}else this.itemsToDrawWithoutOrder.push(t)},this.executeRBoxDrawQueue=function e(t,i){TRC.yieldingOrderArr=TRC.yieldingOrderArr||[];var i=i||0;TRC.taboola_yield_report&&0==i&&(console.time("executeRBoxDrawQ"),performance.mark("start executeRBoxDrawQueue")),this.itemsToDrawWithoutOrder.length>0&&(this.itemsToDraw.push(this.itemsToDrawWithoutOrder),this.itemsToDrawWithoutOrder=[]);var r=this.itemsToDraw.shift();if(TRC.yieldingOrderArr.push(r?r.length:0),r){TRC.taboola_yield_report&&(console.time("executeRBoxDrawQueue batch-"+i),performance.mark("start executeRBoxDrawQueue batch-"+i));var n={};r.forEach(function e(t){var i=this.internalDrawRBox(t);i&&(n[i.id]=i)}.trcBind(this)),TRC.dispatch("batchrender",{data:{boxes:n}}),TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQueue batch-"+i),performance.mark("end executeRBoxDrawQueue batch-"+i))}var o=function(e,t){this.executeRBoxDrawQueue(e,t)}.bind(this);if(this.itemsToDraw.length>0)return r?void TRC.Timeout.set(function(){o(t,++i)},t):void o(t,++i);TRC.taboola_yield_report&&(console.timeEnd("executeRBoxDrawQ"),performance.mark("end executeRBoxDrawQueue"),performance.measure("total rbox rendering time","start executeRBoxDrawQueue","end executeRBoxDrawQueue"));var a=this;i>0&&(a={boxes:{}}),TRC.dispatch("allrender",{data:a})},this.internalDrawRBox=function(e){var t,i="widget";if(e["container"]=this.getWidgetContainer(e,i),(e=this.computeRBoxOptions(e))["player"]){var r=e["player"];return delete e["player"],void this.listenToPlayer(e,document.getElementById(r))}if(t=e["container"]){if(e["visible"]||(t.style.display="none"),e["spotlight"]&&t.setAttribute("data-spotlight-publisher-id",e["spotlight-publisher-id"]),null!=e.response||!this.loadCalled||void 0===this.preloadRequest[e["placement"]]||(e.response=this.preloadRequest[e["placement"]].response,__trcCopyProps(e,this.preloadRequest[e["placement"]]),null!=e.response)){try{TRC.SpotlightLoader.registerOnMainContainer(t,e.response)}catch(e){__trcError("Error while trying to register Spotlight data on main container")}return e.trcResponse&&e.trcResponse.multiWidget?(TRC.multiWidget.init.call(this,{originalContainer:t,multiWidget:e.trcResponse.multiWidget,widgetOptions:e,initRBox:this.initRBox,trcManager:this}),this.boxes):this.initRBox.call(this,t,e)}this.preloadRequest[e["placement"]]["container"]=e["container"]}},this.createCssResetContainers=function(e,t){for(var i=TRC.modesCache[t]?TRC.modesCache[t].cssDivsArr:[],r,n=e,o,a=i.length-1;a>=0;a--)(o=document.createElement("div")).id=i[a],o.className="trc_isolation",o.appendChild(n),n=o;return n},this.handleAMPSplitFeedRequest=function(e){if(void 0===this.ampSplitFeedManager){var t=1===parseInt(window.context.data.feedContainerNum,10);this.ampSplitFeedManager=new TRC.AmpSplitFeedManager(this,t)}!0!==this.ampSplitFeedManager.didInit&&this.ampSplitFeedManager.checkAMPSplitFeedFlagsAndInit(e,this.ampSplitFeedManager.initAmpSplitFeedIframe.trcBind(this.ampSplitFeedManager))},this.handlePushedRequest=function(e){this.global["disable-skip-load-request"]||!this.shouldSkipPushedRequest(e)?TRC.isAMPSplitFeed?this.handleAMPSplitFeedRequest(e):e[Object.keys(e)[0]]&&e[Object.keys(e)[0]].rec?(this.preloadRequest=e,this.handleLoadResponse("",e[Object.keys(e)[0]].rec)):this.dispatchRequestWrapper(e):__trcDebug("'handlePushedRequest' : Skip on push request")},this.dispatchRequestWrapper=function(e){this.loadCalled=!0,this.dispatchLoadRequest(e),this.isPendingLoadRBox=!1},this.dispatchCMPRequest=function(e,t){var i=parseInt(1e5*Math.random());this.pendingRequests[i]=1,TRC.cmp("getConsentData",null,function(r){e.pendingRequests[i]&&(delete e.pendingRequests[i],e.consentState=r,e.handlePushedRequest(t))}),this.global["max-wait-for-cmp"]&&TRC.Timeout.set(function(){e.pendingRequests[i]&&TRC.consent.setConsent({wasTimeout:!0})},this.global["max-wait-for-cmp"])},this.dispatchAmpConsentRequest=function(e,t){if(!1===this.global["amp-consent-enable"])e.handlePushedRequest(t);else{var i=parseInt(1e5*Math.random());this.pendingRequests[i]=1,TRC.consent.getAMPConsent(function(r,n){e.pendingRequests[i]&&(delete e.pendingRequests[i],n&&(e.consentState=n),TRC.cexConsentData=r,e.handlePushedRequest(t))},this.global["amp-support-consent-string"]),this.global["max-wait-for-cmp"]&&TRC.Timeout.set(function(){e.pendingRequests[i]&&(e.consentState={wasTimeout:!0})},this.global["max-wait-for-cmp"])}},this.getUSPData=function(e){if(!1!==this.global["ccpa-ps-enable"]&&"function"==typeof __uspapi)try{__uspapi("getUSPData",1,function(t,i){i&&t&&e(t.uspString)})}catch(e){__trcError("Error while calling __uspapi for getUSPData",e)}},this.loadRBox=function(){var e=arguments,t=Array.prototype.slice.call(arguments),i={},r,n=40,o=this;if(!(t.length<1))try{if(this.isPendingLoadRBox||this.preloadRequestLoader)return void setTimeout(function(){this.loadRBox.apply(this,e)}.trcBind(this),100);t[0]instanceof Array&&(t=t[0]),this.till_request_count=0;for(var a=0;a<t.length;a++)t[a]["player"]||this.till_request_count++;function s(e,t){var i={};i[t.placement]=t,this.handlePushedRequest(i)}for(;t.length;)if((r=this.computeRBoxOptions(__trcCopyProps(t.shift(),{})))["player"]||!0===r["slider"])!0===r["slider"]&&this.createContainerForEscalatorWidget(r),TRC.Timeout.set(s.trcBind(this,i,r),0);else{if(i[r.placement])throw new Error("Placement '"+r.placement+"' is not unique in loadRBox()!");i[r.placement]=r,function(e,t,i){if(this.isPendingLoadRBox=!0,e.container&&1===e.container.nodeType)this.till_request_count--;else{if(!TRC.dom.isReady)return!e["player"]&&e["visible"]&&(e["container"]=this.ensureValidContainer(e["original_container"])),void TRC.Timeout.set(arguments.callee.trcBind(this,e,t,i),t);this.error("Invalid container provided for request "+e.placement+" ("+e.container+")!"),delete i[e.placement],this.till_request_count--}this.till_request_count<=0&&(TRC.isAMP?this.dispatchAmpConsentRequest(o,i):TRC.consent.hasCMP()?this.dispatchCMPRequest(o,i):this.handlePushedRequest(i))}.trcBind(this,r,n,i)()}}catch(e){throw __trcError("Error in loadRBox()",e),e}},this.parseLoaderParams(i),TRC.dom.init(),this.init(t),this},protocol=TRC.PROTOCOL;TRC.recoRequestsQueue=new TRC.TasksExecutorQueue,Manager.prototype["list-size"]=0,Manager.prototype.MAX_RETRY=2,Manager.prototype.drawInterface=!1,Manager.prototype.delayedDispatchLoadRequest=null,Manager.prototype.invisible=!1,Manager.prototype.excludedItems=null,Manager.prototype.boxes={},Manager.prototype.itemid=null,Manager.prototype.itemurl=null,Manager.prototype.tags=[],Manager.prototype.metadata={},Manager.prototype.userMetadata=null,Manager.prototype.loadCalled=!1,Manager.prototype.unique_placement_count={},Manager.prototype.trc_url_auto_detection=null,Manager.prototype.shiftPublisherId=function(e){var t=TRC.URL.prototype.getParameter.call(location.href,"taboola_sim_domain")||TRC.URL.prototype.getParameter.call(location.href,"fakeurl"),i=win.trc_item_url?new TRC.URL(win.trc_item_url):null,r=(t||(i?i.host:null)||location.host).toLowerCase(),n=(t||(i?i.href:null)||location.href).toLowerCase(),o=e[r],a="/",s=["m","mobile","www2","www3"],l,c,d,h,u,p;if(!o){for(__trcToArray(e,l=[]),l.sort(function(e,t){return e[0].length>t[0].length?-1:e[0].length<t[0].length?1:0}),c=0,d=l.length;c<d;c++)if((h=l[c][0].toLowerCase()).indexOf(a)>0){if(n.match(h)){o=l[c][1];break}if(h.indexOf("www.")>-1&&n.match(h.replace("www.",""))){o=l[c][1];break}}else if(r.match(h)){o=l[c][1];break}if(!o&&r.indexOf("www.")<0){for(c=0,d=s.length;c<d&&(u=new RegExp("(https://|http://|^)"+s[c]+"."),!(o=e[p=r.replace(u,"www.")]));c++);o||(o=e[p="www."+r])}}TRC.publisherId=o||"unknown-site-on-"+TRC.publisherId,TRC.pConsole("page","info","in 'Network-Solution' : publisher-id was set to - "+TRC.publisherId,"")},Manager.prototype.widgetContainerReset=function(){for(var e in this.boxes)if(this.boxes.hasOwnProperty(e)){var t=this.boxes[e].container,i;if(t){for(i=t.getAttribute(TRC.intersections.TARGET_ATTRIB),t.className=t.origClassName,delete t._trc_container,delete t._trc_anonbox;t.hasChildNodes();)t.removeChild(t.lastChild);i&&TRC.intersections.unobserveAll(i)}TRC.Timeout.reset(),TRC.Interval.reset(),delete this.boxes[e]}},Manager.prototype.getProperty=function(e,t,i){return i&&i.hasOwnProperty(t)&&void 0!==i[t]?i[t]:void 0===this.modes||void 0===this.modes[e]||void 0===this.modes[e][t]?this[t]:TRC.propertiesOverride&&void 0!==TRC.propertiesOverride[t]?TRC.propertiesOverride[t]:this.modes[e][t]},Manager.prototype.runHook=function(e,t,i,r,n){var o=Array.prototype.slice.call(arguments,5),a=this.getFunction(t,i,r,o);return n&&TRC.CustomModulesManager.dispatchHook(i,t,e,o),a},Manager.prototype.getFunction=function(e,t,i,r){this.global["disable-runHook"]&&(r=Array.prototype.slice.call(arguments,3));var n=this.getProperty(e,t,i);if("function"==typeof n)return TRC.pConsole(e,"debug","Hook : "+t,n.toString(),"function"),n.apply(this,r)},Manager.prototype.readMetaTag=function(e){for(var t=document.head.getElementsByTagName("meta"),i=null,r=0;r<t.length;r++)if(t[r].name){if(t[r].name.toLowerCase()=="item-"+e.toLowerCase())return t[r].content;t[r].name.toLowerCase()==e.toLowerCase()&&(i=t[r].content)}return i},Manager.prototype.get_intent=function(){var e=win.location.href,t=TRC.pageManager.getPublisherValue(TRC.publisherId,"auto-play-intent");if(null!=t){var i=t.split(":");if(parseInt(i[0])>(new Date).getTime()-3e4&&i[1]==this.getItemId())return void 0!==i[2]?i[2]:"n"}return e.search(this.getItemId())>=0?"s":"u"},Manager.prototype["get-creator"]=function(){return this.readMetaTag("uploader")||this.readMetaTag("creator")},Manager.prototype["get-tags"]=function(){},TRC.implClasses=TRC.implClasses||{},Manager.prototype.logTrcEvent=function(e,t,i,r,n){var o=!1,a,s,l,c,d;if(t.tim=__trcClientTimestamp(),t.id=parseInt(1e4*Math.random()),t.llvl=win.trc_debug_level,this.global["tmp-disable-cv"]||(t.cv=this.version),this.configForPostEvent[e])try{if(a=this.global["send-full-list"]&&i?__trcCopyProps(t,{},i):t,c=this.shouldPostEventAsAjax(e),l=(s=(d=this.global["rbox-ajax-post-events-full-rollout"])?"":"new-")+e,c)try{this.logPostTrcEventAsAjax(l,a)}catch(o){!1!==this.configForGetEvent[e]&&d||(t.fbe=1,this.logGetTrcEvent(l,t,r,i,n))}d||this.logPostTrcEvent(e,a)}catch(e){o=!0,__trcError("Error in sending post event",e)}(o||!1!==this.configForGetEvent[e]||!0!==this.configForPostEvent[e])&&((!1===this.configForGetEvent[e]||o)&&(t.fbe=1),this.logGetTrcEvent(e,t,r,i,n))},Manager.prototype.isValidForFill=function(e,t){try{if(("available"==e||"visible"==e)&&this.global["enable-get-fil"]&&this.global["get-fil-n-items"]>=this.preloadRequest[t].response.trc["video-list"].video.length)return!0}catch(e){}return!1},Manager.prototype.shouldEnableFraudDetection=function(){var e,t,i;return!!this.global["test_for_fraud"]&&(0!==(t=this.global["fraud-traffic-percentage"])&&(t=t||10,(i=Math.floor(100*Math.random()))<=t))},Manager.prototype.enableFraudDetection=function(){if(!TRC.clickFraudDetect.isInitialized)try{TRC.clickFraudDetect.init(TRC.publisherId,TRC.pageManager.getValue("user-id"),this.getReferrer(),this,TRC.pageManager.getPageData())}catch(e){__trcWarn("failed to init fraud detection")}},Manager.prototype.logGetTrcEvent=function(e,t,i,r,n){this.trcEventRoute&&this.eventTypesToRoute.indexOf(e)>-1?(this.logGetTrcEventImpl(this.trcEventRoute,e,t,i,r,n),this.enableTrcEventRouteExperiment&&this.logGetTrcEventImpl(this.domain,e,t,i,r,n)):this.logGetTrcEventImpl(this.domain,e,t,i,r,n)},Manager.prototype.logGetTrcEventImpl=function(e,t,i,r,n,o){var a,s;for(var l in TRC.tlf&&console.time("in logGetTrcEvent - "+t),i)i.hasOwnProperty(l)&&(i[l]=this["normalize-log-param"](l,i[l]));t=this["normalize-log-param"]("type",t),this.isValidForFill(t,o)&&(i=__trcCopyProps(i,{},n));try{a=this.composeGetURL(t,i),s=new Image,this.eventLogger.push(s),r&&(s.onload=s.onerror=function(){if("function"==typeof r)try{r()}catch(e){__trcError("Error in event callback",e)}return!0}),s.src=a}catch(e){__trcError("Error in sending event",e)}TRC.tlf&&console.timeEnd("in logGetTrcEvent - "+t),TRC.performance&&"available"===t&&TRC.performance.mark("8.1.9"),TRC.performance&&"visible"===t&&TRC.performance.mark("9.1.9")},Manager.prototype.logPostTrcEvent=function(e,t){this.trcEventRoute&&this.eventTypesToRoute.indexOf(e)>-1?(this.logPostTrcEventImpl(this.trcEventRoute,e,t),this.enableTrcEventRouteExperiment&&this.logPostTrcEventImpl(this.domain,e,t)):this.logPostTrcEventImpl(this.domain,e,t)},Manager.prototype.logPostTrcEventImpl=function(e,t,i){TRC.tlf&&console.time("in logPostTrcEvent - "+t);var r,n=this["normalize-log-param"]("publisher",TRC.publisherId),t,o="tb-trc-transportFrame-"+(t=this["normalize-log-param"]("type",t))+"-"+i.id,a=this.getTransportForm(o),s=document.getElementById(o),l;for(var c in i)i.hasOwnProperty(c)&&((r=doc.createElement("input")).name=("_"==c.charAt(0)?c.substr(1):c).replace(/unescape-/g,""),r.type="hidden",r.value=this["normalize-log-param"](c,i[c]),a.appendChild(r));if(!s)throw new Error("post iframe can be created");TRC.Browser.ie&&((l=s.contentDocument?s.contentDocument:s.contentWindow.document).write(""),l.close());var d=[];this.trcByPass&&d.push("trc_skip_failover=yes"),this.enableTrcRoute&&this.trcRoute&&d.push("route="+this.trcRoute),this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr&&d.push(this.experimentsVariantIdParamsStr),this.getLoaderTypesValue()&&d.push(this.getLoaderTypesValue()),a.action=protocol+"//"+e+"/"+n+"/log/3/"+escape(t)+(d.length>0?"?"+d.join("&"):""),a.submit(),TRC.tlf&&console.timeEnd("in logPostTrcEvent - "+t),TRC.performance&&"available"===t&&TRC.performance.mark("8.2.9"),TRC.performance&&"visible"===t&&TRC.performance.mark("9.2.9")},Manager.prototype.getTransportForm=function(e){var t,i;return(i=doc.createElement("form")).className="trc-hidden "+TRANSPORT_FORM_ELEMENT,i.target=e,i.style.display="none",i.method="post",doc.body.appendChild(i),(t=doc.createElement("span")).className=TRANSPORT_FORM_ELEMENT,t.innerHTML='<iframe class="trc-hidden" id="'+e+'" name="'+e+'" width="0" height="0" style="display:none"></iframe>',doc.body.appendChild(t),i},Manager.prototype.shouldPostEventAsAjax=function(e){var t=this.global["rbox-post-events-as-ajax"];return t&&("boolean"==typeof t||-1!==t.indexOf(e))},Manager.prototype.logPostTrcEventAsAjax=function(e,t){var i=!1,r=win.XDomainRequest||TRC.Browser.ieUpto(9);if(!r)try{this.queryParamsObj=__trcCopyProps(this.experimentsVariantIdParamsMap,{}),this.enableTrcRoute&&this.trcRoute&&(this.queryParamsObj.route=this.trcRoute),__trcCopyProps(this.getLoaderTypesObject(),this.queryParamsObj);var n=function(i,r){TRC.util.isPercentEnabled(i.global,"enable-bulk-events")&&i.global["bulk-"+e+"-events-strategy"]?TRC.TRCBulkLogger.bulkPost(r,e,t,null,i.queryParamsObj):TRC.TRCLogger.post(r,e,t,null,i.queryParamsObj)};this.trcEventRoute&&this.eventTypesToRoute.indexOf(e)>-1?(n(this,protocol+"//"+this.trcEventRoute),this.enableTrcEventRouteExperiment&&n(this,protocol+"//"+this.domain)):n(this,protocol+"//"+this.domain)}catch(e){i=!0,__trcError("Error in sending post event as ajax",e)}(r||i)&&this.logPostTrcEvent(e,t)},Manager.prototype.log1=function(e,t,i,r,n,o){var a=e+":"+(n||t.li+t.ii)+t.ri;t.ii&&t.it&&(a=e+":"+t.li+t.ii+t.ri),this.eventCounter[a]?this.eventCounter[a]++:("function"==typeof o?o():this.logTrcEvent(e,t,i,r,n),this.eventCounter[a]=1)},Manager.prototype.loadExternal=function(){return TRC.net.loadScript.apply(null,arguments)},Manager.prototype.parseLoaderParams=function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if("unknown"==i)continue;switch("auto"==i&&(i=""),t){case"visible":this.invisible=!("boolean"==typeof i?i:"false"!=i);break;case"video":win.trc_video_id=i,TRC.listOrigin.setSource("v");break;case"url":win.trc_item_url=i;break;case"article":win.trc_article_id=i,TRC.listOrigin.setSource("t");break;case"category":win.trc_article_id=i,TRC.listOrigin.setSource("c");break;case"home":case"homepage":win.trc_article_id=i,TRC.listOrigin.setSource("h");break;case"search":win.trc_article_id=i,TRC.listOrigin.setSource("s");break;case"photo":win.trc_article_id=i,TRC.listOrigin.setSource("p");break;case"other":win.trc_article_id=i,TRC.listOrigin.setSource("o");break;case"content_hub":win.trc_article_id=i,TRC.listOrigin.setSource("z");break;case"link_target":this.link_target=i;break;case"video_source":this.video_source=i;break;case"callback":this.video_player_callback=i;break;case"player_reference":this.video_player_reference=i;break;case"target_type":TRC.listOrigin.setTarget(this.target_type=i);break;case"exclude":this.excludedItems=i instanceof Array?i:[i];break;case"tracking":this.tracking=i;break;case"referrer":TRC.pageManager.updateReferrer(i);break;case"amp_disable_resize":this.amp_disable_resize=i;case"user_opt_out":this.userOptOut=!(!i||"false"==i||"0"==i);break;case"device":this.deviceId=i;break;case"unified_id":this.unifiedId=i;break;case"user_type":this.userType=i;break;case"paywall":this.paywall=i;break;case"premium":this.premium=!!i;break;case"advertorial_source":this.advertorialSource=i;break;case"external_page_view":this.external_page_view=i;break;case"tracking_codes":this.tracking_codes=i;break;case"additional_data":this.additional_data=i;break;case"framework":this.framework=i;break;case"iab_alternative_config":this.consentConfigOverride=i;break;case"consentMessage":TRC.consent.setConsent(i)}}},Manager.prototype.getItemByMetaValue=function(e){for(var t=document.head.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].name==e)return t[i].content;return null},Manager.prototype.getItemByCanonicalValue=function(e,t){for(var i=document.head.getElementsByTagName("link"),r=0;r<i.length;r++)if("canonical"==i[r].rel)return t.call(this,e,i[r].href);return null},Manager.prototype.getItemByOgValue=function(e,t){for(var i=document.head.getElementsByTagName("meta"),r=0;r<i.length;r++)if("og:url"==i[r].getAttribute("property")&&i[r].content.length>5)return t.call(this,e,i[r].content);return null},Manager.prototype.getItemByLocationValue=function(e,t){return t.call(this,e,TRC.pageManager.getCurrentURL().toString())},Manager.prototype.getItemByParamUrl=function(e,t){return!win.trc_item_url||"item-id"!=e&&"item-url"!=e?null:t.call(this,e,win.trc_item_url)},Manager.prototype.getAutoItemMeta=function(e,t,i,r){var n=["paramUrl","meta","canonical","og","location"],o={paramUrl:"getItemByParamUrl",meta:"getItemByMetaValue",canonical:"getItemByCanonicalValue",og:"getItemByOgValue",location:"getItemByLocationValue"},a=this.global["url-extract-order"]?this.global["url-extract-order"]:n,s=0,l,c,d;for(a.push("location"),t=t?i.call(this,e,t):null;s<a.length&&TRC.util.isEmptyString(t);){c=a[s],l=this[o[a[s]]];try{t=l?l.call(this,e,i):null}catch(e){if(!this.global["tmp-catch-item-url-err"])throw new Error(e.message);t=""}s++}return"item-url"==e&&"getItemByParamUrl"==c?t:(d="getItemByLocationValue"!=c,t=r?r.call(this,t,win.trc_video_id?"video":"text",d):t)},Manager.prototype.getEventParams=function(){return{ri:TRC.events_ri,sd:this.getSessionData(TRC.session_data),ui:TRC.pageManager.getValue("user-id"),pi:this.getItemId(),wi:this.watchedItem?this.watchedItem:null,pt:this.getItemType(),vi:TRC.pageManager.getPageData()}},Manager.prototype.sendEvent=function(e,t,i,r,n,o){var a=!1,s=this.getEventParams(),l=function(){a||(a=!0,n&&n())};__trcCopyProps(t,s),r?(this.log1(e,s,i,l,this.placement),TRC.pConsole("page","info","event type : "+e+" - this event will be sent only once for the widget",s,"object")):(this.logTrcEvent(e,s,i,l),TRC.pConsole("page","info","sending event type : "+e,s,"object")),"number"==typeof o&&TRC.Timeout.set(l,o)},Manager.prototype.getSystemFlag=function(e){return this.systemFlags&&void 0!==this.systemFlags[e]?this.systemFlags[e]:null},Manager.prototype.getSessionData=function(e){var t=TRC.pageManager.getPublisherValue(TRC.publisherId,"session-data"),i,r;return(!0===this.global["prefer-response-session-data"]||!t)&&e?e:t},Manager.prototype.getUserId=function(e){var t=TRC.pageManager.getValue("user-id");return t||e||null},Manager.prototype.GlobalRequetParams=function(){var e={id:parseInt(1e3*Math.random())};this.setItemId=function(t){t&&(e.ii=t)},this.setTemplate=function(t){t&&(e.tmpl=t)},this.setItemType=function(t){t&&(e.it=t)},this.setSessionData=function(t){e.sd=t},this.setUserId=function(t){e.ui=t},this.setLoaderBuildTime=function(t){t&&(e.lbt=t)},this.setUserIdFirstPartyCookie=function(t){e.uifp=t},this.setUserLanguages=function(t){t&&(e.ul=t)},this.setCmpStatus=function(t){"number"==typeof t&&(e.cmps=t)},this.setConsentDaisyBit=function(t){"string"==typeof t&&(e.cdb=t)},this.setConsentTcString=function(t,i){"string"==typeof t&&(!i||t.length<i)&&(e.tcs=t)},this.setCmpStatus=function(t){"number"==typeof t&&(e.cmps=t)},this.setGdprApplies=function(t){"boolean"==typeof t&&(e.ga=t)},this.setGdprWasTimeout=function(t){"boolean"==typeof t&&(e.gwto=t)},this.setCex=function(t){t&&"string"==typeof t&&(e.cex=t)},this.setCcpaDns=function(t){t&&"string"==typeof t&&(e.ccpa_dns=t)},this.setCcpaPs=function(t){t&&"string"==typeof t&&(e.ccpa_ps=t)},this.setViewId=function(t){e.vi=t},this.setClientVersion=function(t){e.cv=t},this.setPublisherVersion=function(t){e.uiv=t},this.setItemUrl=function(t){t&&(e.u=t)},this.setPlacementsParamsArray=function(t){e.r=t},this.getPlacementsParamsArray=function(){return e.r},this.setExperimentVariant=function(t){t&&(e.pev=t)},this.setPastExclusions=function(t){e.px=t},this.setScreenHeight=function(t){e.sh=t},this.setScreenWidth=function(t){e.sw=t},this.setBrowserWidth=function(t){e.bw=t},this.setArticlePos=function(t){e.bad=t},this.setScreenDensity=function(t){e.sde=t},this.setBrowserHeight=function(t){e.bh=t},this.setDocumentWidth=function(t){e.dw=t},this.setDocumentHeight=function(t){e.dh=t},this.setExclusions=function(t){e.ex=t},this.enableTrcTesMode=function(){e.y=!0},this.setReferrer=function(t){e.e=t},this.setMetaData=function(t){e.m=t},this.setItemUrlQueryString=function(t){t&&(e.qs=t)},this.setNetworkID=function(t){e.nsid=t},this.getId=function(){return e.id},this.setAll=function(t){t&&(e=t)},this.getAll=function(){return e},this.setRtui=function(t){e.rtui=t},this.setDeviceId=function(t){t&&(e.did=t)},this.setUnifiedId=function(t){t&&(e.unuid=t)},this.setUserType=function(t){t&&(e.usrtyp=t)},this.setPaywall=function(t){t&&(e.pywl=t)},this.setPremium=function(t){t&&(e.prem=t)},this.setAdvertorialSource=function(t){t&&(e.advrtsrc=t)},this.setExternalPageView=function(t){t&&(e.extpvid=t)},this.setUTMParams=function(t){t&&(e.pp=t)},this.setBlockVideoLoader=function(t){t&&(e.bv=t)},this.setLocalStoragePiggyback=function(t){t&&(e[TRC.LOCAL_STORAGE_PIGGYBACK]=t)},this.setBlockThumbnailVideoLoader=function(t){t&&(e.btv=t)},this.setConnectionType=function(t){t&&(e.con=t)},this.setConnectionSpeed=function(t){t&&(e.cos=t)},this.setAdditionalData=function(t){t&&(e.ad=t)},this.setPageLevelFeature=function(t){t&&Object.keys(t).length>0&&(e.plf=t)}},Manager.prototype.PlacementParams=function(){var e={};this.setListId=function(t){e.li=t},this.setListSize=function(t){e.s=t},this.setUIMode=function(t){e.uim=t},this.setUIPlacement=function(t){e.uip=t},this.setContainerPos=function(t){e.cd=t},this.setContainerWidth=function(t){e.mw=t},this.setOriginalUIPlacement=function(t){e.orig_uip=t},this.setRequiredAttr=function(t){e.ra=t},this.setAllowedCategories=function(t){e.ac=t},this.setNativeCampaignID=function(t){e.nvcid=t},this.setExclusions=function(t){e.ex=t},this.setAll=function(t){e=t},this.getAll=function(){return e},this.setFeedBatch=function(t){e.fb=t},this.setFeedTemplateId=function(t){e.fti=t},this.setFeedIndex=function(t){e.fi=t}},Manager.prototype.log=__trcLog,Manager.prototype.error=__trcError,Manager.prototype.warn=__trcWarn,Manager.prototype.info=__trcInfo,Manager.prototype.debug=__trcDebug,Manager.prototype._repaintEllipsis=function(e){var t=e.data&&e.data.boxes;TRC.Ellipsis.doEllipsis(TRC.util.filterObj(function(e){return e.shouldUseSmartEllipsis()},t||this.boxes))},Manager.prototype.sendExternalTracking=function(e){if(!TRC.botDetected){var t=this.generatePixelsMarkup(e),i,r=this.shouldWritePixelsToIframe(e);try{t&&(r&&(r=this.appendPixelsToIFrame(t)),r||((i=doc.createElement("span")).innerHTML=t,doc.body.appendChild(i)))}catch(e){__trcError("Error in Manager.sendExternalTracking")}}},Manager.prototype.shouldWritePixelsToIframe=function(e){return e&&this.isInternalPixels(e)||void 0===this.global["disable-iframe-for-tracking-pixel"]||!this.global["disable-iframe-for-tracking-pixel"]},Manager.prototype.isInternalPixels=function(e){for(var t=0;t<e.length;t++){var i;if(this.stripDomainFromPixel(e[t]).indexOf("taboola.com")>-1)return!0}return!1},Manager.prototype.stripDomainFromPixel=function(e){var t=e.replace(/(http[s]*:\/\/)|(^\/\/)/,"");return t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),t},Manager.prototype.loadScriptTags=function(e){var t=e.data,i,r;for(r=0;t&&r<t.length;r++)if(i=t[r],!this.loadedJsTags.hasOwnProperty(i))try{i=TRC.URL.prototype.switchProtocol.call(i,TRC.PROTOCOL),TRC.net.loadScript(i,"js",null,null,!0),this.loadedJsTags[i]=!0}catch(e){__trcWarn("Error appending script at position "+r+", url="+i,e)}},Manager.prototype.listenToRenderedModes=function(){TRC.eventDelegator.subscribe("onrender",function(){this.renderedModeCounter++,this.renderedModeCounter!==this.totalModeCounter||TRC.yieldingEnabled||TRC.dispatch("allrender",{data:this})}.trcBind(this))},Manager.prototype.generatePixelsMarkup=function(e){for(var t="",i,r=0;e&&r<e.length;r++)(i=TRC.text.encodeHTML(e[r]))&&(t+='<img width="0" height="0" src="'+TRC.URL.prototype.switchProtocol.call(i,protocol,!0)+'">');return t},Manager.prototype.appendPixelsToIFrame=function(e){var t=/<img [^>]*src="([^"]+)"[^>]*>/gm,i;return(i=this.global["disable-unified-iframe-pixel-reporter"]?this.appendPixelsToIFrameMultipleIframes(e):this.appendPixelsToIFrameUnifiedIframes(e))&&this.global["track-external-pixel-traffic"]&&this.global["track-external-pixel-traffic"]>100*Math.random()&&TRC.modDebug.logMessageToServer(1,"fire external pixel",{idx:"pix",plat:this.getPlatformCode(),urls:e.match(t)}),i},Manager.prototype.appendPixelsToIFrameUnifiedIframes=function(e){var t,i="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),r,n,o=!1,a;if(e){try{this.iframePixelReporter?r=this.iframePixelReporter:((t=doc.createElement("span")).innerHTML='<iframe class="trc-hidden" id="'+i+'" name="'+i+'" width="0" height="0" style="display:none"></iframe>',doc.body.appendChild(t),r=doc.getElementById(i),this.iframePixelReporter=r),n=r.contentDocument?r.contentDocument:r.contentWindow.document,(a=doc.createElement("span")).innerHTML=e,n.body.appendChild(a),o=!0,n.close()}catch(e){__trcDebug("Failed to create IFrame for external tracking")}return o}},Manager.prototype.appendPixelsToIFrameMultipleIframes=function(e){var t,i="trc-pixel-iframe-"+parseInt(1e4*Math.random(),10),r,n,o=!1;if(e){try{(t=doc.createElement("span")).innerHTML='<iframe class="trc-hidden" id="'+i+'" name="'+i+'" width="0" height="0" style="display:none"></iframe>',doc.body.appendChild(t),r=doc.getElementById(i),this.iframePixelReporter=r,(n=r.contentDocument?r.contentDocument:r.contentWindow.document).body.innerHTML=e,o=!0,n.close()}catch(e){__trcDebug("Failed to create IFrame for external tracking")}return o}},Manager.prototype.placementShouldHaveResponseData=function(e,t){return t.search("rbox-tracking")<0&&!e.isFeed&&!e.isIframeCard&&!e.externalContainerSelector&&!e.isStandaloneVideo&&!e.scriptData&&!e.publisherCardData},Manager.prototype.placementHasResponseData=function(e){return null!=e.response||e.dc},Manager.prototype.getOrCreatePlacementData=function(e,t){var i=this.preloadRequest[e];return i||(i=this.createPlacementData(e,t))&&(this.preloadRequest[e]=i),i},Manager.prototype.createPlacementData=function(e,t){return this.isRegularWidget(t)?this.createAddedWidgetData(e,t):this.isStandaloneVideo(t)?this.createStandaloneVideoWidgetData(e,t):TRC.FeedsManager.isFeedIframe(t)?TRC.FeedsManager.createFeedIframe(e,t):TRC.FeedsManager.isFeedScriptWidget(t)?TRC.FeedsManager.createFeedScriptWidgetData(e,t):TRC.FeedsManager.isExternalContainerWidget(t)?TRC.FeedsManager.createExternalWidgetData(e,t):TRC.FeedsManager.isPublisherCard(t)?TRC.FeedsManager.createPublisherCardData(e,t):void 0},Manager.prototype.isRegularWidget=function(e){return e.m},Manager.prototype.createAddedWidgetData=function(e,t){return{placement:e,mode:t.m,mode_name:t.m,addWidget:!0}},Manager.prototype.isStandaloneVideo=function(e){return e.vtag&&e.vtag.position===TRC.VideoTagLoader.prototype.LOCATION_TYPES.STANDALONE},Manager.prototype.createStandaloneVideoWidgetData=function(e,t){return{placement:e,isStandaloneVideo:!0}},Manager.prototype.getSortedCloudinaryRatios=function(){var e,t;if(!this.cloudinarySortedRatios){e=this.global["cloudinary-aspect-ratios-list"]||[[1,2],[1,1.9],[1,1.8],[9,16],[1,1.7],[1,1.6],[1,1.5],[1,1.4],[3,4],[1,1.3],[1,1.2],[1,1.1],[1,1],[1,.9],[6,5],[1,.8],[4,3],[1,.7],[3,2],[1,.6],[16,9],[2,1]];for(var i=0;i<e.length;i++)t=e[i],e[i]=t[0]/t[1];this.cloudinarySortedRatios=e.sort()}return this.cloudinarySortedRatios},Manager.prototype.getExpandOptions=function(e){var t={expandType:e["et"]};return e["ch"]&&(t.collapsedHeight=e["ch"]),e["ebc"]&&(t.expandButtonCaption=e["ebc"]),e["cbc"]&&(t.collapseButtonCaption=e["cbc"]),t},Manager.prototype.clearPageElements=function(){this.clearTransportFrames(),this.clearUserXElements(),this.clearStyleSheets()},Manager.prototype.clearTransportFrames=function(){var e;document.querySelector&&[].slice.call(document.querySelectorAll("."+TRANSPORT_FORM_ELEMENT)).forEach(function(e){e.parentNode.removeChild(e)})},Manager.prototype.clearUserXElements=function(){TRC.userX&&TRC.userX.reset()},Manager.prototype.clearStyleSheets=function(){this.global["clear-styles-on-reset"]&&TRC.dom.removeAllInjectedStyleSheets()},Manager.prototype.shouldBlockVideoLoader=function(e){var t=!1;return isNaN(e)||(t=Math.random()<e/100),TRC.pConsole("page","info","Blocked video: "+t+", block-video-prob: "+e,"string"),t},Manager.prototype.shouldBlockThumbnailVideoLoader=function(e){var t=!1;return isNaN(e)||(t=Math.random()<e/100),TRC.pConsole("page","info","Blocked thumbnail video: "+t+", block-Thumbnail-video-prob: "+e,"string"),t},Manager.prototype.getPublisherVersionPropertyWithFallbackToNetwork=function(e){return this[e][TRC.publisherId]||TRC.networkId&&this[e][TRC.networkId]},Manager.prototype.getSiteNameOgValue=function(){return this.siteName||(this.siteName=this.getPageMetaPropertyValue("og:site_name")),this.siteName},Manager.prototype.getPageMetaPropertyValue=function(e){for(var t=document.head.getElementsByTagName("meta"),i=0;i<t.length;i++)if(t[i].getAttribute("property")===e)return t[i].content;return __trcDebug("Failed finding meta tag property : "+e+" value"),null},Manager.prototype.composeGetURL=function(e,t){var i=this["normalize-log-param"]("publisher",TRC.publisherId),r=protocol+"//"+this.domain+"/"+i+"/log/3/"+escape(e)+"?";for(var n in r+=this.trcByPass?"trc_skip_failover=yes&":"",r+=this.enableTrcRoute&&this.trcRoute?"route="+this.trcRoute+"&":"",r+=this.enableExperimentsVariantIdEvent&&this.experimentsVariantIdParamsStr?this.experimentsVariantIdParamsStr+"&":"",r+=this.getLoaderTypesValue()?this.getLoaderTypesValue()+"&":"",t)t.hasOwnProperty(n)&&(nam="_"==n.charAt(0)?n.substr(1):n,void 0!==t[n]&&null!=t[n]&&(0==n.indexOf("unescape-")?r+=n.replace("unescape-","")+"="+t[n]+"&":r+=escape(nam)+"="+escape(t[n])+"&"));return r},Manager.prototype.sendAbTestEvent=function(e,t,i,r){var n={abTestsEventType:"simple",name:e,type:t,eventTime:(new Date).getTime()},o={"unescape-d":encodeURIComponent(__trcJSONify(n))};if(r&&TRC.hasNetworkAsyncSupport()){o.tim=__trcClientTimestamp(),o.id=parseInt(1e4*Math.random()),o.llvl=win.trc_debug_level,__trcCopyProps(this.getEventParams(),o);var a=this.composeGetURL("abtests",o);TRC.sendPostAsyncCall(a)}else this.sendEvent("abtests",o,null,!1,i,null,r)},Manager.prototype.initRBox=function(e,t){var i,r;return i=new TRC.implClasses.TRCRBox(t.origin.toString(),t,this),this.boxes[i.id]=i,e._trc_container||(e._trc_container=document.createElement("div"),e._trc_container.className="trc_rbox_container",e._trc_anonbox=document.createElement("div"),e._trc_container.appendChild(e._trc_anonbox),e.appendChild(e._trc_container),this.cssReset&&"rbox-tracking"!==i.mode_name?(r=doc.createElement("div"),TRC.dom.swapElements(e,r,!1),i["outermostContainer"]=this.createCssResetContainers(e,i.mode_name),TRC.dom.swapElements(r,i["outermostContainer"],!1),TRC.pConsole("page","info","CSS reset is enabled on all widgets")):i["outermostContainer"]=e),i.render(e._trc_anonbox),this.renderRBox(i),win.TRC.trc_drawRBox=!0,i},Manager.prototype.shouldRetryFailedPlacementRequest=function(e){return!e.addWidget&&!e.fpl&&(!e.numFailedRequests||e.numFailedRequests<this.maxRetriesPerFailedPlacementRequest)},Manager.prototype.retryFailedPlacementRequest=function(e,t){t.numFailedRequests=t.numFailedRequests||0;var i={};i[e]=t,t.numFailedRequests++,this.dispatchLoadRequest(i)},Manager.prototype.createContainerForEscalatorWidget=function(e){e["container"]=document.createElement("div"),e["container"].id="trc_rbox_slider_"+Math.floor(2147483648*Math.random()).toString(36),e["container"].className="trc_related_container",this.cssReset&&doc.body.appendChild(e["container"])},Manager.prototype.callTrc=function(e,t,i,r){TRC.isAMPSplitFeed&&this.ampSplitFeedManager.ampSplitFeedCache.getCacheData("tbl_syncViewID")!==t.vi&&__trcError("View ID Not Synched Between AMP Split Feed iFrames"),this.preloadRequestLoader=this.loadExternal(e,"js",this.handleLoadResponseFailure.trcBind(this),!0),this.preloadRequestLoader.doneCurrentRequest=r,this.preloadRequestLoader.timeout=TRC.Timeout.set(this.abortLoadRequest.trcBind(this,!0,t.cb),i),this.lastReqId=t.id,TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.callTrcByWorker=function(url,req,timeout){TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),this.lastReqId=req.id,TRC.worker.xhr(url,timeout,function(data){try{eval(data)}catch(e){__trcError("TRC.worker: Worker Error in trc response",e)}},this.handleLoadResponseFailure.bind(this)),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.callTrcByAjax=function(e,t,i,r){TRC.performance&&TRC.performance.mark("5.1.0",null,"TrcPv3",this.lastReqId,"pv3call",TRC.PerfEvenType.START),this.lastReqId=t.id;var n=function(e){this.handleLoadResponseFailure(),this.abortLoadRequest(!0,t.cb),__trcError(e)}.trcBind(this),o=this.handleLoadResponse.trcBind(this,t.cacheKey);this.preloadRequestLoader={},this.preloadRequestLoader.doneCurrentRequest=r;var a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("Content-Type","text/plain"),a.withCredentials=!0,a.timeout=i,a.addEventListener("readystatechange",this.handleTrcAjaxResponseStatus.trcBind(this,a,o,n)),a.addEventListener("error",n),a.addEventListener("timeout",n),a.send(""),TRC.pConsole("","time","dispatch recommendation request","")},Manager.prototype.handleTrcAjaxResponseStatus=function(e,t,i){if(4===e.readyState&&0!==e.status)if(e.status<200||e.status>=300)i("Ajax status code not valid");else{var r=/^[^{]*(.*)\)$/,n=e.responseText;if(!n||n.indexOf('{"trc":{}}')>-1)i("Invalid response from server: "+n);else if(n.indexOf("TRC.callbacks.mute()")>-1)TRC.callbacks.mute();else{var o=n.match(r);if(o)try{t(JSON.parse(o[1]))}catch(e){i("TRC response not a valid JSON: "+n)}else i("Can't validate TRC response: "+n)}}},Manager.prototype.clearPreloadRequestLoader=function(){this.preloadRequestLoader&&(TRC.Timeout.clear(this.preloadRequestLoader.timeout),this.preloadRequestLoader.parentNode&&this.preloadRequestLoader.parentNode.removeChild(this.preloadRequestLoader),this.preloadRequestLoader=null)},Manager.prototype.clearPreloadRequestLoaderAndCallNext=function(){var e;this.preloadRequestLoader&&"function"==typeof this.preloadRequestLoader.doneCurrentRequest&&(e=this.preloadRequestLoader.doneCurrentRequest),this.clearPreloadRequestLoader(),e&&e()},Manager.prototype.clearPreloadRequestLoaderAndResetQueue=function(){this.clearPreloadRequestLoader(),TRC.recoRequestsQueue.resetQueue()},Manager.prototype.enableExploreMore=function(e,t){e.shouldNotCopyPublisherHeaderHtml=this.global["shouldNotCopyPublisherHeaderHtml"]||!1,this.loadExploreMoreModule(e);var i=this.createAndAppendExploreMoreContainer(e.exm.container);this.setExploreMorePlacementDataInPreloadRequest(t,i),TRC.exploreMoreInitialized=!0},Manager.prototype.setExploreMorePlacementDataInPreloadRequest=function(e,t){this.preloadRequest[e]=this.computeRBoxOptions({container:t,placement:e,target_type:"mix",addedWidget:!0})},Manager.prototype.createAndAppendExploreMoreContainer=function(e){var t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},Manager.prototype.loadExploreMoreModule=function(e){TRC.ModuleLoader.load("explore-more",TRC.ExploreMore,function(){this.exploreMore=new TRC.ExploreMore(this,e)}.trcBind(this))},Manager.prototype.shouldSkipPlacement=function(e,t){return!!TRC.exploreMoreInitialized&&(TRC.ExploreMore&&TRC.ExploreMore.shouldSkipPlacement(e,t,this.feedsManager))},Manager.prototype.shouldSkipPushedRequest=function(e){return!!TRC.exploreMoreInitialized&&(TRC.ExploreMore&&TRC.ExploreMore.shouldSkipPushedRequest(e))},Manager.prototype.parseClientGenericAction=function(e){var t=this.emulateCga()||e.trc["cga"];if(t)return __trcUnJSONify(t)},Manager.prototype.emulateCga=function(){return TRC.URL.prototype.getParameter.call(location.href,"trc_cga")},Manager.prototype.initCcpa=function(e,t){var i=e&&e.ccpa;!this.global["disable-ccpa"]&&i&&TRC.ccpa&&!TRC.ccpa.isInitialized&&(TRC.ccpaPs?(TRC.ccpa.isInitialized=!0,TRC.ccpa.sendCcpaEvent("publisher")):TRC.ccpa.init(t.trc["vl"],e.ccpa))},Manager.prototype.initPubConfigGenericActionOverride=function(e){if(e&&e.pubConfigOverride){this.isExpoTest()&&TRC.util.haveMutualKeys(this.global,TRC.overrideGlobalConfig)&&__trcError("client generic action override publisher config used in an expo test! expo test:"+this.getSystemFlag("experimentID")+",override is:"+JSON.stringify(e.pubConfigOverride)+" expo is:"+JSON.stringify(TRC.overrideGlobalConfig));var t=TRC.util.merge({},this.global,e.pubConfigOverride);Object.defineProperty(this,"global",{get:function(){return t}})}},Manager.prototype.isExpoTest=function(){return!!this.getSystemFlag("experimentID")}}(window,document),function(e,t){function i(){return document.createTextNode(" ")}function r(){return document.createTextNode("…")}TRC.implClasses=TRC.implClasses||{};var n=TRC.implClasses.TRCRBox=function(e,t,i){return this._id=Math.floor(1e5*Math.random()),this.fixHeight=t.height,this.domain=i.domain,this.origin=e,this.header=!1,this.id="trc_"+this._id,this.response=this.request=null,__trcCopyProps(t,this),this.loaded=!!this.loaded&&this.loaded,this.element=null,this.listContainer=null,this.retryCount=0,this.drawList=!1,this.forceItemType=!1,this.trc=i,this.util=TRC.util,this.timeoutId=null,this.errorHandler="",this.boxes=[],this.recommendationList=null,this.use_cdn=!0===this.trc.getProperty(this.mode_name,"use-cdn-recommendations",this.propertiesOverride),this.postRenderQueue=new TRC["PostRenderQueue"],this.src=null,this.fullEventItemsHash={},this.isCssImportant=this.trc.getProperty(this.mode_name,"use-css-important",this.propertiesOverride),this.publisher=TRC.publisherId,this.smallIOSDevice=this.trc["small-ios-device"]||"iPhone|iPod",this.isSmallIOS=this.smallIOSDevice.indexOf(TRC.Device.deviceType)>=0,this.isFeedCard=t.isFeedCard,this.enableFeedView=t.feedViewConfig||this.trc.global["enable-feed-view"]||!1,this.iosLinkTarget=this.trc.getProperty(this.mode_name,"ios-sc-link-target-mode",this.propertiesOverride)||this.trc.global["ios-sc-link-target"],this.defaultLinkTarget=this.trc.global["link-target-conf"]||{NAV:"_self",NT:"_blank",SP:"_blank"},this.linkTargetConf=this.isSmallIOS&&this.iosLinkTarget?this.iosLinkTarget:this.trc["link-target-conf"],this.ntHandlerEnabled=this.trc.global["publisher-onclick-nt-enabled"],this.organicRedirParam=this.trc.global["organic-redirect-param"],this.shiftRedirOnclick=this.trc.global["shift-redir-onclick"],this.useRedirect=TRC.isAMP?this.trc.global["enable-organic-redirect-on-amp"]:this.trc.global["enable-organic-redirect"],this.useRedirectOnLink=this.trc.global["use-redirect-on-link"],this.adcItemTypes=this.trc.global["adchoice-item-types"]||{"is-organic":!1,"is-in-network":!1,"is-syndicated":!0,"is-native":!0},this.sendClickPiggyBack=this.trc.global["send-pb-in-click"],this.imagesAltUrls=this.trc.global["images-alt-urls"]||[],this.disableResponsiveCSSReuse=this.trc.global["disable-responsive-css-reuse"],this.options=t,this.apiData=[],this.lazyLoadImageObserversIds=[],this.isMultiWidget=t.trcResponse&&t.trcResponse.multiWidget,TRC.util.isPercentEnabled(this.trc.global,"custom-image-size-round-percent")&&(this.customImageSizeRound=this.trc.global["custom-image-size-round-value"]),this},o="https://images.taboola.com/taboola/image/fetch/",a="h_{h},w_{w}",s=o+"f_jpg%2Cq_80%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces%2Ce_sharpen/",l=o+"fl_lossy%2Cf_gif%2Ch_{h}%2Cw_{w}%2Cc_fill%2Cg_faces:auto%2Ce_sharpen/",c=o+"$pw_{w}%2C$ph_{h}/t_tbl-cnd/",d=TRC.PROTOCOL,h,u;n.prototype.getImageUrlPrefix=function(){return s},n.prototype.DEFAULT_THUMB_RATIO=.8,n.prototype.getListId=function(){return this.visible?"rbox-"+this.origin:"rbox-tracking"},n.prototype.getSessionId=function(){return this.response&&this.response.trc?this.response.trc["session-id"]:null},n.prototype.getItemType=function(){return this.forceItemType?this.forceItemType:this.trc.getItemType()},n.prototype.generateHeader=function(e){var t=this.getWidgetToFeedHelper(),i=document.createElement("div"),r=document.createElement("span"),n=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride),o=this.trc.getProperty(this.mode_name,"header-right",this.propertiesOverride),a="No Header"!==o;if(i.id=this.id.replace("trc_","trc_header_"),i.className="trc_rbox_header trc_rbox_border_elm",r.className="trc_rbox_header_span",this.generateHeaderIcon(r),i["ext"]=document.createElement("div"),i["ext"].className="trc_header_ext",i.appendChild(i["ext"]),a)this.generateHeaderPart(r,n,"trc_header_left_column trc_header_left_part"),this.generateHeaderPart(r,o,"trc_header_right_column trc_header_right_part");else{var s="No Header"!==n?n:"";r.insertAdjacentHTML("beforeend",s)}return i["titleBox"]=r,i.appendChild(r),t&&!t.getHeader()?t.addHeaderToFeed(i):e.appendChild(i),i},n.prototype.generateHeaderIcon=function(e){var t,i,r,n=this.trc.getProperty(this.mode_name,"header-icon",this.propertiesOverride)||"NONE";"CUSTOM"===n?r=this.trc.getProperty(this.mode_name,"header-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===n&&(r=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-logo")),r&&((i=document.createElement("img")).className="trc_rbox_header_icon_img trc_img",i.src=TRC.URL.prototype.switchProtocol.call(r,d),(t=document.createElement("div")).className="trc_rbox_header_icon_div",t.appendChild(i),e.appendChild(t),e.className+=" trc_rbox_header_icon_span")},n.prototype.generateHeaderPart=function(e,t,i){var r=document.createElement("span");r.className="trc_inner_header "+(i||""),r.insertAdjacentHTML("beforeend",t),e.appendChild(r)},n.prototype.render=function(e){this.element=document.createElement("div"),this.element.id=this.id.replace("trc_","trc_wrapper_"),this.element.className="trc_rbox "+this.mode_name,this.element.style.overflow="hidden",e.appendChild(this.element),this.element.style.display="none",!0===this.trc.getProperty(this.mode_name,"has-expand-animation",this.propertiesOverride)&&new TRC.ExpandAnimationManager(this)},n.prototype.setTargetItemsList=function(e,t,i){if(t)for(var r=0,n=t.length;r<n;r++)e[t[r]["item-id"]]={tii:t[r]["item-id"],tipt:this.getProviderType(t[r]),tit:t[r]["type"],tids:i}},n.prototype.getJsonTargetItemsList=function(e){var t=[],i;for(i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},n.prototype.getProviderType=function(e,t){return e["is-syndicated"]?t?"sponsored":"SP":e["is-in-network"]?t?"exchange":"NT":e["is-native"]?t?"native":"NAV":t?"organic":"RC"},n.prototype.setApiItemsData=function(e){this.apiData.push({url:e.url,slot:e.itemIndex,id:e.id,type:this.getProviderType(e,!0),title:e.title})},n.prototype.isReadMoreDevice=function(e){for(var t=e.split("|"),i={smart_phone:TRC.dom.isSmartPhone(),tablet:TRC.dom.isTablet(),desktop:TRC.dom.isDesktop()},r=0;r<t.length;r++){if("all"===t[r])return!0;if(i[t[r]])return!0}return!1},n.prototype.getReadMoreConfig=function(){var e=this.trc.getProperty(this.mode_name,"read-more-config",this.propertiesOverride)||{};return e.boxSelector=this.trc.getProperty(this.mode_name,"read-more-box-selector",this.propertiesOverride),e.threshold=this.trc.getProperty(this.mode_name,"read-more-threshold",this.propertiesOverride),e.minimizedSize=this.trc.getProperty(this.mode_name,"read-more-minimized-size",this.propertiesOverride),e.caption=this.trc.getProperty(this.mode_name,"read-more-caption",this.propertiesOverride),e.cutoffType=this.trc.getProperty(this.mode_name,"read-more-cutoff-from-type",this.propertiesOverride),e.anchorSelector=this.trc.getProperty(this.mode_name,"read-more-anchor-selector",this.propertiesOverride),e.lengthFromAnchorElementType=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-type",this.propertiesOverride),e.lengthFromAnchorElement=this.trc.getProperty(this.mode_name,"read-more-cutoff-length-from-anchor-element",this.propertiesOverride),e.modeDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride),e},n.prototype.isNoRecommendationsMode=function(){return"rbox-tracking"==this.getListId()||"rbox-only-video"===this.mode_name},n.prototype.loadScriptCallback=function(e,t){this.propertiesOverride=t.trc&&t.trc["video-list"]&&t.trc["video-list"]["properties-override"],this.isProviderIframe=this.trcResponse&&this.trcResponse.hasOwnProperty("ifr")&&this.trcResponse.ifr;var i="TRCRBox.loadScriptCallback"+"(retry="+this.retryCount+")",r=t.trc,n,o,a,s,l=this.response&&this.response.trc["DNT"]&&"TRUE"===this.response.trc["DNT"].toUpperCase(),c=TRC.TRCParser,d,h,u,p,m=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride);if(__trcDebug("Enter "+i),this.abortRequest(),this.utm=this.requestTime&&[this.requestTime,(new Date).getTime()-TRC.utm.start],e&&(this.trc.trcCache.cacheResponse(e,t,TRC.pageManager.state.moreDispatchParams),this.trc.cachedResponses[e]=!0),r&&r["video-list"]&&r["video-list"].pvc&&(this.pVideoLoader=new TRC.PVideoLoader(this,r["video-list"].pvc,this.response.trc,this.trc)),!(r&&r["video-list"]&&r["video-list"].video||this.isProviderIframe)){__trcError("Exit "+i+": request format error");var g=this.response.feedPlacement||this.placement;return TRC.dispatch("onRboxFlowError",{placement:g}),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement,this.isFeedCard)}if(TRC.UserIdMerger.notifyPossibleUserChange(this.trc,TRC.publisherId,r["user-id"],r["session-data"]),r["consent-missing"]||TRC.pageManager.storePublisherValue(TRC.publisherId,"session-data",r["session-data"]),t.trc["DNT"]&&"TRUE"===t.trc["DNT"].toUpperCase()?(TRC.doNotTrack=!0,TRC.pageManager.removeAllKeys(),TRC.pageManager.removeUserId()):TRC.pageManager.storeUserId(r["user-id"],r["consent-missing"]),this.drawList)__trcWarn("Exit "+i+": got another response after already drawing");else{if(this.response=t,this.isResponseFromCache()&&(this.cachedViewId=this.response.cachedViewId),this.setTargetItemsList(this.fullEventItemsHash,r["video-list"].video,"a"),(u=new TRC.PlacementEventPostData).setFullItemList(this.getJsonTargetItemsList(this.fullEventItemsHash)),p=this.createUtmParam(),void 0!==this.modeGroupOrder&&this.util.merge(p,{mgo:this.modeGroupOrder}),r["video-list"].video&&r["video-list"].video.length<1&&!this.isNoRecommendationsMode()){__trcError("Exit "+i+": no items in response - "+this.mode_name),TRC.EventsAPI.dispatchRender(r),this.abortRendering(),this.sendAvailableEvent(p,u,!0,!1);var g=this.response.feedPlacement||this.placement;return TRC.dispatch("onRboxFlowError",{placement:g}),void TRC.EventsAPI.dispatchNoContent(this.trc.NO_CONTENT.noItems,this.placement,this.isFeedCard)}if(this.isResponsive=this.trc.getProperty(this.mode_name,"mode-is-responsive",this.propertiesOverride),this.recommendationList=this.isMultiWidget?this.multiWidgetRecItems.splice(0,this.getCurrentListSize()):r["video-list"].video||[],this.isProviderIframe?TRC.listen("available::"+this.placement,function(e){!1!==this.trcResponse.config["send-events"]&&(this.sendAvailableEvent(p,u,!1,!0),this.visibilityReporter=new TRC.WidgetVisibilityReporter(this),TRC.intersections.isInViewPort({targetElement:e.container,enableDelayedVisibilityCheck:!0,onTrigger:function(){this.recommendationList.length&&this.visibilityReporter.calculateVisibleItems(null,!0,this.recommendationList),this.visibilityReporter.reportVisibility()}.trcBind(this)}),this.registerProviderClicks(this.recommendationList)),this.sendPlacementTrackingPixelsOnce("i")}.trcBind(this)):this.sendAvailableEvent(p,u,!1,!1),this["rtb-win"]&&this.sendEvent("rtb-win",this["rtb-win"]),this.itemsTypes=this.getItemsTypesList(this.recommendationList),this.privacyId=this.getPrivacyId(this.recommendationList),this.orig_name=this.mode_name,this.orig_placement=this.placement,this.isProviderIframe||this.sendPlacementTrackingPixelsOnce("i"),c.IsBaseModeAndABModeExist(r)?(a=c.parseBaseModeAndABModeName(r),this.changeModeName(a,!0,"base mode named: "+a+" has no configuration. "+"using fallback - "+this.mode_name)):(s=c.parseBaseModeName(r))?(TRC.pConsole(this.mode_name,"info","base mode = "+s),this.changeModeName(s,!0,"base mode - "+s+": has no configuration. using fallback - "+this.mode_name)):(o=c.parseTestVariant(r))&&(TRC.pConsole(this.mode_name,"info","test variant = "+o,n),n=c.parseABModeName(this.mode_name,r),this.changeModeName(n,!1,"variant -  "+o+" : has no configuration. using fallback - "+this.mode_name),c.hasVariantMismatch(r)&&this.trc.global["send-variant-warning"]&&__trcWarn(("UI variant mismatch detected for publisher={pub}, "+"page type={page}, UI mode={mode}, pacement={placement}. "+"Using header variant resulted with variant={header}, "+"Using per widget variant resulted with variant={widget}.").replace("{pub}",TRC.publisherId).replace("{page}",this.trc.getItemType()).replace("{mode}",this.mode_name).replace("{placement}",this.placement).replace("{header}",t&&t["test-variant"]||"").replace("{widget}",t&&t["video-list"]&&t["video-list"]["test-variant"]||""))),this.isProviderIframe||this.isNoRecommendationsMode()||void 0!==this.trc.modes[this.mode_name]){d=this.trc.getProperty(this.mode_name,"auto-size",this.propertiesOverride),h="none"!=this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride),this.useNativeLineClamp=TRC.Browser.compatibility.lineClamp&&!this.trc.getProperty(this.mode_name,"details-inline-with-title",this.propertiesOverride)&&this.trc.getProperty(this.mode_name,"use-browser-line-clamp",this.propertiesOverride),this.widgetCreatorLayout=this.trc.getProperty(this.mode_name,"widget-creator-layout",this.propertiesOverride),this.isWCTextLinks="autowidget-template-text-links"===this.widgetCreatorLayout,this.isCarousel="scrolling"===this.trc.getProperty(this.mode_name,"navigation-type",this.propertiesOverride),this.shouldLazyLoadImages=this.trc.getProperty(this.mode_name,"has-thumbs-image-lazy-load",this.propertiesOverride)||this.trc.global["thumbnail-image-lazy-load"],this.link_target=this.link_target||this.trc.getProperty(this.mode_name,"link-target")||"normal",__trcDebug("Exit "+i+": success"),this.drawList=!0,this.hasReadMore=!0!==this.trc.disableReadMore&&this.trc.getProperty(this.mode_name,"enable-read-more",this.propertiesOverride),this.readMorePageConfig=this["read_more"]||{},this.readMoreConfig=this.getReadMoreConfig(),this.readMoreDevices=this.trc.getProperty(this.mode_name,"read-more-mode-devices",this.propertiesOverride)||this.trc["read-more-devices"],this.getWidgetToFeedHelper()&&this.getWidgetToFeedHelper().applyWidgetHeaderAndFooterStylesToFeed(this.mode_name),this.callPreRenderHooks(),this.trc.getProperty(this.mode_name,"pending-archive")&&TRC.modDebug.logMessageToServer(0,"PENDING_ARCHIVE_MODE_ERROR["+this.mode_name+"]",{"event-type":"ARCHIVE_MODE_ERROR"}),TRC.setReadMore&&this.hasReadMore&&this.isReadMoreDevice(this.readMoreDevices)?TRC.isOptim("defer-read-more")?setTimeout(function(){TRC.setReadMore(this)}.trcBind(this),0):TRC.setReadMore(this):TRC.EventsAPI.readmore("none",this.response&&this.response.trc),this.trc.yieldingEnabled||this.trc.totalModeCounter++;var f=null;try{this.reqId=this.response.trc.req}catch(e){this.reqId=-1}TRC.performance&&TRC.performance.mark("7.0.1."+this._id,f,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_START),this.container&&this.container.setAttribute("data-placement-name",this.placement),this.isProviderIframe||(TRC.CategoryCard.enableCategoryCard(this)&&(this.categoryCard=new TRC.CategoryCard(this)),this.isResponsive&&!this.isWCTextLinks?(this.generateResponsiveOuters(this.element),this.drawResponsiveList(r),this.postHandleRecommendationsResponseData(r,t,m,h,l,f)):"rbox-only-video"===t.trc.mode?this.postHandleRecommendationsResponseData(r,t,m,h,l,f):(d&&this.container&&0==this.container.clientWidth&&(this.container.style.width="100%"),TRC.ModuleLoader.load("non-responsive-widget",this.drawListBody,function(){this.generateVisibleParts(),this.drawListBody(r),this.postHandleRecommendationsResponseData(r,t,m,h,l,f)}.trcBind(this))))}else __trcError("TRCRBox.loadScriptCallback: Mode name '"+this.mode_name+"' doesn't exist in configuration file ")}},n.prototype.postHandleRecommendationsResponseData=function(e,t,i,r,n,o){if(this.shouldLazyLoadImages&&(this.lazyLoadViewportMarginThreshold=this.trc.getProperty(this.mode_name,"thumbs-image-lazy-load-margins",this.propertiesOverride)||this.trc.global["thumbs-image-lazy-load-margins"]||"600px 1500px 600px 1500px",this.isCarousel&&"none"!==i&&this.createCarouselContainerImgLazyLoadObserver()),TRC.StoryWidget.shouldInitStoryWidget(this)&&new TRC.StoryWidget(this),TRC.performance&&TRC.performance.mark("7.0.9."+this._id,o,this.mode_name,this.reqId,"rendering",TRC.PerfEvenType.REQ_LEVEL_STOP),TRC.dispatch("trcContentReady",{container:this.container}),e&&e["video-list"]&&e["video-list"].vtag&&this.trc["mode-before-video-load"](this)){TRC.performance&&TRC.performance.mark("10.0.1."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.START);var a={placement:this.placement,container:this.container};this.videoTagLoader=new TRC.VideoTagLoader(this.trc,e["video-list"].vtag,a,this,this.response.trc),this.videoTagLoader.loadVideo(),TRC.performance&&TRC.performance.mark("10.0.9."+this._id,null,"videotag","","videoTagLoad",TRC.PerfEvenType.STOP)}try{TRC.SpotlightLoader.registerOnMainContainer(this.container,t),TRC.SpotlightLoader.load(this.response)}catch(e){__trcError("Error while trying to load Spotlight")}this.shouldInitRTBUserAdChoice(r,n)&&TRC.ModuleLoader.load("user-adchoice",TRC.userAdChoice,this.initRTBUserAdChoice.trcBind(this)),this.shouldInitTaboolaChoice(r,n)&&TRC.ModuleLoader.load("userx",TRC.userX,this.initTaboolaChoice.trcBind(this)),this.shouldInitSliderManager()&&(TRC.RBoxUsage.logUsage("Init Escalator"),TRC.ModuleLoader.load("slider",TRC.SliderManager,function(){new TRC.SliderManager(this)}.trcBind(this)))},n.prototype.shouldInitTaboolaChoice=function(e,t){var i=this.trc.global["has-userx"]&&this.trc.getProperty(this.mode_name,"mode-has-userx",this.propertiesOverride),r=this.options&&this.options.trcResponse&&!!this.options.trcResponse.nup;return TRC.pConsole(this.mode_name,"info","has user X = "+i,""),i&&e&&!t&&!TRC.Device.isTouchDevice&&!TRC.SpotlightLoader.loadedScript&&!r},n.prototype.initTaboolaChoice=function(){if(TRC.userX&&!TRC.userX.isInitialized)try{TRC.userX.init(this.trc)}catch(e){__trcDebug("failed to init Taboola Choice")}try{TRC.userX.initForMode(this)}catch(e){__trcDebug("failed to init Taboola Choice for mode "+this.mode_name)}},n.prototype.shouldInitRTBUserAdChoice=function(e,t){return this.trc.global["show-rtb-ad-choices-icon"]&&e&&!t&&!TRC.SpotlightLoader.loadedScript&&this.recommendationList&&this.recommendationList.some(function(e){return e.plink})},n.prototype.initRTBUserAdChoice=function(){if(!TRC.userAdChoice.isInitialized)try{TRC.userAdChoice.init(this.trc["language"])}catch(e){__trcDebug("failed to init RTB Choice")}try{TRC.userAdChoice.initForMode(this)}catch(e){__trcDebug("failed to init RTB Choice for mode "+this.mode_name)}},n.prototype.shouldInitSliderManager=function(){return(!0===this.slider||!0===this.trc.getProperty(this.mode_name,"slider",this.propertiesOverride))&&!1!==this.trc.slider},n.prototype.callPreRenderHooks=function(){var e=this.trc.getProperty(this.mode_name,"mode-start"),t=this.trc["mode-pub-start"];try{"function"==typeof t&&(t(this,this.container),TRC.CustomModulesManager.runHook("mode-pub-start",null,this,this,this.container)),"function"==typeof e&&e(this,this.container)}catch(e){__trcError("Error in pre rendered hooks - "+e.message)}},n.prototype.registerProviderClicks=function(e){for(var t,i=0;i<e.length;i++){t=e[i],TRC.listen("click::"+this.placement,function(){this.sendEvent("click",{it:t.type,ii:t["item-id"],p:t["is-syndicated"]?t.publisher:"",li:this.getListId()},null,!1),this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList()["c"])}.trcBind(this));break}},n.prototype.changeModeName=function(e,t,i){void 0!==this.trc.modes[e]?(this.trc.cssReset&&this.switchCSSResetDivIds(this.mode_name,e),this.mode_name=e,this.element.className="trc_rbox"+" "+this.mode_name):this.trc.global["send-variant-warning"]&&(t?__trcWarn(i):__trcDebug(i))},n.prototype.switchCSSResetDivIds=function(e,i){var r=TRC.modesCache[e]?TRC.modesCache[e].cssDivsArr:[],n=TRC.modesCache[i]?TRC.modesCache[i].cssDivsArr:[],o=r.length;try{for(var a=0;a<o;a++)t.getElementById(r[a]).id=n[a]}catch(e){__trcError("TRCRBox.prototype.switchCSSResetDivs : ",e.message)}},n.prototype.abortRequest=function(){this.timeoutId&&(TRC.Timeout.clear(this.timeoutId),this.timeoutId=null),this.request&&(this.request.parentNode.removeChild(this.request),this.request=null)},n.prototype.abortRendering=function(){var e;switch(__trcDebug("Called "+("TRCRBox.abortRendering"+"(retry="+this.retryCount+")")),this.drawList=!0,typeof this.errorHandler){case"string":return void(null!=this.listContainer&&this.listContainer.appendChild(document.createTextNode("Error getting recommendations: "+this.errorHandler)));case"function":return void this["errorHandler"]()}},n.prototype.getContainer=function(){return this.element.parentNode},n.prototype.sendEvent=function(e,t,i,r,n,o){var a=!1,s=this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.tmpl,l=this.response.trc["placement-group"],c=this.response&&this.response.trc?this.response.trc["session-data"]:null,d={ri:this.response?this.response.trc["req"]:null,sd:this.trc.getSessionData(c),ui:TRC.pageManager.getValue("user-id"),pi:this.trc.getItemId(),wi:this.response?this.response.trc["watched-item"]:null,pt:this.getItemType(),vi:this.cachedViewId||TRC.pageManager.getPageData(),li:this.getListId()},h=function(){a||(a=!0,n&&n())};this.isResponseFromCache()&&(d.cache="1"),this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.ad&&(d.ad=__trcJSONify(this.trc.formattedTRCRequest.ad)),this.trc.systemFlags&&"normal"!==this.trc.systemFlags.loaderType&&(d.lt=this.trc.systemFlags.loaderType),this.response.trc&&(this.trc.global["tmp-use-pb-params"]&&this.trc.configForPostEvent[e]||"click"===e&&this.sendClickPiggyBack)&&(this.response.trc["ppb"]&&(t.ppb=this.response.trc["ppb"]),this.response.trc["cpb"]&&(t.cpb=this.response.trc["cpb"]),this.response.trc["prty"]&&(t.prty=this.response.trc["prty"]),this.response.trc["caty"]&&(t.caty=this.response.trc["caty"])),"click"==e&&"nt"==t.prt&&(d={}),s&&(d.tmpl=s),l&&(d.pg=l),__trcCopyProps(t,d),!0!==this.response.trc["video-list"]["content-hub-forced-placement"]||"available"!==e&&"explore"!==e&&"visible"!==e||(e="content-hub-"+e),r?(TRC.pConsole(this.mode_name,"info","sending event type : "+e,d,"object"),this.trc.log1(e,d,i,h,this.placement)):this.trc.logTrcEvent(e,d,i,h);var u=null;TRC.performance&&"visible"==e&&TRC.performance.mark("11.0."+this._id,u,this.mode_name,this.reqId,"visible",TRC.PerfEvenType.MARK),"number"==typeof o&&TRC.Timeout.set(h,o)},n.prototype.load=function(e){if(this.errorHandler=e,this.loadRBoxRequestFailed)return __trcError("loadRBox failed, aborting."),void this.abortRendering();var t;({})[this.placement]=this,this.loadScriptCallback(null,this.response),this.measureDistanceFromArticle(),this.takePageScreenshot()},n.prototype.measureDistanceFromArticle=function(){TRC.util.isPercentEnabled(this.trc.global,"enable-distance-from-article")&&TRC.ModuleLoader.load("distance-from-article",TRC.DistanceFromArticle,function(){TRC.DistanceFromArticle.measureAndReport(this.trc.global["distance-violation-minimal-article-text-percentage"])}.bind(this))},n.prototype.takePageScreenshot=function(){var e;!(!TRC.mobile||!TRC.mobile.reportClick)||TRC.isAMP||!TRC.util.isPercentEnabled(this.trc.global,"screenshot-capture-enabled")||TRC.ModuleLoader.load("screenshot-capture",TRC.screenshotCaputre,function(){TRC.screenshotCaputre.init(document.body,{keepImages:!0})}.trcBind(this))},n.prototype.getBoundingClientRect=function(e,t){var i;return t?{left:t.boundingClientRect.left+e.left,right:t.boundingClientRect.right+e.left,top:t.boundingClientRect.top+e.top,bottom:t.boundingClientRect.top+e.bottom,width:t.boundingClientRect.width,height:t.boundingClientRect.height}:e},n.prototype.clearChilds=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},n.prototype.hasDuration=function(){for(var e,t=this.trc.getProperty(this.mode_name,"detail-order",this.propertiesOverride).split(","),i=0;e=t[i];i++)if("duration"==e)return!0;return!1},n.prototype.cleanStyleDimensions=function(e){var t=null;try{__trcDOMWalker(e,function(e){e.style.cssText&&(e.style.width="",e.style.height=""),-1!==(e.className+"").indexOf("video-duration")&&(t=e)})}catch(e){}return t},n.prototype.createBillboard=function(){var e=__trcGetElementsByClass("trc_rbox_outer","div",this.element)[0];if(!e)return null;var t=document.createElement("div");return this.billboard=t,t.className="trc_billboard",t.style.width="auto",e.parentNode.insertBefore(t,e),e.style.clear="both",t},n.prototype.checkForBlocking=function(){var e,t,i,r,n,o,a,s,l="",c=[],d=[],h=[];if(this.trc.global["enable-old-abp-check"]){for(e=0;t=this.boxes[e];e++){try{(n=t.video_data["is-in-network"]||t.video_data["is-native"])||(r=t.video_data["is-syndicated"])}catch(e){}o=n?d:r?h:c,t&&1===t.nodeType&&t.childNodes.length?(a=document.trcGetCurrentStyle(t,"-moz-binding"),i=document.trcGetCurrentStyle(t,"orphans"),"hidden"!=(s=document.trcGetCurrentStyle(t,"visibility"))&&("none"==document.trcGetCurrentStyle(t,"display")?("4321"==document.trcGetCurrentStyle(t,"orphans")&&(l=l||"adblockplus"),o.push(1)):a&&"none"!=a&&(l=l||"adblockplus",o.push(1)))):o.push(1)}(c.length||h.length||d.length)&&__trcWarn("blocked:"+c.length+"-"+d.length+"-"+h.length+"-"+(l||"unknown"))}},n.prototype.setVideoPlayerLoad=function(e,t,i,r,n,o){try{this.pVideoLoader.loadVideo({playerContainer:e,url:t,poster:i,itemIndex:r,itemId:n},o),TRC.tlf&&console.time("in setVideoPlayerLoad")}catch(e){__trcWarn("Error in setVideoPlayerLoad",e)}},n.prototype.getThumbnailsDimensions=function(e){var t=e.boundingClientRect,i;return{width:Math.ceil(t.width),height:Math.ceil(t.height)}},n.prototype.removeCarouselItemImgLazyLoadObserver=function(e){for(var e=e.split(" "),t,i=0;i<e.length;i++)-1!==(t=this.lazyLoadImageObserversIds.indexOf(e[i]))&&(TRC.intersections.unobserve(this.lazyLoadImageObserversIds[t]),this.lazyLoadImageObserversIds.splice(t,1))},n.prototype.createCarouselContainerImgLazyLoadObserver=function(){var e={targetElement:this.container,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.createCarouselItemImgLazyLoadObserver.trcBind(this)};this.lazyLoadImageObserversIds.push(TRC.intersections.observe(e))},n.prototype.loadCarouselItemImage=function(e,t,i,r,n,o,a,s,l,c){var d=this.getThumbnailsDimensions(a),h=s.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(e,t,i,r,n,o,!0,d),h&&this.removeCarouselItemImgLazyLoadObserver(h)},n.prototype.createCarouselItemImgLazyLoadObserver=function(e,t,i,r){for(var n,o=t.getAttribute(TRC.intersections.TARGET_ATTRIB),a=0;a<this.boxes.length;a++)n={rootSelector:"#"+this.outerBox.id,targetElement:this.boxes[a].thumbBlock,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,onEnter:this.loadCarouselItemImage.trcBind(this,this.boxes[a].img,this.boxes[a],this.boxes[a].img_src,100,this.boxes[a].thumbBlock,this.trc.global["thumb-lazy-load-switch"])},this.lazyLoadImageObserversIds.push(TRC.intersections.observe(n));o&&this.removeCarouselItemImgLazyLoadObserver(o)},n.prototype.lazyLoadImage=function(e,t,i,r,n,o,a,s,l,c){var d=this.getThumbnailsDimensions(a),h=s.getAttribute(TRC.intersections.TARGET_ATTRIB);this.setImageLoad(e,t,i,r,n,o,!0,d),h&&this.removeCarouselItemImgLazyLoadObserver(h)},n.prototype.alternateImgBaseUrl=function(e){return TRC.imageCounter++,e.replace("images.taboola.com",this.imagesAltUrls[TRC.imageCounter%this.imagesAltUrls.length])},n.prototype.setImageLoad=function(e,t,i,r,n,o,a,s){var l,c,h,u,p,m,g,f,v;if(g=TRC.util.isPercentEnabled(this.trc.global,"cloudinary-encode")?TRC.util.cloudinaryEncoding(i):this.trc.global["tmp-image-utf8-encode"]?encodeURIComponent(i):escape(i),!a&&this.shouldLazyLoadImages){if(this.isCarousel)return;return f={targetElement:n,threshold:0,rootMargin:this.lazyLoadViewportMarginThreshold,disableCheckOverlay:!0,onEnter:this.lazyLoadImage.trcBind(this,e,t,i,r,n,o)},void this.lazyLoadImageObserversIds.push(TRC.intersections.observe(f))}if(m=a?s:this.getContainerDim(n,t,this.isHiddenItem(t)))u=this.getImageOptimizationUrlByItemRtbProp(t.video_data),i=this.getImageOptimizePrefix(i,u,m)+g;else if(r)return void TRC.Timeout.set(this.setImageLoad.trcBind(this,e,t,i,r--,n,o,a,s),50);l=t.video_data["pvideo-url"],c=t.video_data.itemIndex,h=t.video_data["item-id"],this.imagesAltUrls.length>0&&(i=this.alternateImgBaseUrl(i)),this.trc.getExpoImageTag()&&(i+=(-1===i.indexOf("?")?"?":"&")+this.trc.getExpoImageTag()),t.img_src=i=TRC.URL.prototype.switchProtocol.call(i,d),e.src=i,v=Date.now(),TRC.performance&&TRC.performance.mark("imgLoad"+v+"start",null,"",v,"imgLoadTime",TRC.PerfEvenType.START),TRC.dom.on(e,"load",function(e){return TRC.performance&&TRC.performance.mark("imgLoad"+v+"stop",null,"",v,"imgLoadTime",TRC.PerfEvenType.STOP),!0}),this.pVideoLoader&&l&&(p={isCreatePVideoOverlay:this.trc.getProperty(this.mode_name,"p-video-overlay",this.propertiesOverride),video_data:t.video_data,container:t,language:this.trc["language"],isSendEvents:this.trc.global["p-video-overlay-send-events"]},n=this.isResponsive?n:n.firstChild,this.setVideoPlayerLoad(n,l,i,c,h,p))},n.prototype.getImageOptimizationUrlByItemRtbProp=function(e){return this.imageOptimizePrefixFlag=!0,e["is-rtb"]?this.rtbImageOptimizePrefix=this.rtbImageOptimizePrefix||this.getImageOptimizationUrl(e):(e["thumbnail-transformations"]||e["is-gift"])&&this.trc.global["image-optimization-url-per-item-is-enabled"]?this.getImageOptimizationUrl(e):this.imageOptimizePrefix=this.imageOptimizePrefix||this.getImageOptimizationUrl(e)},n.prototype.setImagePrefixUrl=function(e){var t="image-url-prefix",i=s,r;return e["is-rtb"]?(t="rtb-image-url-prefix",i=c):e["is-gift"]?(t="gif-url-prefix",i=l):e["thumbnail-transformations"]&&(r=o+a+","+e["thumbnail-transformations"]+"/"),TRC.shiftDomain(r||this.trc.getProperty(this.mode_name,t,this.propertiesOverride)||this.trc.global[t]||i)},n.prototype.handleGifPrefixParams=function(e){var t=this.trc.global["gif-fade-effect-in-ms"],i,r;return t&&"0"!==t&&(r=encodeURIComponent(",e_fade:{fade},e_fade:-{fade}".replace(new RegExp("{fade}","g"),t)),e=e.substr(0,e.length-1)+r+(e.lastIndexOf("/")===e.length-1?"/":"")),e},n.prototype.forceGifPrefixUrl=function(){return TRC.shiftDomain(this.trc.getProperty(this.mode_name,"gif-url-prefix",this.propertiesOverride)||this.trc.global["gif-url-prefix"]||l)},n.prototype.getImageOptimizationUrl=function(e){var t=this.setImagePrefixUrl(e),i=this.trc.global["images-host"],r=this.trc.getProperty(this.mode_name,"images-radius",this.propertiesOverride),n=e["is-gift"],o;return e["pvideo-url"]&&e.thumbnail&&e.thumbnail.indexOf(".gif")>-1&&(t=this.forceGifPrefixUrl(),n=!0),i&&i.length>2&&((o=new TRC.URL(t)).host=i,t=o.toString()),r&&"0"!=r&&(t=n?t.replace(new RegExp("f_gif"),"f_gif%2Cr_"+r):(t=t.replace(/f_jpg(%2C)?/,"")).replace(/fetch\//,"fetch/f_png%2C"+"r_"+r+"%2C")),n&&(t=this.handleGifPrefixParams(t)),t},n.prototype.isHiddenItem=function(e){return"none"===t.trcGetCurrentStyle(e,"display",null)},n.prototype.getContainerDim=function(e,t,i){var r,n,o=100;if(i){if(this.cachedImageDim)return this.cachedImageDim}else if(r=TRC.dom.getElementRect(e),n=Math.ceil(r.right-r.left))return o=Math.ceil(r.bottom-r.top||this.getAspectHeight(t)||n*this.getThumbAspectRatio(this.trc.modes[this.mode_name],"ratio")||o),this.cachedImageDim={width:n,height:o};return null},n.prototype.getAspectHeight=function(e){var t;return e.thumbnail_aspect?(t=TRC.dom.getElementRect(e.thumbnail_aspect)).bottom-t.top:0},n.prototype.getImageOptimizePrefix=function(e,t,i){TRC.performance&&TRC.performance.mark("7.1.1."+this._id);var r=this.getImageSizeFactor(),n=this.trc.getProperty(this.mode_name,"image-min-width",this.propertiesOverride)||110,o=this.trc.getProperty(this.mode_name,"image-max-dimension",this.propertiesOverride)||1500,a=parseInt(this.customImageSizeRound)||this.trc.getProperty(this.mode_name,"image-size-round",this.propertiesOverride)||20,s=this.trc.getProperty(this.mode_name,"image-max-ratio",this.propertiesOverride)||2.5,l=Math.min(Math.ceil(Math.max(i.width*r,n)/a)*a,o),c=Math.max(Math.min(this.getAllowedRatio(i),s),1/s),d=Math.ceil(l*c);return t=t.replace(new RegExp("{w}","g"),l.toString()).replace(new RegExp("{h}","g"),d.toString()),TRC.performance&&TRC.performance.mark("7.1.9."+this._id),t},n.prototype.getImageSizeFactor=function(){var e=this.trc.getProperty(this.mode_name,"image-size-factor",this.propertiesOverride)||1.2;return this.trc.global["use-dpr-images"]&&this.trc.getProperty(this.mode_name,"use-dpr-images",this.propertiesOverride)&&TRC.dom.isHighDensity()&&(e=this.trc.getProperty(this.mode_name,"image-dpr-factor",this.propertiesOverride)||e),e},n.prototype.getAllowedRatio=function(e){for(var t=this.trc.getSortedCloudinaryRatios(),i=this.trc.getProperty(this.mode_name,"image-allowed-ratio-diff",this.propertiesOverride)||.01,r=1*e.height/e.width,n=Math.abs(r-i),o=0;o<t.length;o++){var a=t[o];if(!isNaN(a)&&a>=n)return a}return r},n.prototype.isInViewPort=function(e,t){var i=TRC.visibility.getMinViewPortOffsets(this.container);return!(i<0&&Math.abs(i)>t)},n.prototype.createUtmParam=function(){return{utm:TRC.utm.join(",")+(this.utm?","+this.utm.join(","):"")}},n.prototype.postRender=function(e){if(e){var t=this.postRenderQueue.popFront();if(null==t)return void __trcDebug("TRCRBox.postRender: finished");try{t.func.call(this),TRC.pConsole(this.mode_name,"debug","executing postRender functions - see info",t.func.toString())}catch(e){__trcError("Error in TRCRBox.postRender while executing "+t.name,e)}}TRC.Timeout.set(this.postRender.trcBind(this,!0),0)},n.prototype.getPopupUrl=function(){return this.trc.getProperty(this.mode_name,"popup-custom-url",this.propertiesOverride)||"popup.taboola.com/"+(this.trc["language"]||"en")},n.prototype.check_visibility=function(){for(var e=0;e<this.boxes.length;e++){var t=this.boxes[e];this.itemMaxHeight&&(t.style.height=this.itemMaxHeight+"px")}},n.prototype.findElement=function(e,t,i,r){void 0===t&&(t=document),void 0===i&&(i="*");for(var n=t.getElementsByTagName(i),o=0;o<n.length;o++)if(e(n[o]))return n[o];return r},n.prototype.findElements=function(e,t,i){for(var r=[],n=0;e&&n<e.length;n++){var o=e[n],a=this.findElement(function(e){return e.className.search(o)>=0},t,"span");a&&(i&&(a=a.cloneNode(!0)),r.push(a))}return r},n.prototype.getLinkTarget=function(e,t,i){var r;return(r=t&&t[e]||i[e])||(r="_blank"),r},n.prototype.addPiggyBackParams=function(e){if(e)return e+"&ppb="+this.response.trc["ppb"]+"&cpb="+this.response.trc["cpb"]},n.prototype.detectItemFromSameHost=function(e,t){if(e===t||this.trc["detect-item-from-same-host"](e,t))return!0;for(var i=e.split(".").reverse().join(""),r=t.split(".").reverse().join(""),n=6,o=!0,a=0;a<n;a++)if(i[a]!==r[a]){o=!1;break}return o},n.prototype.createVideoLink=function(e,t){var i=document.createElement("a"),r=this.trc.global["publisher-onclick-nt-enabled"]&&e["is-in-network"],r=this.ntHandlerEnabled&&e["is-in-network"],n,o,a=this.sendClickPiggyBack?this.addPiggyBackParams(e.logger_url):e.logger_url,s=!0!==this.trc.global["disable-stop-propagation"],l=TRC.pageManager.getTopMostWindow().location.hostname,c=TRC.URL(e["url"]).host,d="sponsored";!0===this.response.trc["video-list"]["content-hub-forced-placement"]&&(a=a.replace("click","content-hub-click"));var h=!1;return e["is-in-network"]&&TRC.hasFeedView&&this.parentFeed&&this.parentFeed.enableAEClicks&&(this.detectItemFromSameHost(l,c)?(e.scParams=e.scParams||{},e.original_url=e.original_url||e.url,h=!0):(this.feedViewExchangeFallbackEventData={eventType:"fallback",original_url:l,target_url:c},this.shouldSendFeedViewExchangeFallbackEvent=!0)),r&&(e.hasNtClckHnadler=!0),TRC.isOptim("title-decode")?i.title=t:i.title=TRC.util.getHtmlDecodeText(t),e.link_target=this.link_target,!e.isSyndicated||r||h?(i.href=e.url,"blank"!=this.link_target?TRC.isAMP&&this.trc.global["amp_target"]?i.target=this.trc.global["amp_target"]:i.target="_parent":(i.target="_blank",i.onmousedown=function(e){((e=e||event).target||e.srcElement).target="_blank"}),e["is-in-network"]&&(e.scParams.prt="nt"),this.organicRedirParam&&(a=a.replace("&url=","&"+this.organicRedirParam+"=")),this.useRedirect&&this.useRedirectOnLink&&(i.href=a),i.onmousedown=function(e){var t=this.attachHeatMapDataToLink(a,e);i.href=t}.trcBind(this),i.onclick=this.videoLinkClickHandler.trcBind(this,e,i,a)):(i.href=e.url,n=this.getLinkTarget(this.getProviderType(e),this.linkTargetConf,this.defaultLinkTarget),(this.trc.global["allow-nofollow-for-exchange"]||!e["is-in-network"]||e["is-in-network"]&&!this.detectItemFromSameHost(l,c))&&(i.rel="nofollow",this.trc.global["disable-noopener-for-links"]||"_blank"!==n||(i.rel+=" noopener")),this.trc.global["disable-sponsored-for-links"]||e["is-in-network"]||(i.rel+=" "+d),i.logger_url=a.replace("&url=","&redir=")+(e["is-in-network"]?"&prt=nt":"")+(e["is-native"]?"&prt=nav":""),i.target=n,1==this.trc.global["enable-ie-split-click-event"]&&TRC.Browser.ie&&(o=i.logger_url.length>2048),!0===this.trc.global["touchstart-enabled"]&&TRC.dom.on(i,"touchstart",function(e){var t=this.attachHeatMapDataToLink(i.logger_url,e);i.href=t,i.isTouchPropagation=1,s&&e.stopPropagation()}.trcBind(this)),i.onmousedown=function(e){if(((e=e||event).target||e.srcElement).target=n,i.isTouchPropagation)return!0;if(!o)if(this.shiftRedirOnclick)i.href=i.logger_url;else{var t=this.attachHeatMapDataToLink(i.logger_url,e);i.href=t}}.trcBind(this),i.onclick=function(t){try{if(TRC.clickFraudDetect.isInitialized&&e["is-syndicated"]){var r=i.search.match(/[^&??=]+/g),n=r.indexOf("ri"),a="";if(n>-1&&(a+=r[n+1]),(n=r.indexOf("ii"))>-1){var s=r[n+1].match(/^~~V1~~(-?[\d]{10,})/);a+=s?"_"+s[1]:""}var l=i.href.indexOf("trc.taboola.com")>=0;TRC.clickFraudDetect.fraudScriptCallback(this.placement,TRC.pageManager.getValue("user-id"),a,this.trc.referrer,e.itemIndex,l)}}catch(e){__trcError("Publisher 'onclick' Fraud handler had an error",e)}if(this.shouldSendFeedViewExchangeFallbackEvent&&this.trc.sendAbTestEvent("feedView_ae",this.feedViewExchangeFallbackEventData),this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(e)["c"]),i.isTouchPropagation)return!0;if(o)this.sendEvent("click",{ii:e["item-id"],it:e.type},null,!1);else if(this.shiftRedirOnclick){var c=this.attachHeatMapDataToLink(i.logger_url,t);i.href=c}return!0}.trcBind(this)),this.trc.global["events-api-click-enabled"]&&TRC.dom.on(i,"click",function(t){var r=i.target;e.linkTarget=r,"_blank"===r?setTimeout(function(){TRC.EventsAPI.dispatchClick(e,this.response.trc)}.trcBind(this),0):TRC.EventsAPI.dispatchClick(e,this.response.trc)}.trcBind(this)),i},n.prototype.attachHeatMapDataToLink=function(e,t){if(!TRC.Heatmap.isEnabled(this.trc)||!this.listContainer.heatmap)return e;try{var i=this.listContainer.heatmap,r=TRC.Heatmap.collectClickHeatmapCardData(t),n;return r["item-d"]=i.collectClickHeatmapItemData(t),e+"&"+"d="+JSON.stringify(r)}catch(t){return __trcError("Error in trcrbox-ui.attachHeatMapDataToLink - "+t,t),e}},n.prototype.changeUrlProtocol=function(e,t){var i=window.location.protocol,r=new TRC.URL(e.original_url),n=r&&r.protocol;i!==n&&(this.trc.global["enable-feed-view-redirect-url"]||(e.url=e.url.replace(n,i)),i=encodeURIComponent(i),n=encodeURIComponent(n),e.logger_url=this.options&&this.options.feedViewConfig&&this.options.feedViewConfig.disableHandlePublisherChangesToFeedView?e.logger_url.replace(i,n):e.logger_url.replace(n,i),t.href=e.logger_url.replace(n,i))},n.prototype.openFeedView=function(e,t,i,r){var n=!!(TRC&&TRC.mobile&&TRC.mobile.reportClick);return!(TRC.isAMP||n||!r&&TRC.dom.isInIframe(!0))&&(this.changeUrlProtocol(e,t),r?("_self"!==t.target&&(t.target="_self"),!0):(new TRC.FeedView(this,e,this.container),!1))},n.prototype.videoLinkClickHandler=(h=2e3,u=function(e,t,i,r){return i.target="_blank",r?!!TRC.Browser["firefoxUpto"](8)||(e.clickLink(i.href,i.target),!1):(i.href=t.url,e.sendEvent("click",{ii:t["item-id"],it:t.type},null,!1),!0)},function(t,i,r,n){var o,a,s;if(n=n||event,TRC.feedViewModuleLoaded&&TRC.FeedView&&(s=(a=TRC.FeedView.getSelectors())&&window.frames&&window.frames.name===a.IFRAME_ID,this.enableFeedView||s)){var l=new TRC.URL(t.url),c=l&&l.host;this.detectItemFromSameHost(window.location.host,c)?t.link_target="feedView":this.trc.sendAbTestEvent("feedView_different_domains","true")}var d=t.link_target,p=!1,m=this.useRedirect;switch("embed"!==d&&this.trc.sendExternalTracking(this.getItemExternalTrackingURLsList(t)["c"]),d){case"feedView":p=this.openFeedView(t,i,a,s);break;case"blank":if((n.target||n.srcElement).target="_blank",m){var g=this.attachHeatMapDataToLink(r,n);i.href=g}p=u(this,t,i,m);break;default:if(m&&"local"!=t.link_target&&"function"!=typeof this.onclick&&"function"!=typeof this.trc.onclick){if(this.shiftRedirOnclick){var g=this.attachHeatMapDataToLink(r,n);i.href=g}p=!0}else this.sendEvent("click",t.hasNtClckHnadler?t.scParams:{ii:t["item-id"],it:t.type},null,!1,this.publisherClickHandler.trcBind(this,t,this.clickLink.trcBind(this,t.url)),h)}return t.url!=t.original_url&&__trcDebug("url:"+t.original_url+", changed to:"+t.url+", on page:"+e.location.href),p||(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),p}),n.prototype.clickLink=function(t,i){TRC.Browser["firefoxUpto"](8)&&(e.location.href=t);var r=document.createElement("a");if(r.href=t,r.target=i||"_parent",r.style.visibility="hidden",document.body.appendChild(r),r.click)r.click();else{var n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,button:0});r.dispatchEvent(n)}},n.prototype.publisherClickHandler=function(e,t){var i=__trcCopyProps(e,{});delete i["item-id"],delete i.link;try{if("function"==typeof this.onclick&&!this.onclick.call(this.pubOpts,i))return!1;if("function"==typeof this.trc.onclick&&!this.trc.onclick.call(this.pubOpts,i))return!1}catch(e){__trcError("Publisher 'onclick' handler had an error",e)}return t()},n.prototype.add_span=function(e,t,i){var r=document.createElement("span");return null!=e&&(r.className=e),null!=t&&("object"==typeof t?r.appendChild(t):/[<>&]/.test(t)?r.innerHTML=t:r.innerText=t),void 0!==i&&i.appendChild(r),r},n.prototype.genBidiLabel=function(e,t,i){var r,n,o=TRC.util.textIsRTL(t),a=n=t,s="video-label "+i;if(this.shouldUseSmartEllipsis()&&(!this.useNativeLineClamp||o)){var l=this.trc.getProperty(this.mode_name,"tokenize-strategy")||"word",c=TRC.Ellipsis._tokenizeStrategies[l];a=TRC.Ellipsis._tokenizeSingle(n.innerHTML||n,c),s+=" trc-smart-ellipsis",o&&(s+=" tbl-rtl-label")}return r=this.add_span(s,a,e),e[i]=r,r.isRTL=o,r.tokenizeStrategy=l,r},n.prototype.handlePublishedDate=function(e,t){var i="published-date",r,n=this.trc.getProperty(this.mode_name,"format-x-days-ago",this.propertiesOverride)?TRC.DateUtils.dateFormatTimeAgo(e[i],this.trc.language):this.formatData(i,e[i]),o;if("with-branding"===this.trc.getProperty(this.mode_name,"published-date-position",this.propertiesOverride)){var a=t.querySelector(".branding"),s;a&&TRC.dom.addClass(a,"inline-branding"),n=" "+(this.trc.getProperty(this.mode_name,"branding-separator",this.propertiesOverride)||"|")+" "+n}this.add_span("video-label video-published-date",n,t)},n.prototype.buildLabelBox=function(e,t,i){var r,n,o;for(-1!==i.indexOf("title")&&this.createTitleAndIconContainer(e),r=0;r<i.length;r++)switch(n=i[r]){case"title":this.genBidiLabel(e,t.title,"video-title");break;case"uploader":void 0!==t.uploader&&this.add_span("video-label video-uploader",this.formatData("uploader",t.uploader),e);break;case"category":void 0!==t.category&&this.add_span("video-label video-category",this.formatData("category",decodeURIComponent(t.category.split(";")[0].split("//")[0])),e);break;case"views":this.add_span("video-label video-views",this.formatData("views",t["views"]),e);break;case"rating":this.add_span("video-label video-rating",this.formatData("rating",t["rating"]),e);break;case"description":var a;this.genBidiLabel(e,t.description,"video-description").title='"Description: '+this.removeHtmlTags(t.description)+'"';break;case"duration":void 0!==t.duration&&""!=t.duration&&this.add_span("video-label video-duration-detail",this.formatData("duration",t.duration),e);break;case"branding":o=t.isSyndicated?this.shouldHandleScBrandingWithSponsoredLink()?this.createScBrandingWithSponsoredLink(t,e):this.createScBranding(t,e):this.createOrganicBranding(t,e),e["branding"]=o;break;case"url":break;case"published-date":this.handlePublishedDate(t,e);break;default:void 0!==t[n]&&t[n]&&this.add_span("video-label video-"+n,this.formatData(n,t[n]),e)}},n.prototype.shouldHandleScBrandingWithSponsoredLink=function(){return"after_branding"===this.getDisclosurePosition()},n.prototype.getDisclosurePosition=function(){return this.disclosurePosition||(this.disclosurePosition=this.trc.getProperty(this.mode_name,"disclosure-position",this.propertiesOverride)),this.disclosurePosition},n.prototype.getDisclosureAlignment=function(){return this.disclosureAlignment||(this.disclosureAlignment=this.trc.getProperty(this.mode_name,"disclosure-alignment",this.propertiesOverride)),this.disclosureAlignment},n.prototype.createScBrandingWithSponsoredLink=function(e,t){var i,r,n;if(i=this.trc.getProperty(this.mode_name,"branding-separator",this.propertiesOverride),this.branding=this.add_span("branding composite-branding",null,t),this.add_span("branding-inner",this.formatData("syndicator",e["branding-text"]),this.branding),r=this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride))return"right"!==(n=this.getDisclosureAlignment())&&this.add_span("branding-separator",i,this.branding),this.renderDisclosureLinkWithBranding(this.branding,r,n),this.branding},n.prototype.createScBranding=function(e,t){return e["branding-text"]?this.add_span("branding",this.formatData("syndicator",e["branding-text"]),t):e["branding-url"]?this.add_span("branding","<img src='"+e["branding-url"]+"'>",t):void 0},n.prototype.createOrganicBranding=function(e,t){return this.add_span("branding",this.formatData("syndicator",this.getPublisherBrandingName()),t)},n.prototype.createTitleAndIconContainer=function(e){var t,i,r,n=this.trc.getProperty(this.mode_name,"title-icon",this.propertiesOverride)||"NONE";"CUSTOM"===n?r=this.trc.getProperty(this.mode_name,"title-icon-url",this.propertiesOverride):"PUBLISHER_LOGO"===n&&(r=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-logo")),r&&(t=document.createElement("span"),i=document.createElement("img"),t.className="video-icon-container",i.className="video-icon-img trc_img",i.src=TRC.URL.prototype.switchProtocol.call(r,d),e.className+=" label-box-with-title-icon",t.appendChild(i),e.appendChild(t))},n.prototype.isUsingImageOptimizationService=function(e){var t=this.trc.global["images-host"]?this.trc.global["images-host"]:"images.taboola.com";return e.indexOf(t)>-1},n.prototype.isTaboolaCDNImage=function(e){return e.match(/cdn.taboola.com\/.*thumbnails\S/)},n.prototype.logImageError=function(e,t,i,r){var n,o;__trcWarn("Failed to load "+(r?r+" ":"")+"thumbnail "+e+" for item="+t+", loading "+i+" thumbnail instead",null,this.trc.global["rbox-image-error-reporting-pct"]||.1)},n.prototype.getFallbackImageForTaboolaCDNImage=function(e,t,i){var r=this.isUsingImageOptimizationService(e),n=e.search(/\Shttp\S/),o=unescape(e.slice(n+1)),a=TRC.URL.prototype.switchProtocol.call(r?unescape(o):o,i);return this.logImageError(e,t,a,"taboola CDN"),a},n.prototype.getFallbackImageForNonTaboolaCDNImage=function(e,t,i){var r=e.src,n=this.isUsingImageOptimizationService(r),o=r.search(/\Shttp\S/),a=n&&unescape(e.src.slice(o+1)),s="https:"!==i||a&&0===a.indexOf(i)||this.trc.global["always-allow-orig-image-fallback"];return o>5&&n&&s?this.getOrigImageFromOptimizationUrl(e.src,a,t):this.getDefaultThumbnail(e,t,i)},n.prototype.getOrigImageFromOptimizationUrl=function(e,t,i){return this.logImageError(e,i,t),t},n.prototype.getDefaultThumbnail=function(e,t,i){var r=this.trc.getProperty(this.mode_name,"default-thumbnail",this.propertiesOverride),n=TRC.URL.prototype.switchProtocol.call("undefined"!=r?r:"",i);return e.onerror=null,this.logImageError(e.src,t,"default"),n},n.prototype.getRuleAspectRatio=function(e,t){return!(!e["virtualThumbWidth"]||!e["virtualThumbHeight"]||isNaN(e["virtualThumbWidth"])||isNaN(e["virtualThumbHeight"]))&&("ratio"==t?e["virtualThumbHeight"]/e["virtualThumbWidth"]:e["virtualThumbHeight"]/e["virtualThumbWidth"]*100)},n.prototype.getThumbAspectRatio=function(e,t){try{var i=e["thumbnail-height"]/e["thumbnail-width"];return"ratio"==t?i:Math.round(100*i)}catch(e){return __trcWarn("getThumbAspectRatio",e.message),null}},n.prototype.getThumbnailURL=function(e,t,i){if(void 0===e["thumb-size"])return e["thumbnail"];for(var r=[{w:e["thumb-size"].split("x")[0],h:e["thumb-size"].split("x")[1],u:e["thumbnail"]}],n=1;void 0!==e["thumb-size-"+n];n++)r.push({w:e["thumb-size-"+n].split("x")[0],h:e["thumb-size-"+n].split("x")[1],u:e["thumbnail-"+n]});r=r.sort(function(e,t){return e.w*e.h-t.w*t.h});for(var o=0;o<r.length;o++)if(t*i<=r[o].w*r[o].h)return r[o].u;return r.pop().u},n.prototype.addTaboolaLogo=function(){this.renderAdchoicesLink(this.getAdchoiceConfig(),this.itemsTypes,this.adcItemTypes),this.renderAttributionLink(),this.renderDisclosureLink(),this.addClearingDiv(),this.addWidgetContentType(),TRC.ccpa.renderOnWidgetFooter(this)},n.prototype.renderAttributionLink=function(){var e=this.add_span(null,this.trc.getProperty(this.mode_name,"attribution-text",this.propertiesOverride)),t=this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride),i=this.trc["attribution"]&&"none"!=t,r=this.trc.getProperty(this.mode_name,"hide-attribution-when-no-place",this.propertiesOverride),n=this.trc["attribution-disclosure-direction"];i&&("top"===t?this.isContainerNarrowForAttribution()?r||this.generateLinksBox(this.getWidgetFooter(),e,n,"attribution",null,"bottom"):this.generateLinksBox(this.header.ext,e,n,"attribution",null,"top"):this.generateLinksBox(this.getWidgetFooter(),e,n,"attribution",null,"bottom"))},n.prototype.isContainerNarrowForAttribution=function(){if(TRC.isOptim("attribution")&&this.isFeedCard)return!1;var e=this.trc.getProperty(this.mode_name,"min-width-for-attribution",this.propertiesOverride),t=this.container.clientWidth||this.container.offsetWidth;return t&&e>t},n.prototype.adcHoverHandler=function(e,t){var i=__trcGetElementsByClass("trc_adc_b_logo",null,e)[0];i.style.display=t?"inline-block":"none"},n.prototype.isAdchoicesEnabled=function(e,t,i){return!!e&&("off"!=e.status&&!!this.isAdchoiceItemTypes(t,i))},n.prototype.isAdchoiceItemTypes=function(e,t){for(var i in e)if(t[i])return!0;return!1},n.prototype.getAdchoiceConfig=function(){var e=this.trc.getProperty(this.mode_name,"adchoice-position",this.propertiesOverride);return{status:this.trc.global["has-adchoice"]&&"none"!==e?"on":"off",position:e,url:this.trc.getProperty(this.mode_name,"adchoice-target-url",this.propertiesOverride)||this.trc.global["adchoice-url"],enableBig:this.trc.getProperty(this.mode_name,"adchoice-large",this.propertiesOverride)}},n.prototype.getAdchoicesPosition=function(e,t){var i="top";return"auto"===e?(i="none"===t?i:t,this.isContainerNarrowForAttribution()&&(i="bottom")):i=e,i},n.prototype.renderAdchoicesLink=function(e,t,r){if(this.hasAdChoicesLogo=this.isAdchoicesEnabled(e,t,r),this.hasAdChoicesLogo){var o=null,a=this.getAdchoicesPosition(e.position,this.trc.getProperty(this.mode_name,"attribution-position",this.propertiesOverride)),s,l=e.url||null,c=this.trc["attribution-disclosure-direction"];(o=this.add_span("trc_adc_wrapper",null)).appendChild(this.add_span("trc_adc_s_logo",null)),e.enableBig&&o.appendChild(this.add_span("trc_adc_b_logo",null)),o.appendChild(i()),s="top"===a?this.generateLinksBox(this.header.ext,o,c,"adc",null,"top",l):this.generateLinksBox(this.getWidgetFooter(),o,c,"adc",null,a,l),e.enableBig&&(s.onmouseover=function(){n.prototype.adcHoverHandler(this,!0)},s.onmouseout=function(){n.prototype.adcHoverHandler(this,!1)})}},n.prototype.generateLinksBox=function(e,t,r,n,o,a,s,l){var c,d=document.createElement("div"),h=["trc_desktop_"+n+"_link","trc_mobile_"+n+"_link"],u,p=this.getPopupUrl(),m=TRC.PROTOCOL+"//"+TRC.shiftDomain(p)+"/?"+this.getAttributionLinkParams(),g=s||m,f="sponsored",v=function(e){return TRC.aboutUs.open(e)||!1};if(e){for(c=0;c<h.length;c++){if((u=document.createElement("a")).className=h[c]+" trc_attribution_position_"+(a||"bottom"),u.rel="nofollow",this.trc.global["disable-sponsored-for-links"]||(u.rel+=" "+f),this.trc.global["disable-noopener-for-links"]||(u.rel+=" noopener"),u.appendChild(t.cloneNode(!0)),u.href=g,u.target="_blank",this.hasAdChoicesLogo){var b=this.add_span("trc_logos_v_align",null);b.appendChild(i()),u.appendChild(b)}c||(u.onclick=v),d.appendChild(u)}return"rtl"===r&&(d.style.cssFloat=d.style.styleFloat="left"),d.className="logoDiv link-"+n+" "+(o?" attribution-disclosure-link-"+o:"")+(l?" align-"+n+"-"+l:""),e.appendChild(d),d}},n.prototype.getAttributionLinkParams=function(){var e=["template=colorbox","utm_source="+this.publisher,"utm_medium=referral","utm_content="+this.mode_name+":"+this.placement+":"+(this.trc["test-variant"]||"")];return!this.trc.global["show-rtb-ad-choices-icon"]&&this.privacyId&&e.push("plink="+this.privacyId),e.join("&")},n.prototype.addWidgetContentType=function(){var e=this.getWidgetContentType(this.itemsTypes);this.element.className+=" "+("sponsored"===e&&TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"]["trc-content-sponsored"]:"trc-content-"+e)+" "},n.prototype.getWidgetContentType=function(e){var t=e["is-syndicated"]||e["is-in-network"]||e["is-native"];return t&&e["is-organic"]?"hybrid":t?"sponsored":"organic"},n.prototype.getItemsTypesList=function(e){for(var t={},i=0,r;r=e[i];i++)r["is-syndicated"]?t["is-syndicated"]=!0:r["is-in-network"]?t["is-in-network"]=!0:r["is-native"]?t["is-native"]=!0:t["is-organic"]=!0,r["is-adc"]&&(t["is-adc"]=!0);return t},n.prototype.getPrivacyId=function(e){for(var t=0,i;i=e[t];t++)if(i["plink"])return i["plink"];return null},n.prototype.getWidgetFooter=function(){var e=this.getWidgetToFeedHelper();return this.footer||(this.footer=document.createElement("div"),this.footer.className="trc-widget-footer",e&&!e.getFooter()?e.addFooterToFeed(this.footer):this.element.appendChild(this.footer)),this.footer},n.prototype.renderDisclosureLink=function(){var e=this.trc.getProperty(this.mode_name,"min-width-for-disclosure",this.propertiesOverride),t=this.trc.getProperty(this.mode_name,"hide-disclosure-when-no-place",this.propertiesOverride),i=this.add_span(null,this.trc.getProperty(this.mode_name,"disclosure-link-text-sponsored",this.propertiesOverride)),r=this.add_span(null,this.trc.getProperty(this.mode_name,"disclosure-link-text-hybrid",this.propertiesOverride)),n,o=this.trc["attribution-disclosure-direction"];"none"!==this.getDisclosurePosition()&&"after_branding"!==this.getDisclosurePosition()&&(n=this.isFeedCard&&TRC.isOptim("disclosure")?0:this.container.clientWidth||this.container.offsetWidth,"bottom"!==this.getDisclosurePosition()&&this.isHeaderExtContainerAvailable()&&(!n||n>=e)?(this.generateLinksBox(this.header.ext,i,o,"disclosure","sponsored","top"),this.generateLinksBox(this.header.ext,r,o,"disclosure","hybrid","top")):t||(this.generateLinksBox(this.getWidgetFooter(),i,o,"disclosure","sponsored","bottom"),this.generateLinksBox(this.getWidgetFooter(),r,o,"disclosure","hybrid","bottom")))},n.prototype.renderDisclosureLinkWithBranding=function(e,t){var i=this.add_span(null,t),r="right"===this.getDisclosureAlignment()?this.trc.direction:null;this.generateLinksBox(e,i,r,"disclosure","sponsored",this.getDisclosurePosition(),null,this.getDisclosureAlignment())},n.prototype.isHeaderExtContainerAvailable=function(){return this.header.ext&&"No Header"!=this.trc.getProperty(this.mode_name,"header",this.propertiesOverride)},n.prototype.addClearingDiv=function(){var e=document.createElement("div");e.className="trc_clearer",this.element.appendChild(e)},n.prototype.genDuration=function(e){var t=this.formatDuration(e),i=document.createElement("dt");i.style.position="absolute",i.style.overflow="hidden",i.style.height="auto",i.style.width="auto",i.style.zIndex=48,i.style.right=0;var r=document.createElement("div");return r.style.zIndex=50,r.style.paddingLeft="4px",r.style.paddingRight="4px",r.innerHTML=t,i.appendChild(r),i},n.prototype.fixBoxOverflow=function(e,t,i,r,n,o){var a=!1;if(!(null==e||this.useNativeLineClamp&&(a=this.setupBoxLineClamp(e)))){if(this.shouldUseSmartEllipsis()&&!a)return __trcDebug("Skipping fixBoxOverflow due to feature flag.");if(TRC.ellipsisPerf&&console.timeStamp("Taboola old ellipsis"),!(e.clientHeight<=0||e.clientWidth<=0)){var s=!1;e.parentNode.font=this.getFontSize(e);var l=e.innerHTML;e.innerHTML="";var c=this.add_span(null,"H",e),d=Math.max(c.offsetHeight,c.clientHeight),h=Math.max(0,e.scrollHeight-e.clientHeight);for(e.removeChild(c),e.innerHTML=l,this.addInlineElementsForMeasure(e.inlineDetailsElements,e,!0),e.inlineDetailsElementsHTML=e.innerHTML.replace(l,""),t=t.replace(/^\s+|\s+$/g,"");e.clientHeight+h+d/2<e.scrollHeight&&t.length;)s=!0,t=this.truncateOverflowingText(e,t,i),e.innerHTML+=e.inlineDetailsElementsHTML;this.hideClonedElementsAfterMeasure(n,o),TRC.Browser.ie&&!s&&(e.style.height="auto")}}},n.prototype.setupBoxLineClamp=function(e){TRC.dom.removeClass(e,"trc_ellipsis");var t=parseInt(document.trcGetCurrentStyle(e,"line-height"),10),i=parseInt(document.trcGetCurrentStyle(e,"height"),10),r=t&&i?Math.round(i/t).toString():null;return!(!r||e.isRTL||"rtl"==document.trcGetCurrentStyle(e,"direction"))&&(TRC.dom.addClass(e,"trc_ellipsis"),TRC.css.utils.setStyleProperty(e,"-webkit-line-clamp",r,!1),e.parentNode.font=this.getFontSize(e),!0)},n.prototype.truncateOverflowingText=function(e,t,i){t=i&&t.search(/\s/)>=0?t.replace(/\s+\S+$/,""):t.substr(0,t.length-1);var n=e.getElementsByTagName("bde");return e.inlineDetailsElementsHTML&&n.length&&(e.innerHTML=e.innerHTML.replace(e.inlineDetailsElementsHTML,"")),e.getElementsByTagName("span").length>0&&e.removeChild(e.getElementsByTagName("span")[0]),(n.length>0?n[0]:e).innerHTML=t,this.add_span(null,r(),e),t},n.prototype.addInlineElementsForMeasure=function(e,t,i){for(var r,n,o,a=0;e&&a<e.length;a++)r=e[a],!(n=this.findElement(function(e){return e.className.search(r)>=0&&e.parentNode===t},t))&&r&&((o=document.createElement("span")).className="trc_inline_detail_spacer",o.innerHTML=" ",t.appendChild(o),t.appendChild(i?r.cloneNode(!0):r))},n.prototype.hideClonedElementsAfterMeasure=function(e,t){for(var i,r,n=0;e&&n<e.length;n++)i=e[n],(r=this.findElement(function(e){return e.className.search(i)>=0&&e.parentNode===t},t,"span"))&&(r.style.display="none")},n.prototype.removeHtmlTags=function(e){return e.replace(new RegExp("<[^>]+>","g"),"")},n.prototype.formatData=function(e,t){var i=this.trc.getProperty(this.mode_name,"format-"+e,this.propertiesOverride);return"function"==typeof(i=i||"%s")?i.call(this,t):((e.search("duration")>=0||e.search("Duration")>=0)&&(t=this.formatDuration(t)),void 0===t&&(t=""),i.replace(new RegExp("%\\w"),'<dt style="display:inline">'+t+"</dt>"))},n.prototype.formatDuration=function(e){var t=parseInt(e/3600);t>=1?e%=3600:t=0;var i=parseInt(e/60),r=parseInt(e%60);return"number"!=typeof t||"number"!=typeof i||"number"!=typeof r||isNaN(t)||isNaN(i)||isNaN(r)||e<1?"":(t>=1?t+":":"")+(i<10?"0":"")+i+":"+(r<10?"0":"")+r},n.prototype.formatNumber=function(e){return void 0===e?"":this.trc.runHook(this,this.mode_name,"format-number",this.propertiesOverride,!1,e)},n.prototype.dateFormatISO=TRC.DateUtils.dateFormatISO,n.prototype.dateFormatAmerican=TRC.DateUtils.dateFormatAmerican,n.prototype.dateFormatEuropean=TRC.DateUtils.dateFormatEuropean,n.prototype.getFontSize=function(e){for(var t=0,i=!1,r=document.trcGetCurrentStyle(e,"font-size"),n=["px","pt","em","ch"];!i&&t<n.length;){if(r.indexOf(n[t])){switch(r=parseInt(r),n[t]){case"px":break;case"pt":r/=.75;break;case"em":case"ch":r*=10}i=!0}t++}return r},n.prototype.sendExploreEvent=function(){this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null),this.sendEvent("explore",{},null,!0)},n.prototype.onMouseOverExploreTrackerHandler=function(t,i){var r=(i=i||e.event).target||i.srcElement;r!=this.container&&null!=this.exploreTimeoutId||r==this.container&&null!=this.exploreTimeoutId||(this.exploreTimeoutId=TRC.Timeout.set(this.sendExploreEvent.trcBind(this),t))},n.prototype.setExploreTracker=function(){var e=0;this.exploreTimeoutId=null,void 0!==this.trc.global&&(e=this.trc.global["explore-delay"]?this.trc.global["explore-delay"]:e),this.container.onmouseover=this.onMouseOverExploreTrackerHandler.trcBind(this,e),0!=e&&(this.container.onmouseout=this.onMouseOutExploreTrackerHandler.trcBind(this))},n.prototype.onMouseOutExploreTrackerHandler=function(t){t=t||e.event;var i=this.container.getBoundingClientRect();t.clientX>=i.left&&t.clientX<i.right&&t.clientY>=i.top&&t.clientY<i.bottom||this.exploreTimeoutId&&(TRC.Timeout.clear(this.exploreTimeoutId),this.exploreTimeoutId=null)},n.prototype.resetBoxes=function(){this.boxes=[]},n.prototype.setResponsiveRules=function(e,t){if(!TRC.css.responsive.injectedStyles[e]||this.disableResponsiveCSSReuse){var i=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride);i?this.setOnStandardResponsiveRules(e,t,i):this.setOnAutoSizeResponsiveRules(e,t,this.trc.getProperty(this.mode_name,"auto-size-rules",this.propertiesOverride)),TRC.css.responsive.injectedStyles[e]=!0}},n.prototype.setOnStandardResponsiveRules=function(e,t,i){var r=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),n=1,o,a=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride)||1.33;try{o=this.responsiveRules=[];for(var s=0,l=i.length;s<l;s++)o[s]={rows:i[s].rows||r||n,cells:i[s].cells,min:i[s].minWidth,max:i[s].maxWidth,margin:i[s].margin.h,ratio:this.getRuleAspectRatio(i[s])||this.getThumbAspectRatio(this.trc.modes[this.mode_name])||100*this.DEFAULT_THUMB_RATIO};TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(e,this.responsiveRules,t,this.trc.cssReset,this.isWCTextLinks,this.trc.direction,this.isCarousel,a))}catch(e){__trcError("Error in setOnStandardResponsiveRules : ",e.message)}},n.prototype.setOnAutoSizeResponsiveRules=function(e,t,i){var r=TRC.dom.getWindowWidth(),n=this.container.clientWidth>0?this.container.clientWidth:this.container.offsetWidth,o=r/n,a=this.trc.getProperty(this.mode_name,"rows",this.propertiesOverride),s=1,l,c=this.trc.getProperty(this.mode_name,"carousel-min-items",this.propertiesOverride);try{l=this.responsiveRules=[];for(var d=0,h=i.length;d<h;d++)l[d]={rows:i[d].rows||a||s,cells:i[d].n,min:o*i[d]["minWc"],margin:Math.round((i[d]["maxWsRange"]+i[d]["minWsRange"])/2)/n*100,ratio:this.getThumbAspectRatio(this.trc.modes[this.mode_name])||i[d].ratio||100*this.DEFAULT_THUMB_RATIO};TRC.css.utils.setStyleElements(TRC.css.responsive.rulesToCssText(e,this.responsiveRules,t,this.trc.cssReset,!1,this.trc.direction),this.isCarousel,c)}catch(e){__trcError("Error in setOnAutoSizeResponsiveRules : ",e.message)}},n.prototype.setMetaAttribute=function(e){e.meta={},__trcCopyProps(this.trc,e.meta),delete e.meta["video-list"]},n.prototype.drawResponsiveList=function(t){TRC.tlf&&console.timeStamp("start mode - "+this.mode_name),TRC.tlf&&console.group("mode - "+this.mode_name),TRC.tlf&&console.time("mode rendering");var i=this.listContainer,r=document.createElement("div"),n=this.recommendationList.length,o=0,a=1e3,s=TRC.dom.closest(this.getContainer(),".trc_related_container"),l="trc_elastic";TRC.pConsole(this.mode_name,"debug","start drawing responsive mode - see info",this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),"object"),this.internalContainer=r,this.orientation=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride);var c=this.disableResponsiveCSSReuse?this.id:this.mode_name;if(TRC.dom.addClass(s,l+" "+l+"_"+c),this.resetBoxes(),r.id="internal_"+this.id,TRC.dom.clearInnerElements(i),i.appendChild(r),this.setExploreTracker(),this.setMetaAttribute(r),this.firstVideo=null,this.setResponsiveRules(l+"_"+c,n),this.pasreRecommendationList(n,this.hasDuration(),r),this.trc.global["smart-ellipsis"]||(this.isClassFilter?TRC.listen("IE_ClassShift",this.fixResponsiveVideoBoxes.trcBind(this)):(TRC.dom.on(e,"resize",this.fixResponsiveVideoBoxes.trcBind(this).trcThrottle(500)),TRC.listen("videoCubeChange",this.fixResponsiveVideoBoxes.trcBind(this)))),!this.boxes.length||this.boxes.length<=0){var d=this.response.feedPlacement||this.placement;TRC.dispatch("onRboxFlowError",{placement:d})}TRC.dom.addClass(this.boxes[0],"trc-first-recommendation trc-spotlight-first-recommendation"),this.postRenderQueue.pushBack("list-suffix,publisher-end",function(e){this.trc.runHook(this,this.mode_name,"list-suffix",this.propertiesOverride,!0,e,this),this.trc["publisher-end"](this.id),TRC.CustomModulesManager.runHook("publisher-end",null,this,this.id)}.trcBind(this,r)),this.postRenderQueue.pushBack("checkForBlocking",this.checkForBlocking.trcBind(this)),this.postRender(),this.visibleTimeoutId=null,void 0!==this.trc.global&&(o=this.trc.global["visible-delay"]?this.trc.global["visible-delay"]:o,a=this.trc.global["visible-cycle"]?this.trc.global["visible-cycle"]:a),TRC.fallbackApi.finalize(this),TRC.Heatmap.isEnabled(this.trc)&&this.attachHeatMapToContainer(s),this.visibilityReporter=new TRC.WidgetVisibilityReporter(this),TRC.eventDelegator.dispatch("onrender",{name:this.mode_name,container:this.container,placement:this.orig_placement}),TRC.EventsAPI.dispatchRender(t,this),TRC.tlf&&console.timeEnd("mode rendering"),TRC.tlf&&console.groupEnd()},n.prototype.attachHeatMapToContainer=function(e){this.isFeedCard?this.listContainer.heatmap=this.getCurrentFeed(e).heatmap:(this.listContainer.heatmap=new TRC.Heatmap(this.trc),TRC.dom.on(this.listContainer,"click",function(e){this.listContainer.heatmap.captureAndSendClickData(e)}.bind(this)))},n.prototype.getCurrentFeed=function(e){var t=this.trc.feedsManager.feeds,i=e.getAttribute("data-placement-name");for(var r in t)if(t.hasOwnProperty(r)&&i.indexOf(r)>-1)return t[r]},n.prototype.createVideoBoxDirectURL=function(e){var t=e.video_data,i=t.url;try{if(!t.isSyndicated){t.original_url=i;var r=this.formatTrackingParam()||this.tracking;(i=this.trc.runHook(this,this.mode_name,"change-url",this.propertiesOverride,!1,i,e,r))===t.original_url&&r&&(i=TRC.URL.prototype.addParamsToUrl(i,r))}t.url=i,e.directURL=i}catch(e){__trcError("Error in createVideoBoxDirectURL",e)}},n.prototype.formatTrackingParam=function(){var e=this.getModeClientProperty("organic-tracking-params");if(e)return Object.keys(e).reduce(function(t,i,r){return t+(0!==r?"&":"")+i+"="+e[i]},"")},n.prototype.createVideoBoxClickUrlParams=function(e,t){var i=this.response&&this.response.trc?this.response.trc["session-data"]:null,r={pi:this.trc.getItemId(),ri:this.response.trc["req"],sd:this.trc.getSessionData(i),ui:TRC.pageManager.getValue("user-id"),it:e.type,ii:e["item-id"],pt:this.getItemType(),li:this.listContainer.id,sig:e.sig,url:t,vi:this.cachedViewId||TRC.pageManager.getPageData(),p:e.isSyndicated?e.publisher:"",r:Math.floor(100*Math.random())},n=this.trc.formattedTRCRequest&&this.trc.formattedTRCRequest.tmpl,o=this.response.trc["placement-group"];return n&&(r.tmpl=n),o&&(r.pg=o),r},n.prototype.createVideoBoxClickUrlWithParams=function(e){var t=[],i;for(var r in e)e.hasOwnProperty(r)&&e[r]&&(this.trc["normalize-log-param"](r,e[r]),t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])));return i=d+"//"+this.domain+"/"+encodeURIComponent(this.trc["normalize-log-param"]("publisher",TRC.publisherId))+"/log/3/click?"+t.join("&"),this.trc.enableExperimentsVariantIdEvent&&this.trc.experimentsVariantIdParamsStr&&(i+="&"+this.trc.experimentsVariantIdParamsStr),this.trc.getLoaderTypesValue()&&(i+="&"+this.trc.getLoaderTypesValue()),i},n.prototype.createVideoBoxClickUrl=function(e,t){var i=this.createVideoBoxClickUrlParams(e,t);return this.createVideoBoxClickUrlWithParams(i)},n.prototype.fixResponsiveBoxTitleAndDesc=function(e){var t=e.labelsBox,i=e.video_data,r=e.link,n=this.getDetailSpansFromLabelsBoxes("title",e),o=this.getDetailSpansFromLabelsBoxes("description",e),a=function(){i.thumbUnder&&t.font&&(r.style.fontSize=t.font+"px")};try{if(!this.trc.global["smart-ellipsis"])for(var s=0;s<n.length;s++)n[s].innerHTML=e.getAttribute("data-item-title");setTimeout(function(){for(var t=0;t<n.length;t++)this.fixBoxOverflow(n[t],e.getAttribute("data-item-title"),!1,"false"!=i["truncate-title"]);a()}.trcBind(this),0),o.length&&setTimeout(function(){for(var e=0;e<o.length;e++)this.fixBoxOverflow(o[e],i["description"],!0,!0)}.trcBind(this),0)}catch(e){__trcError("Problem in fixResponsiveBoxTitleAndDesc",e)}},n.prototype.getDetailSpansFromLabelsBoxes=function(e,t){var i=t.querySelectorAll('.video-label-box [class*="'+e+'"]');return[].slice.call(i)},n.prototype.createVideoBoxLabels=function(e){var t=document.createElement("span");return this.setVideoBoxLabelsClass(t),e.appendChild(t),t},n.prototype.setVideoBoxLabelsClass=function(e){e.className="video-label-box"},n.prototype.createThumbBlockHolder=function(e,i,r){var n=t.createElement("div");n.className="thumbBlock_holder",i.appendChild(n),this.createVideoBoxThumbBlock(e,n,r),this.createVideoBoxAspect(n,e)},n.prototype.createVideoBoxAspect=function(e,t){var i=document.createElement("div");i.className="videoCube_aspect",e.appendChild(i),t.thumbnail_aspect=i},n.prototype.drawVideoBoxThumbnailLink=function(e,t,i,r){var n;return e.img_src=this.getThumbnailURL(i,this.trc.getProperty(this.mode_name,"thumbnail-width",this.propertiesOverride),this.trc.getProperty(this.mode_name,"thumbnail-height",this.propertiesOverride)),n=this.createVideoLink(i,r),TRC.dom.addClass(n,"item-thumbnail-href"),this.createThumbBlockHolder(e,n,t),n},n.prototype.createVideoBoxThumbBlock=function(e,t,i){var r=document.createElement("span"),n="",o=e.video_data;i||"video"!=o.type||void 0===o.duration||""==o.duration||"0"==o.duration||(n=this.genDuration(o.duration)),r.className="thumbBlock",o.imageIframe&&(this.drawImageIframe(r,o.imageIframe,e.link.logger_url),e.hasFloatingButton=!0),e.thumbBlock=r,t.appendChild(r)},n.prototype.setVideoBoxImageHandlers=function(e,t,i){e.onerror=this.responsiveImageOnErrorHandler.trcBind(this,e,t,i,d),e.onload=this.responsiveImageOnLoadHandler.trcBind(this,e,t,i)},n.prototype.responsiveImageOnErrorHandler=function(e,t,i,r){var n=e.src,o=n.search(/\Shttp\S/),a=i["item-id"];if(o>5&&this.isTaboolaCDNImage(n)&&!TRC.Browser.ie)return n=this.getFallbackImageForTaboolaCDNImage(n,a,r),void(t.img_src=e.src=n);n=this.getFallbackImageForNonTaboolaCDNImage(e,a,r),t.thumbBlock.style.backgroundImage="URL('"+n+"')"},n.prototype.responsiveImageOnLoadHandler=function(e,t,i){e&&e.complete?this.appendVideoBoxImage(t):TRC.Timeout.set(arguments.callee.trcBind(this,t.thumbBlock,e),50)},n.prototype.fixResponsiveVideoImage=function(e,t,i){var r;if(this.imageOptimizePrefixFlag)return t.style.visibility="visible",t.style.width="100%",void(t.style.height="100%");var n=null,o=e.thumbBlock,a=n?n.right-n.left:o.clientWidth,s=n?n.bottom-n.top:o.clientHeight,l,c,d,h,u,p=this.isCssImportant,m=TRC.css.utils;if(0!=s&&0!=a&&0!=t.height)try{(l=a/s)>(c=this.getImageAspectRatio(t))?(d=Math.floor(a/c),h=Math.floor((s-d)/2),m.setStyleProperty(t,"width",a+"px",p),0!=h&&(t.style.position="relative",m.setStyleProperty(t,"top",h+"px",p))):(r=Math.floor(s*c),u=Math.floor((a-r)/2),m.setStyleProperty(t,"height",s+"px",p),0!=u&&(t.style.position="relative","ltr"==this.trc.direction?m.setStyleProperty(t,"left",u+"px",p):m.setStyleProperty(t,"left",-1*u+"px",p))),t.style.visibility="visible"}catch(e){alert(e.message),__trcError("Error in fixResponsiveVideoImage : ",e.message)}else i||TRC.Timeout.set(this.fixResponsiveVideoImage.trcBind(this,e,t,!0),500)},n.prototype.getImageAspectRatio=function(e){return e.trcRatio||(e.trcRatio=e.width/e.height),e.trcRatio},n.prototype.createVideoBoxImageLoader=function(e){var t=new Image,i=e.video_data,r=e.thumbBlock;this.trc.global["thumb-lazy-load-switch"]&&this.updateThumbnailStack(t),t.style.visibility="hidden",e.img=t,this.setVideoBoxImageHandlers(t,e,i),this.trc.global["use-delay-image-load"]?TRC.Timeout.set(this.setImageLoad.trcBind(this,t,e,e.img_src,100,r,this.trc.global["thumb-lazy-load-switch"]),10):this.setImageLoad(t,e,e.img_src,100,r,this.trc.global["thumb-lazy-load-switch"]),this.add_span("thumbnail-overlay",null,r),i.isSyndicated&&this.addVideoBoxBranding(r,i),new TRC.ThumbnailOverlayComponents(r,i.isSyndicated,this)},n.prototype.updateThumbnailStack=function(e){this.thumbnailImageStack=this.thumbnailImageStack||[],this.thumbnailImageStack.push(e)},n.prototype.addVideoBoxBranding=function(e,t){var i=document.createElement("span");i.className="branding",t["branding-text"]?i.appendChild(document.createTextNode(this.formatData("syndicator",t["branding-text"]))):t["branding-url"]&&this.createBrandingImage(i,t["branding-url"]),e.appendChild(i)},n.prototype.createBrandingImage=function(e,i){var r=t.createElement("img");r.src=i,e.appendChild(r)},n.prototype.createVideoBoxLabelOverlay=function(e){var t=document.createElement("span");t.className="label-box-overlay",e.appendChild(t)},n.prototype.createVideoBoxThumbLink=function(e,t){try{var i=e.video_data,r=e.thumbnail_position,n=this.drawVideoBoxThumbnailLink(e,t,i,e.getAttribute("data-item-title"));if("under"===r){if(n.title=e.link.title="",e.insertBefore(n,e.link),this.trc.global["enable-text-over"])if(TRC.StoryWidget.shouldInitStoryWidget(this))TRC.StoryWidget.setTextOverForStoryWidget(this,e);else{var o=document.createElement("span");TRC.dom.addClass(e.link,"tbl-text-over-container"),TRC.dom.addClass(o,"tbl-text-over"),e.link.appendChild(o)}else TRC.dom.addClass(e.link,"video-labels-anchor"),this.createVideoBoxLabelOverlay(e.labelsBox);this.findElement(function(e){return e.className.search("title")>=0},e.labelsBox,"span",null),i.thumbUnder=!0}else"bottom"===r?e.appendChild(n):e.insertBefore(n,e.link)}catch(e){__trcError("Error in createVideoBoxThumbLink",e)}},n.prototype.setVideoBoxDataAttr=function(e,t){e.setAttribute("data-item-id",t["item-id"]),e.setAttribute("data-item-title",t.title),e.setAttribute("data-item-thumb",this.getThumbnailURL(t,100,80)),e.setAttribute("data-item-syndicated",!!t.isSyndicated)},n.prototype.getThumbnailPosition=function(e,t){return t||this.trc.getProperty(this.mode_name,"thumbnail-position",this.propertiesOverride)},n.prototype.drawResponsiveVideoBox=function(e,t,i,r,n,o){var a=document.createElement("div");try{if(t=__trcCopyProps(t,{},{isSyndicated:t["is-syndicated"]||t["is-in-network"]||t["is-native"],isPhoto:"photo"===t.type,isText:"text"===t.type,imageIframe:t.hasOwnProperty("image-iframe")&&t["image-iframe"],tags:"string"==typeof t.tags?TRC.text.parseCSV(t.tags):[]}),this.setApiItemsData(t),this.createResponsiveVideoBox(a,t,n,o),"none"!==a.thumbnail_position&&this.createVideoBoxThumbLink(a,i),this.createResponsiveLabelsBoxes(a),this.createCallToActionButton(this,a),!TRC.botDetected&&t[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE]&&t[TRC.TrackingScriptLoader.TRC_SCRIPT_TAGS_ATTRIBUTE].length>0){var s=this.outermostContainer.id+"-"+t["itemIndex"];TRC.TrackingScriptLoader.renderScriptTagIntoVideoBox(a,t,s)}return this.trc.runHook(this,this.mode_name,"item-renderer",this.propertiesOverride,!0,a,a.video_data),e.appendChild(a),this.fixResponsiveBoxTitleAndDesc(a),this.boxes.push(a),this.shouldHandleScBrandingWithSponsoredLink()&&TRC.Browser.ieUpto(10)&&this.handleBrandingWithDisclosureContainerWidth(),t.imageIframe||this.createVideoBoxImageLoader(a),a}catch(e){__trcError("Error in drawResponsiveVideoBox",e)}return null},n.prototype.createResponsiveLabelsBoxes=function(e){this.buildLabelBox(e.preLabelsBox,e.video_data,e.pre_detail_order),this.buildLabelBox(e.labelsBox,e.video_data,e.detail_order)},n.prototype.createCallToActionButton=function(e,t){this.trc.global["enable-call-to-action-creative-component"]&&this.trc.getProperty(this.mode_name,"ctaWidget")&&(TRC.ctaManager=TRC.ctaManager||new TRC.CTAManager,TRC.ctaManager.shouldRenderCTAForItem(e,t)&&TRC.CTAManager.renderCTAItem(e,t))},n.prototype.handleBrandingWithDisclosureContainerWidth=function(){var e=this.branding;if(e){var t=e.querySelector(".branding-inner"),i=e.querySelector(".branding-separator"),r=e.querySelector(".logoDiv"),n=i&&TRC.dom.getOuterWidth(i),o=TRC.dom.getOuterWidth(r);t.style.maxWidth="calc(100% - "+(n+o)+"px)"}},n.prototype.createResponsiveVideoBox=function(e,t,i,r){e.rbox=this,e.video_data=t,e.thumbnail_position=this.getThumbnailPosition(t,r||null),this.setVideoBoxDataAttr(e,t),this.setVideoBoxClassName(e),this.createVideoBoxDirectURL(e),t.logger_url=this.createVideoBoxClickUrl(e.video_data,e.directURL),e.setAttribute("data-item-title",t.title),this.setVideoBoxDetailsOrder(e,i||null),this.createDetailsLabelsContainers(e)},n.prototype.createDetailsLabelsContainers=function(e){var t=0;e.pre_detail_order.length>0&&(this.createVideoBoxPreThumbnailLink(e),t++),e.detail_order.length>0&&(this.createVideoBoxAfterThumbnailLink(e),t++),t>1&&TRC.dom.addClass(e,"trc-split-label")},n.prototype.setVideoBoxClassName=function(e){var t=0,i=this.isResponsive,r=this.trc.getProperty(this.mode_name,"orientation",this.propertiesOverride),n=TRC.blocker.blockedState>0&&this.trc.global["switch-abp-class"]?this.trc.global["switch-abp-class"]["syndicatedItem"]:TRC.SYNDICATED_CLASS_NAME;this.setVideoBoxClassName=function(e){var o=e.video_data;e.className="videoCube "+"trc_spotlight_item "+"origin-"+o.origin+" thumbnail_"+e.thumbnail_position+(o.isSyndicated?" "+n:"")+(o["is-in-network"]?" inNetworkItem":"")+(o["is-native"]?" tabNativeItem":"")+(o.isPhoto?" photoItem":"")+(o.isText?" textItem":"")+" "+(i?"videoCube_"+(t+=1)+"_child":r)},this.setVideoBoxClassName(e)},n.prototype.setVideoBoxDetailsOrder=function(e,t){var i=t||this.trc.getProperty(this.mode_name,"detail-order"+(e.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride),r=this.trc.getProperty(this.mode_name,"before-detail-order"+(e.video_data.isSyndicated?"-syndicated":""),this.propertiesOverride);e.detail_order=i?i.split(","):[],e.pre_detail_order=r?r.split(","):[]},n.prototype.createVideoBoxAfterThumbnailLink=function(e){var t=e.video_data,i=e.getAttribute("data-item-title"),r=this.createVideoLink(t,i);e.labelsBox=this.createVideoBoxLabels(r),e.appendChild(r),e.link=r,TRC.dom.addClass(r,"item-label-href"),TRC.dom.addClass(e.labelsBox,"trc-main-label")},n.prototype.createVideoBoxPreThumbnailLink=function(e){var t=e.video_data,i=e.getAttribute("data-item-title"),r=this.createVideoLink(t,i);e.preLabelsBox=this.createVideoBoxLabels(r),e.appendChild(r),e.preLink=r,TRC.dom.addClass(r,"item-label-href"),TRC.dom.addClass(e.preLabelsBox,"trc-pre-label"),TRC.dom.addClass(e,"item-has-pre-label")},n.prototype.appendVideoBoxImage=function(e){try{(null!=e.img_src||this.trc.global["thumb-lazy-load-switch"])&&(void 0===e.image_div?e.thumbBlock.style.backgroundImage="URL('"+e.img_src+"')":(e.thumbBlock.appendChild(e.image_div),e.image_div.appendChild(e.img),e.img.style.visibility="visible"))}catch(e){__trcError("Pager thumbnail images fixing errors",e)}},n.prototype.pasreRecommendationList=function(e,t,i){var r,n;this.stopBoxRendering=!1;for(var o=0;o<e;o++){TRC.tlf&&0===o&&console.time("item rendering"),(r=this.recommendationList[o]).itemIndex=o,null==this.firstVideo&&"video"==r.type&&(this.firstVideo=r);try{this.trc.runHook(this,this.mode_name,"item-data-filter",this.propertiesOverride,!1,r),this.fixHeight&&!this.stopBoxRendering?(n=this.drawResponsiveVideoBox(i,r,t,this.orientation),this.stopBoxRendering=this.hasMaxHeightExploitation(parseInt(document.trcGetCurrentStyle(this.container,"height"),10),this.fixHeight),this.stopBoxRendering&&this.safeRemoveItem(n)):this.fixHeight||this.drawResponsiveVideoBox(i,r,t,this.orientation,null,null)}catch(e){__trcError("Error in pasreRecommendationList",e)}TRC.tlf&&0==o&&console.timeEnd("item rendering")}},n.prototype.safeRemoveItem=function(e){var t=e.parentNode;TRC.dom.clearInnerElements(e),t.removeChild(e)},n.prototype.hasMaxHeightExploitation=function(e,t){return t<=e},n.prototype.fixResponsiveVideoBoxes=function(){for(var e=this.boxes,t=0,i=e.length;t<i;t++)this.fixResponsiveBoxTitleAndDesc(e[t])},n.prototype.createSponsoredOverlay=function(e){var i=t.createElement("span");i.className="trc_sponsored_overlay",e.appendChild(i)},n.prototype.setSponsoredOverlayClass=function(e,t){t.className="thumbnail"==e?"trc_sponsored_overlay_base":"trc_sponsored_overlay_base round"},n.prototype.genrateResponsiveSponsoredLabel=function(e,t){var i=this.trc.getProperty(this.mode_name,"sponsored-location",this.propertiesOverride);if(i.match(/^thumbnail/)){var r=document.createElement("span");try{this.setSponsoredOverlayClass(i,r),this.createSponsoredOverlay(r),t.appendChild(r),e["spnoverlay"]=r}catch(e){__trcError("Error while generating sponsored label",e)}}},n.prototype.generateResponsiveOuters=function(e){if(null==this.listContainer){this.header=this.generateHeader(e);var i=t.createElement("div");i.id=this.id.replace("trc_","outer_"),i.className="trc_rbox_outer",this.generateResponsiveRBoxDiv(i),e.appendChild(i),this.outerBox=i,this.addTaboolaLogo(),e.style.display="block"}},n.prototype.generateResponsiveRBoxDiv=function(e){var i=t.createElement("div");i.id=this.getListId(),i.className="trc_rbox_div trc_rbox_border_elm",e.appendChild(i),this.listContainer=i},n.prototype.getAllExternalTrackingURLsList=function(){var e=this.response.trc["video-list"].video,t;try{if(!this.externalTrackingURLsList){this.externalTrackingURLsList={};for(var i=0;e&&i<e.length;i++)for(var r in t=this.getItemExternalTrackingURLsList(e[i]))t.hasOwnProperty(r)&&(this.externalTrackingURLsList[r]||(this.externalTrackingURLsList[r]=[]),this.externalTrackingURLsList[r]=this.externalTrackingURLsList[r].concat(t[r]))}return this.externalTrackingURLsList}catch(e){return __trcError("Error in TRCRBox.getAllExternalTrackingURLsList"),{}}},n.prototype.getItemExternalTrackingURLsList=function(e){var t=e["item-id"],i=e["itp"],r,n,o,a={};if(!t)return __trcDebug("Item does not have id. External tracking pixel will not be sent if defined"),[];try{if(this.externalTrackingURLsListByItemId||(this.externalTrackingURLsListByItemId={}),!this.externalTrackingURLsListByItemId[t]){for(var s=0;i&&s<i.length;s++)n=(r=i[s])["t"],o=r["u"],n&&o&&(a[n]||(a[n]=[]),a[n].push(o));this.externalTrackingURLsListByItemId[t]=a}return this.externalTrackingURLsListByItemId[t]}catch(e){return __trcError("Error in TRCRBox.getItemExternalTrackingURLsList"),[]}},n.prototype.sendPlacementTrackingPixelsOnce=function(e){this.trc.log1(e,{ri:this.response.trc.req},null,null,this.placement,this.sendAllTrackingPixelsOfType.trcBind(this,e))},n.prototype.sendAllTrackingPixelsOfType=function(e){this.trc.sendExternalTracking(this.getAllExternalTrackingURLsList()[e])},n.prototype.shouldUseSmartEllipsis=function(){return this.trc.global["smart-ellipsis"]&&("enableAndOverrideModeFlag"===this.trc.global["smart-ellipsis"]||this.trc.getProperty(this.mode_name,"smart-ellipsis"))},n.prototype.getEffectiveResponsiveRule=function(t,i,r){if(t=t||this.responsiveRules,i=i||"min",r=r||"max","function"!=typeof e["matchMedia"]||!this.isResponsive||!t)return null;for(var n=0;n<t.length;n++)if(e["matchMedia"]("screen and (min-width: "+t[n][i]+"px)"+(isNaN(t[n][r])?"":" and (max-width: "+t[n][r]+"px)")).matches)return t[n];return null},n.prototype.getCurrentListSize=function(){var e=this.trc.getProperty(this.mode_name,"responsive-rules",this.propertiesOverride),t=this.getEffectiveResponsiveRule(e,"minWidth","maxWidth");return this.isResponsive&&t?t.rows*t.cells:this.trc.getListSize(this)},n.prototype.drawImageIframe=function(e,t,i){t=t||"",i=i&&i.replace(/&redir=[^&]*/,"")+"&redir=",e.innerHTML=t.replace("${CLICK_URL_ESC}",encodeURIComponent(i))},n.prototype.getWidgetToFeedHelper=function(){return this.parentFeed&&this.parentFeed.widgetToFeedHelper},n.prototype.getPublisherBrandingName=function(){if(!this.publisherBrandingText){var e=this.trc.getPublisherVersionPropertyWithFallbackToNetwork("publisher-branding")||"";this.publisherBrandingText=TRC.text.encodeHTML(e)||this.trc.getSiteNameOgValue()||""}return this.publisherBrandingText},n.prototype.sendAvailableEvent=function(e,t,i,r){if(!this.isResponseFromCache()||this.trc.global["send-available-for-cached-response"])if(!r&&this.trc.isDeferredAvailable){TRC.performance&&TRC.performance.mark("8.0.1."+this._id);var n=this.sendEvent.trcBind(this,"available",this.util.merge(e,{df:1}),t.getAll(),!0);i?TRC.Timeout.set(n,0):this.postRenderQueue.pushBack("available",n)}else this.sendEvent("available",e,t.getAll(),!0)},n.prototype.isResponseFromCache=function(){return this.response&&this.response.cached},n.prototype.getModeClientProperty=function(e){return this.trc.getProperty(this.mode_name,e,this.propertiesOverride)}}(window,document),function(e,t){var i=TRC.URL=function(e){var t=TRC.text.lsplit;if(!e)throw new Error("Invalid URL!");this.href=e;var i=t(e,"#",2);return this.hash=i.length>1?"#"+i.pop():"",i=t(e=i[0],"?",2),this.search=i.length>1?"?"+i.pop():"",i=t(e=i[0],"://",2),this.protocol=i.length>1?i.shift()+":":"",i=t(e=i[0],"/",2),this.pathname=i.length>1?"/"+i.pop():"/",i=t(e=i[0],"@",2),this.auth=i.length>1?i.shift():"",i=t(e=i[0],":",2),this.port=i.length>1?parseInt(i.pop()):0,this.host=i[0],this},r={"http:":1,"https:":1};i.prototype.toString=function(e){return(this.host?this.protocol+"//"+(this.auth?this.auth+"@":"")+this.host+(this.port?":"+this.port:""):"")+this.pathname+this.search+(e?"":this.hash||"")},i.prototype.switchProtocol=function(e,t){var i=this instanceof TRC.URL?this:new TRC.URL(this),n;return r[e]&&(t&&"https:"==i.protocol||(i.protocol=e)),(n=i.toString(!1)).length>1?n:""},i.prototype.getParameter=function(e,t){for(var i,r=(this instanceof TRC.URL?this:new TRC.URL(this)).search.substr(1).split(/&/),n=0;n<r.length;n++){var o=r[n].split(new RegExp("="),2);if(unescape(o[0])==e)return t?t(o[1]):unescape(o[1])}return null},i.prototype.addParamsToUrl=function(e,t){var i=e.split("#");return i[0]+(i[0].search("\\?")>=0?"&":"?")+t+(i[1]?"#"+i[1]:"")}}(window,document),function(e,t){e.TRC=e.TRC||{},TRC.UserIdMerger={notifyPossibleUserChange:function(e,t,i,r){var n,o,a;e.global["rbox-enable-fix-user-id-event"]&&(n=TRC.pageManager.getValue("user-id"),o=TRC.pageManager.getPublisherValue(t,"session-data"),this.multipleUsersExist(i,n)&&this.sendUserIdFixEvent(e,n,i,o,r))},multipleUsersExist:function(e,t){return t&&e&&t!==e},sendUserIdFixEvent:function(e,t,i,r,n){var o={time:(new Date).getTime(),fromUser:t,toUser:i,fromSD:r,toSD:n};e.sendEvent("fix-user-id",o)}}}(window,document),function(){TRC.InvokePVideoLoader=function(){TRC.PVideoLoader=function e(t,i,r,n){this.blockVideo=n.blockThumbnailVideoLoader,this.blockVideo||(TRC.VideoLoader.call(this,t.trc,i,t.placement,t.container,r),this.rbox=t)},TRC.PVideoLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoLoader.prototype.ITEM_ID_SEPARATOR="~~",TRC.PVideoLoader.prototype.getCallbacksObjectKey=function(){return"pVideoCallbacks"},TRC.PVideoLoader.prototype.genVideoCallback=function(videoCallbackParams){var videoCallbackName=this.generateCallbackName(),that=this;return TRC.pVideoCallbacks[videoCallbackName]=function(data){if(data=data||{},data.tags&&data.tags[0]){var unitBootSrc=data.tags[0].unitBootSrc||that.videoConfig.unitBootSrc,script=document.createElement("script");script.src=unitBootSrc,script.setAttribute("type","text/javascript"),script.setAttribute("src",unitBootSrc),script.onload=function(){var unit=eval(data.tags[0].url),viewabilityConfig=that.videoConfig["autoTriggerConfig"]["viewabilityConfig"];if(-1==viewabilityConfig.time&&(viewabilityConfig.time=0,viewabilityConfig.percentage=101),unit.set("pVideoUrl",videoCallbackParams.url),unit.set("playerContainer",videoCallbackParams.playerContainer),unit.set("components.PosterView",{isActive:!0,imageLocation:videoCallbackParams.poster}),unit.set("customization.placeHolder.background-color","black"),unit.set("viewPercent",viewabilityConfig.percentage),unit.set("secondsInView",viewabilityConfig.time),unit.set("isPlayOnHover",that.videoConfig["autoTriggerConfig"]["hover"]),unit.set("isRepeat",that.videoConfig.repeat),that.videoConfig["videoEventsEnabled"]){var videoDataForEvent=that.getVideoDataForEvent(videoCallbackParams.itemIndex,videoCallbackParams.itemId);unit.on("error",function(){that.sendDebugEvent("error",videoDataForEvent)}),unit.on("eligible",function(){that.sendDebugEvent("eligible",videoDataForEvent)}),unit.on("play",function(e){that.sendDebugEvent("play",videoDataForEvent,e)}),unit.on("render",function(){that.sendDebugEvent("rendered",videoDataForEvent)}),unit.on("quarterly",function(e){that.sendDebugEvent("quarterly",videoDataForEvent,e)}),unit.on("complete",function(){that.sendDebugEvent("complete",videoDataForEvent)})}TRC.tlf&&console.timeEnd("in setVideoPlayerLoad"),TRC.tlf&&console.timeStamp("end setVideoPlayerLoad")},document.getElementsByTagName("head")[0].appendChild(script)}},"TRC."+this.getCallbacksObjectKey()+"."+videoCallbackName},TRC.PVideoLoader.prototype.sendDebugEvent=function(e,t,i){var r,n=window.trc_debug_level;r={event:e,data:i||null,rii:t.rii,placement:t.placement,mode:t.modeName,itemIndex:t.itemIndex,itemId:t.itemId},window.trc_debug_level=3,__trcDebug("Performance Video Event: "+JSON.stringify(r)),window.trc_debug_level=n},TRC.PVideoLoader.prototype.getVideoDataForEvent=function(e,t){return{rii:this.rbox["response"]["trc"]["req"],placement:this.rbox["placement"],modeName:this.rbox["mode_name"],itemIndex:e,itemId:this.extractRealItemId(t)}},TRC.PVideoLoader.prototype.extractRealItemId=function(e){if(!e)return null;var t=e.split(this.ITEM_ID_SEPARATOR)[2];return t&&t.length>0&&!isNaN(parseFloat(t))&&isFinite(t)?t:null},TRC.PVideoLoader.prototype.loadVideo=function(e,t){var i,r,n,o=TRC.VideoLoader.prototype.loadVideo.call(this,e);return o&&t&&(i=(n=t.container.getElementsByClassName("thumbBlock_holder"))&&n[0])&&t.isCreatePVideoOverlay&&(r=TRC.pVideoOverlay.create(t.video_data,t.language,t.isSendEvents),i.appendChild(r)),o}}}(),function(e,t,i){var r={en:{cancel:"CANCEL",goto:"GO TO"},de:{cancel:"Abbrechen",goto:"Mehr erfahren"},fr:{cancel:"Annuler",goto:"Se rendre sur"},it:{cancel:"Annulla",goto:"Vai a"},jp:{cancel:"キャンセル",goto:"サイトへ行く"},pt:{cancel:"Fechar",goto:"Ir para"},es:{cancel:"Cancelar",goto:"Ir a"},ko:{cancel:"CANCEL",goto:"지금 더 알아보기"},he:{cancel:"סגור",goto:"עבור לדף"}},n=(i=i||{dom:{stopEvent:function e(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()},on:function e(t,i,r){t.addEventListener(i,r)},addClass:function e(t,i){t.className+=" ".concat(i," ")},removeClass:function e(t,i){var r=new RegExp("s*".concat(i),"g");t.className=t.className.replace(r,"")}},global:{"p-video-overlay-send-events":!1}}).dom,o={},a,s=function e(t,r){if(a){var n={itemId:r["item-id"],publisher:r.publisher,syndicatorId:r["syndicator-id"]};TRCImpl.sendAbTestEvent&&TRCImpl.sendAbTestEvent(t,__trcJSONify(n)),i.modDebug.logMessageToServer(1,t,n)}},l=function e(t){return t&&t.length?t.replace(/(^\w+:|^)\/\//,"").replace(/\/.*/,""):"";var i},c=function e(t){var i=t.className.match(/p-video-overlay-show/);n[i?"removeClass":"addClass"](t,"p-video-overlay-show")},d=function e(t,i){c(i.currentTarget.firstElementChild),void 0===i.gotoSyndicator&&s("p-video-overlay__display-overlay",t),i.gotoSyndicator||n.stopEvent(i)},h=function e(t,i,r){s(i.msg,t),r.gotoSyndicator=i.flag},u=function e(t,i,r){var o=n.createHTMLElement("div",{className:t||""});return"function"==typeof i&&n.on(o,"click",i),r&&r.length&&r.forEach&&r.forEach(function(e){o.appendChild(e)}),o},p=function e(t){var i=n.createHTMLElement("span",{className:"p-video-back-action-label",innerText:o.cancel||r.en.cancel}),a;return u("p-video-overlay-action p-video-back-action",h.bind(this,t,{msg:"p-video-overlay__hide-overlay",flag:!1}),[i])},m=function e(t){var i=n.createHTMLElement("span",{className:"p-video-goto-action-label",innerText:o.goto||r.en.goto}),a=n.createHTMLElement("span",{className:"p-video-goto-action-url",innerHTML:t["branding-text"]}),s;return u("p-video-overlay-action p-video-goto-action",h.bind(this,t,{msg:"p-video-overlay__go-to-syndicator-page",flag:!0}),[i,a])},g=function e(t){var i=p(t),r=m(t),n;return u("p-video-overlay",null,[r,i])},f=function e(t,i,n){var l=g(t);a=n,o=r[i||"en"]||r.en;var c=u("p-video-overlay-container",d.bind(this,t),[l]);return s("p-video-overlay__overlay-created-on-item",t),c};i.pVideoOverlay={create:f,createVideoPlayerOverlayElement:g,createActionElement:u,createGotoActionElement:m,createBackActionElement:p,actionClickHandler:h,videoOverlayClickHandler:d,videoOverlayToggleDisplay:c,stripUrl:l,sendDebugEvent:s}}(window,document,TRC),function(){var SingleVideoManagerUnitLoader=function(_TRC$BaseVideoUnitLoa){function SingleVideoManagerUnitLoader(e,t){var i;return _classCallCheck(this,SingleVideoManagerUnitLoader),(i=_possibleConstructorReturn(this,_getPrototypeOf(SingleVideoManagerUnitLoader).call(this,e))).trcManager=t,i.parentFeedOptions=e.parentFeedOptions,i}return _inherits(SingleVideoManagerUnitLoader,_TRC$BaseVideoUnitLoa),_createClass(SingleVideoManagerUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData){var unit=eval(videoCallbackData.tags[0].url);return this.setUnitParams(unit),unit}},{key:"getVideoContainerSelector",value:function e(){return null}},{key:"setUnitParams",value:function e(t){_get(_getPrototypeOf(SingleVideoManagerUnitLoader.prototype),"setUnitParams",this).call(this,t);var i=this.videoConfig.distanceRepeat||0,r=TRC.util.isTrue(this.videoConfig.startFromSlider),n=TRC.util.isTrue(this.videoConfig.detachToSlider),o=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),a=this.videoConfig.videoAbTest||null,s=this.videoConfig.startCard||null,l=this.videoConfig.maxVideoCards||null,c=this.videoConfig.permanentCard||null,d=this.parentFeedOptions.feedDynamicParameters,h=d&&d.videoDisclosurePosition||this.parentFeedOptions.videoDisclosurePosition||this.trcManager.global["video-disclosure-position"],u=this.parentFeedOptions&&this.parentFeedOptions.uiDesignVersion;t.set("distanceRepeat",i),t.set("detachToSlider.isStartFromSlider",r),t.set("detachToSlider.isDetachToSlider",n),t.set("detachToSlider.animation",o),t.set("abTest",a),s&&t.set("startCard",s),l&&t.set("maxVideoCards",l),c&&t.set("permanentCard",c),h&&t.set("components.adChoice.position",h),u>=3&&(t.set("components.adChoice.title.style.color","#999999"),t.set("components.adChoice.title.logoStyle.display","none"))}}]),SingleVideoManagerUnitLoader}(TRC.BaseVideoUnitLoader);TRC.SingleVideoManagerUnitLoader=SingleVideoManagerUnitLoader}(),function(){var SliderVideoUnitLoader=function(_TRC$BaseVideoUnitLoa){function SliderVideoUnitLoader(){return _classCallCheck(this,SliderVideoUnitLoader),_possibleConstructorReturn(this,_getPrototypeOf(SliderVideoUnitLoader).apply(this,arguments))}return _inherits(SliderVideoUnitLoader,_TRC$BaseVideoUnitLoa),_createClass(SliderVideoUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData){var unit=eval(videoCallbackData.tags[0].url);return this.setUnitParams(unit),unit}},{key:"getVideoContainerSelector",value:function e(){return null}},{key:"setUnitParams",value:function e(t){_get(_getPrototypeOf(SliderVideoUnitLoader.prototype),"setUnitParams",this).call(this,t)}}]),SliderVideoUnitLoader}(TRC.BaseVideoUnitLoader);TRC.SliderVideoUnitLoader=SliderVideoUnitLoader}(),function(){var StandaloneVideoUnitLoader=function(_TRC$BaseVideoUnitLoa){function StandaloneVideoUnitLoader(e,t){var i;return _classCallCheck(this,StandaloneVideoUnitLoader),(i=_possibleConstructorReturn(this,_getPrototypeOf(StandaloneVideoUnitLoader).call(this,e))).options=t,i}return _inherits(StandaloneVideoUnitLoader,_TRC$BaseVideoUnitLoa),_createClass(StandaloneVideoUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData,videoContainer){this.setCmTag(videoContainer);var unit=eval(videoCallbackData.tags[0].url);return this.setupVideo(videoContainer,unit),unit}},{key:"getVideoContainerSelector",value:function e(t){return t&&t.id?"#".concat(t.id):(__trcWarn("Cannot get a selector for standalone video container - Taboola publisher container must be defined and have an ID"),null)}},{key:"setCmTag",value:function e(t){window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",t.getBoundingClientRect().width),window.cmTag.set("customization",this.options.videoCssCustomization)}},{key:"setupVideo",value:function e(t,i){var r=!1,n=TRC.util.isTrue(this.videoConfig.startFromSlider),o=TRC.util.isTrue(this.videoConfig.detachToSlider),a=TRC.util.isTrue(this.videoConfig.detachToSliderAnimation),s=function e(){!r&&TRC.visibility.isInViewPortWithOffset(t,-50)&&(i.play&&"function"==typeof i.play&&i.play(t),r=!0,TRC.dispatch("trcContentReady",{container:t}),TRC.dom.off(window,"scroll",e))};i.set("detachToSlider.isStartFromSlider",n),i.set("detachToSlider.isDetachToSlider",o),i.set("detachToSlider.animation",a),i.on("ready",function(){s(),r||TRC.dom.on(window,"scroll",s)})}}]),StandaloneVideoUnitLoader}(TRC.BaseVideoUnitLoader);TRC.StandaloneVideoUnitLoader=StandaloneVideoUnitLoader}(),function(){var VideoAsItemUnitLoader=function(_TRC$BaseVideoUnitLoa){function VideoAsItemUnitLoader(e,t,i){var r;return _classCallCheck(this,VideoAsItemUnitLoader),(r=_possibleConstructorReturn(this,_getPrototypeOf(VideoAsItemUnitLoader).call(this,e))).options=t,r.rbox=i,r.allowExpandInViewport=TRC.util.isTrue(e.allowExpandInViewport),r.replaceWidgetItems=TRC.util.isTrue(e.replaceWidgetItems),r.disableFitToSizeForSingleColumn=TRC.util.isTrue(e.disableFitToSizeForSingleColumn),r.isContainerRatioValidForTakeOver=!1,r.getContainerDimensions(t.container),r}return _inherits(VideoAsItemUnitLoader,_TRC$BaseVideoUnitLoa),_createClass(VideoAsItemUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData,videoContainer){var itemsToHide=this.getSponsoredItemsToHide(),unit;if(!this.replaceWidgetItems||itemsToHide&&itemsToHide.length){var slotItem=this.getSlotWidgetItem();if(slotItem){var slotItemComputedStyle=getComputedStyle(slotItem);this.setCmTag(slotItem,slotItemComputedStyle),unit=eval(videoCallbackData.tags[0].url),this.setUnitParams(unit),this.setupVideo(unit,itemsToHide,videoContainer,slotItemComputedStyle)}}return unit}},{key:"getVideoContainerSelector",value:function e(t){var i=this.createVideoContainer(t);return i?"#".concat(i.id):null}},{key:"createVideoContainer",value:function e(t){var i=document.createElement("figure"),r=this.getSlotWidgetItem(),n=r&&r.parentNode;return r&&n&&t?(t.id?i.id=t.id:i.id=Math.floor(2147483648*Math.random()).toString(36),i.id+="-video",n.insertBefore(i,r),i):(__trcWarn("Could not create video container selector for integrated widget - nowhere to append the video container"),null)}},{key:"setCmTag",value:function e(t,i){var r=this.getUnitContainerStyle(t,i);window.cmTag.set("isCustomEvents",!0),window.cmTag.set("width",parseInt(r.width,10)),window.cmTag.set("customization",this.getUnitCustomization(t,r)),window.cmTag.set("isFitToSize",this.isFitToSizeVideo()),window.cmTag.set("openingEffect",this.videoConfig.expandEffect),window.cmTag.set("isContainerRatioNotValidForTakeOver",!this.isContainerRatioValidForTakeOver),window.cmTag.set("rboxContainerRatio",this.containerRatio)}},{key:"getUnitCustomization",value:function e(t,i){var r={};if(r.unitContainer=i,!this.isFitToSizeVideo()){var n=t.querySelector(".thumbBlock_holder"),o=t.querySelector(".video-label-box .video-title"),a=t.querySelector(".video-label-box .branding");r.placeHolder=getComputedStyle(n),r.titleContainer={title:getComputedStyle(o),branding:getComputedStyle(a)}}return r}},{key:"isFitToSizeVideo",value:function e(){if(!this.disableFitToSizeForSingleColumn)return!0;var t=this.rbox.getEffectiveResponsiveRule();return!t||1!==t.cells}},{key:"getUnitContainerStyle",value:function e(t,i){var r=parseFloat(i.marginLeft),n=parseFloat(i.marginRight),o=parseFloat(i.width),a=this.getNumOfSlotsToOccupy(),s=Math.ceil(o*a+(r+n)*(a-1));return{width:"".concat(s,"px"),height:i.height}}},{key:"setTakeOverUnitContainerStyle",value:function e(t,i){var r=this.getUnitContainerStyle(t,i),n=this.rbox.getEffectiveResponsiveRule(),o=parseFloat(i.marginTop),a=parseFloat(i.marginBottom),s=parseFloat(i.height),l=n.rows;r.height=Math.ceil(s*l+(o+a)*(l-1)),TRC.dispatch("widgetTakeoverSizeChange",{width:parseInt(r.width,10),customization:this.getUnitCustomization(t,r)})}},{key:"setupVideo",value:function e(t,i,r,n){var o=this,a=this.allowExpandInViewport,s=this.rbox.container,l=this.getSlotWidgetItem();this.setVideoContainerInitialStyle(r,n),t.on("ready",function(e){if(e&&e.isTakeoverWidget&&e.isContainerRatioValidForTakeOver){o.setPlacementSingleAdConf(),l=o.getMaxHeightSlot();var n=getComputedStyle(l);o.setTakeOverUnitContainerStyle(l,n),o.setVideoContainerInitialStyle(r,n),r.style.zIndex=999}!a&&TRC.visibility.isInViewPortWithOffset(l,0)||(s&&TRC.dom.addClass(s,"iw_video_frame"),o.replaceWidgetItems?i&&i.length?(parseInt(o.videoConfig.expandEffect,10)?t.on("renderAnimation:completed",VideoAsItemUnitLoader.displayVideoInsteadOfItems.trcBind(o,r,i)):VideoAsItemUnitLoader.displayVideoInsteadOfItems(r,i),t.play&&"function"==typeof t.play&&t.play(r)):__trcDebug("Not enough sponsored items to hide - aborting integrated widget video load"):t.play&&"function"==typeof t.play&&t.play(r))})}},{key:"setVideoContainerInitialStyle",value:function e(t,i){var r=this.getSlotWidgetItem(),n=parseFloat(i.marginLeft),o=this.getOuterRBoxComputedStyle(),a=parseFloat(o.marginLeft),s=r.offsetLeft-n-(a+n);t.style.position="absolute",t.style.float=i.float,t.style.top="".concat(r.offsetTop,"px"),t.style.left="".concat(s,"px"),t.style.width="auto",t.style.marginLeft=i.marginLeft,t.style.marginRight=i.marginRight,t.style.marginTop=i.marginTop,t.style.marginBottom=i.marginBottom,this.replaceWidgetItems||(t.style.zIndex=90)}},{key:"getOuterRBoxComputedStyle",value:function e(){var t=this.rbox.outerBox;return getComputedStyle(t)}},{key:"getSlotWidgetItem",value:function e(){if(this.slotWidgetItem)return this.slotWidgetItem;var t=this.getWidgetItems(),i=this.getInsertionPointSlotNumber()-1;return isNaN(i)?void 0:this.slotWidgetItem=t[i]}},{key:"getInsertionPointSlotNumber",value:function e(){var t=this.getWidgetItems(),i=parseInt(this.videoConfig.slot,10);if(void 0!==this.insertionPointSlotNumber)return this.insertionPointSlotNumber;if(!isNaN(i)&&i>0){if(this.allowExpandInViewport)return this.insertionPointSlotNumber=i;for(var r,n=i;n<=t.length;n++)if(r=n-1,!TRC.visibility.isInViewPortWithOffset(t[r],0))return this.insertionPointSlotNumber=n}return __trcWarn("video tag loader - unknown slot (".concat(i,") for integrated widget implementation")),null}},{key:"getSponsoredItemsToHide",value:function e(){for(var t=this.getWidgetItems(),i=this.getInsertionPointSlotNumber(),r=this.getNumOfSlotsToOccupy(),n=[],o=t.length,a,s;o>=i;o--)if((a=t[s=o-1]).video_data["is-syndicated"]&&null!==a.offsetParent&&(n.push(a),n.length===r))return n;return __trcWarn("video tag loader - didn't find enough sponsored items for integrated widget replacement"),null}},{key:"getWidgetItems",value:function e(){return this.rbox.boxes}},{key:"getNumOfSlotsToOccupy",value:function e(){var t=this.videoConfig.slotMaxSize||2,i=this.getInsertionPointSlotNumber();if(void 0===this.numOfSlotsToOccupy){var r=this.rbox.getEffectiveResponsiveRule();if(r){var n=i%r.cells||r.cells,o=r.cells-n+1;this.numOfSlotsToOccupy=Math.min(o,t)}else this.numOfSlotsToOccupy=t}return this.numOfSlotsToOccupy}},{key:"setPlacementSingleAdConf",value:function e(){this.videoConfig.slot=1,this.videoConfig.slotMaxSize=99,this.slotWidgetItem=null,this.insertionPointSlotNumber=void 0,this.numOfSlotsToOccupy=void 0,this.isTakeoverWidget=!0}},{key:"getContainerDimensions",value:function e(t){if(t){var i=t.getBoundingClientRect();this.containerWidth=i.width,this.containerHeight=i.height,this.containerRatio=this.containerWidth/this.containerHeight,this.containerRatio<2.36&&this.containerRatio>1&&(this.isContainerRatioValidForTakeOver=!0)}}},{key:"getMaxHeightSlot",value:function e(){for(var t=this.getWidgetItems(),i=-1,r=t[0],n=0;n<t.length;n++){var o=parseInt(getComputedStyle(t[n]).height,10);o>i&&(i=o,r=t[n])}return r}}],[{key:"displayVideoInsteadOfItems",value:function e(t,i){VideoAsItemUnitLoader.hideWidgetItems(i),t.style.position="static"}},{key:"hideWidgetItems",value:function e(t){t.forEach(function(e){e.style.display="none",e.style.visibility="hidden"})}}]),VideoAsItemUnitLoader}(TRC.BaseVideoUnitLoader);TRC.VideoAsItemUnitLoader=VideoAsItemUnitLoader}(),function(){var WidgetAdjacentVideoUnitLoader=function(_TRC$BaseVideoUnitLoa){function WidgetAdjacentVideoUnitLoader(){return _classCallCheck(this,WidgetAdjacentVideoUnitLoader),_possibleConstructorReturn(this,_getPrototypeOf(WidgetAdjacentVideoUnitLoader).apply(this,arguments))}return _inherits(WidgetAdjacentVideoUnitLoader,_TRC$BaseVideoUnitLoa),_createClass(WidgetAdjacentVideoUnitLoader,[{key:"loadUnit",value:function loadUnit(videoCallbackData){var unit=eval(videoCallbackData.tags[0].url);return this.setUnitParams(unit),unit}},{key:"getVideoContainerSelector",value:function e(t){if(this.videoConfig.position){var i=this.createVideoContainer(t);return"#".concat(i.id)}return null}},{key:"createVideoContainer",value:function e(t){var i=document.createElement("div"),r=t._trc_container,n;if(t.id?i.id=t.id:i.id=Math.floor(2147483648*Math.random()).toString(36),i.id+="-video",!r)return __trcWarn("Cannot generate a selector for widget adjacent video container - widget container is not found"),null;switch(this.videoConfig.position){case"above":n=r;break;case"below":n=r.nextSibling;break;default:__trcWarn("Unknown position in video config: ".concat(this.videoConfig.position))}return t.insertBefore(i,n),i}}]),WidgetAdjacentVideoUnitLoader}(TRC.BaseVideoUnitLoader);TRC.WidgetAdjacentVideoUnitLoader=WidgetAdjacentVideoUnitLoader}(),TRC.InvokeVideoLoader=function(){TRC.VideoLoader=function e(t,i,r,n,o){this.trcManager=t,this.videoConfig=i,this.placement=r,this.unifiedPlacement=i.unifiedPlacement,this.taboolaContainer=n,this.trcResponse=o,this.consentData=t.consentState||TRC.consentData||{}},TRC.VideoLoader.prototype.CALLBACK_NAME_PREFIX="videoCallback",TRC.VideoLoader.prototype.valueOrEmptyString=function(e){return null!==e&&void 0!==e?e:""},TRC.VideoLoader.prototype.loadVideo=function(t){if(TRC.botDetected)__trcDebug("video loader - not loading. Bot detected.");else if(this.blockVideo)__trcDebug("video loader - not loading. Video was blocked due to configuration.");else{if(!TRC.Browser["ieUpto"](10)){var i=document.createElement("script"),r=this.videoConfig.scriptUrlTemplate;TRC.pConsole("video loader","info","loading video for placement: "+this.placement);var n=TRC.URL.prototype.getParameter.call(location.href,"video-integration-variant");return null===n&&(n=this.trcManager.global["video-integration-variant"]),r?(i.id=this.taboolaContainer.id+"-v-loader",i.src=e.trcBind(this,t,n,TRC.shiftDomain(r))(),this.taboolaContainer.appendChild(i)):TRC.pConsole("video loader","error","error while loading video for placement: "+this.placement+". missing script url template in response"),!0}__trcDebug("video loader - not loading. Unsupported browser.")}};var e=function(e,i,r){return r.replace("{PUBLISHER_NAME}",TRC.publisherId).replace("{UNIT_TYPE}",encodeURIComponent(this.videoConfig.unitType)).replace("{UNIT_LOCATION}",encodeURIComponent(this.valueOrEmptyString(this.videoConfig.unitLocation))).replace("{SOURCE_PAGE_TYPE}",this.trcManager.getItemType()).replace("{PLACEMENT_NAME}",encodeURIComponent(this.getPlacementName())).replace("{UNIFIED_PLACEMENT_NAME}",encodeURIComponent(this.valueOrEmptyString(this.getUnifiedPlacementName()))).replace("{USER_ID}",TRC.pageManager.getValue("user-id")).replace("{CALLBACK_NAME}",this.genVideoCallback(e)).replace("{REFERRER}",encodeURIComponent(this.trcManager.getReferrer())).replace("{PAGE_URL}",encodeURIComponent(this.valueOrEmptyString(this.getItemUrlForVideo()))).replace("{CACHE_BUSTER}",this.getScriptCacheBuster()).replace("{PLATFORM}",this.valueOrEmptyString(this.videoConfig.platform)).replace("{NORM_PLATFORM}",this.valueOrEmptyString(this.videoConfig.fullyNormalizedPlatform)).replace("{COUNTRY}",this.valueOrEmptyString(this.videoConfig.country)).replace("{TAG_ID}",this.valueOrEmptyString(this.videoConfig.tagId)).replace("{VARIANT}",this.valueOrEmptyString(this.videoConfig.variant)).replace("{INTEGRATION_VARIANT}",this.valueOrEmptyString(i)).replace("{SESSION_ID}",this.valueOrEmptyString(this.trcManager.getSessionId())).replace("{SOURCE_ITEM_ID}",this.valueOrEmptyString(this.trcManager.getItemId())).replace("{VIEW_ID}",this.valueOrEmptyString(TRC.pageManager.getPageData())).replace("{GEO_LAT}",this.valueOrEmptyString((t("loc")||{}).lat)).replace("{GEO_ING}",this.valueOrEmptyString((t("loc")||{}).ing)).replace("{DEVICE_IFA}",this.valueOrEmptyString(this.trcManager.deviceId)).replace("{APP_ID}",this.valueOrEmptyString(t("appid"))).replace("{SESSION_DATA}",this.valueOrEmptyString(this.getSessionData())).replace("{REQUEST_ID}",this.valueOrEmptyString(this.getRequestId())).replace("{APP_NAME}",this.valueOrEmptyString(t("app"))).replace("{CONSENT_DAISY_BIT}",this.valueOrEmptyString(this.getConsentString())).replace("{GDPR_APPLIES}",this.valueOrEmptyString(this.getGdprApplies())).replace("{SC_PREDICTIONS}",this.valueOrEmptyString(this.getPredictions())).replace("{OPEN_EXCHANGE_ENABLED}",this.valueOrEmptyString(this.getOpenExchangeEnabled())).replace("{EXTERNAL_VIEW_ID}",this.valueOrEmptyString(this.getExternalViewId())).replace("{SOURCE_ITEM_ID}",this.valueOrEmptyString(this.getSourceItemId())).replace("{SOURCE_ITEM_ID_INT}",this.valueOrEmptyString(this.getSourceItemId())).replace("{PUBLISHER_ID}",this.valueOrEmptyString(this.getPublisherId())).replace("{SDK_NAME}",encodeURIComponent(this.valueOrEmptyString(t("sdkt")))).replace("{SDK_VERSION}",this.valueOrEmptyString(t("sdkv"))).replace("{OS}",encodeURIComponent(this.valueOrEmptyString(t("os")))).replace("{USER_ID_SOURCE}",this.valueOrEmptyString(this.getUserIdSource())).replace("{FAGG}",this.valueOrEmptyString(this.videoConfig.aggLevel||1)).replace("{CCPA_DNS}",this.valueOrEmptyString(this.getCcpaDoNotSell())).replace("{CCPA_PRIVACY}",this.valueOrEmptyString(this.getCcpaPrivacyString())).replace("{REGION}",this.valueOrEmptyString(this.getRegion())).replace("{HAS_GDPR_CONSENT}",this.valueOrEmptyString(this.getHasGDPRConsent())).replace("{TCF_VERSION}",this.valueOrEmptyString(this.getTCFVersion())).replace("{CMP_STATUS}",this.valueOrEmptyString(this.consentData.cmpStatus)).replace("{TABOOLA_NETWORK_ID}",this.valueOrEmptyString(this.getTaboolaNetworkId()))},t=function(e){if(i()&&void 0!==TRCImpl.additional_data.sdkd[e])return TRCImpl.additional_data.sdkd[e]},i=function(){return void 0!==TRCImpl.additional_data&&void 0!==TRCImpl.additional_data.sdkd};TRC.VideoLoader.prototype.generateCallbackName=function(){var e,t=this.getCallbacksObjectKey();return TRC[t]=TRC[t]||{},e=TRC[t].auto_gen_callback_seq=TRC[t].auto_gen_callback_seq+1||1,this.CALLBACK_NAME_PREFIX+e},TRC.VideoLoader.prototype.genVideoCallback=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getCallbacksObjectKey=function(){throw new Error("This is an abstract method that should be inherited.")},TRC.VideoLoader.prototype.getItemUrlForVideo=function(){var e=[],t="",i,r,n,o,a;if(!(i=this.trcManager.getItemUrl()))return null;if(r=this.getVideoParametersToKeep(),(n=(n=this.getWindowLocationSearch()).substr(1)).length){e=n.split("&");for(var s=0;s<e.length;s++)(o=e[s].split("=")[0]).length&&-1!==r.indexOf(o)&&-1===i.indexOf(o.concat("="))&&(t=t.concat(o,"=",e[s].split("=")[1],"&"));t.length>=1&&(t=t.substring(0,t.length-1),t=(a=-1===i.indexOf("?")?"?":"&").concat(t)),i=i.concat(t)}return i},TRC.VideoLoader.prototype.getSessionData=function(){return this.trcResponse["session-data"]},TRC.VideoLoader.prototype.getRequestId=function(){return this.trcResponse["req"]},TRC.VideoLoader.prototype.getPlacementName=function(){return this.videoConfig.placement||this.placement},TRC.VideoLoader.prototype.getUnifiedPlacementName=function(){return this.unifiedPlacement},TRC.VideoLoader.prototype.getPredictions=function(){return this.videoConfig.predictions},TRC.VideoLoader.prototype.getExternalViewId=function(){return this.videoConfig.rid},TRC.VideoLoader.prototype.getOpenExchangeEnabled=function(){return this.videoConfig.oee},TRC.VideoLoader.prototype.getSourceItemId=function(){return this.videoConfig.sii},TRC.VideoLoader.prototype.getScriptCacheBuster=function(){return(new Date).getTime().toString()},TRC.VideoLoader.prototype.getWindowLocationSearch=function(){return window.location.search||""},TRC.VideoLoader.prototype.getVideoParametersToKeep=function(){return this.trcManager.global["video-tag-keep-url-params"]||["vstaging","keyword","customTB"]},TRC.VideoLoader.prototype.getPublisherId=function(){return this.videoConfig.tpubid},TRC.VideoLoader.prototype.getUserIdSource=function(){return this.videoConfig.uis},TRC.VideoLoader.prototype.getCcpaDoNotSell=function(){return this.videoConfig.ccpaDns},TRC.VideoLoader.prototype.getCcpaPrivacyString=function(){return this.videoConfig.ccpaPrivacy},TRC.VideoLoader.prototype.getRegion=function(){return this.videoConfig.region},TRC.VideoLoader.prototype.getHasGDPRConsent=function(){return this.videoConfig.hasGDPRConsent},TRC.VideoLoader.prototype.getConsentDaisyBit=function(){return this.consentData.consentData||this.consentData.consentDaisyBit},TRC.VideoLoader.prototype.getTCFVersionByConsentStr=function(){return this.consentData.tcString?2:this.getConsentDaisyBit()?1:void 0},TRC.VideoLoader.prototype.getTCFVersionByMethodImpl=function(){return"function"==typeof window.__tcfapi?2:"function"==typeof window.__cmp?1:void 0},TRC.VideoLoader.prototype.getTCFVersion=function(){return this.videoConfig.tcfVersion||this.getTCFVersionByConsentStr()||this.getTCFVersionByMethodImpl()},TRC.VideoLoader.prototype.getConsentString=function(){return 2==this.getTCFVersion()?this.consentData.tcString:this.getConsentDaisyBit()},TRC.VideoLoader.prototype.getTaboolaNetworkId=function(){return this.videoConfig.tnetid},TRC.VideoLoader.prototype.getGdprApplies=function(){return this.trcManager.global["video-gdpr-applies-use-requires-consent"]?this.videoConfig.gdprApplies:this.consentData.gdprApplies}},TRC.InvokeVideoTagLoader=function(){TRC.VideoTagLoader=function e(t,i,r,n,o){n&&"rbox-only-video"===n.mode&&(this.invisibleContainer="#"+r.container.id),this.blockVideo=t.blockVideoLoader||!t["before-video-load"](),this.blockVideo||(TRC.VideoLoader.call(this,t,i,r.placement,r.container,o),this.options=r,this.videoConfig=i,this.unitLoader=this.initUnitLoader(i,r,n,t))},TRC.VideoTagLoader.prototype=__trcObjectCreate(TRC.VideoLoader.prototype),TRC.VideoTagLoader.prototype.LOCATION_TYPES={ABOVE:"above",BELOW:"below",ITEM:"item",STANDALONE:"standalone",SINGLE_MANAGER:"singleManager"},TRC.VideoTagLoader.prototype.initUnitLoader=function(e,t,i,r){switch(e.position){case this.LOCATION_TYPES.STANDALONE:return new TRC.StandaloneVideoUnitLoader(e,t);case this.LOCATION_TYPES.ITEM:return new TRC.VideoAsItemUnitLoader(e,t,i);case this.LOCATION_TYPES.SINGLE_MANAGER:return new TRC.SingleVideoManagerUnitLoader(e,r);case this.LOCATION_TYPES.ABOVE:case this.LOCATION_TYPES.BELOW:return new TRC.WidgetAdjacentVideoUnitLoader(e);default:return new TRC.SliderVideoUnitLoader(e)}},TRC.VideoTagLoader.prototype.setGlobalUnitParams=function(e){this.trcManager&&this.trcManager.framework&&"mobile-sdk"===this.trcManager.framework&&(e.set("isSDK",!0),e.set("widgetPlacement",this.getPlacementName())),this.options&&this.options.isFeed&&this.options.container&&e.set("feedContainer",this.options.container);var t=this.getPlacementName();this.options&&this.options.sca&&this.isFeedHasSC(this.options.sca,t)&&e.set("placementWithScAdjacency",t),TRC.filledImpressions=TRC.filledImpressions||[],e.on("filledImpression",function(e){TRC.filledImpressions.push(e)})},TRC.VideoTagLoader.prototype.getCallbacksObjectKey=function(){return"videoTagCallbacks"},TRC.VideoTagLoader.prototype.genVideoCallback=function(){var e=this.generateCallbackName(),t=this;return TRC.videoTagCallbacks[e]=function(e){var i,r;if((e=e||{}).tags&&e.tags[0]){(i=t.getLiteUnitVersion(e.tags[0].liteUnitBootSrc||t.videoConfig.liteUnitBootSrc))||(i=e.tags[0].unitBootSrc||t.videoConfig.unitBootSrc),window.TRC.liteUnit&&(i=t.getLiteUnitFromTRCConfig(i));var n=t.getVideoMacrosLiteUnitVersion(e.tags[0].url);n&&-1===window.location.href.indexOf("static-test-files.taboolasyndication")&&(i=t.replaceVersion(i,n));var o=window.TRCImpl.getItemUrlQueryString()||"";(o.indexOf("tb_liteUnitUrl")>-1||o.indexOf("tb_liteUnitVersion")>-1)&&(i=t.getVersionFromUrl(i,o)),(r=document.createElement("script")).src=i,r.onload=function(){window.TRC=window.TRC||{},window.TRC.liteUnit=window.TRC.liteUnit||{},TRCImpl.global["enable-mw-no-items-exit"]?window.TRC.liteUnit.abTest="scadjtst1_vA":TRCImpl.global["enable-mw-content-ready-margins"]?window.TRC.liteUnit.abTest="scadjtst1_vB":TRCImpl.global["enable-mw-control"]&&(window.TRC.liteUnit.abTest="scadjtst1_vC"),window.TRC.liteUnit&&window.TRC.liteUnit.abTest&&(window.cmTag.set("pixels.startWithABT.isFire",!0),window.cmTag.push("abTest",window.TRC.liteUnit.abTest));var i=t.videoConfig.containerSelector||t.unitLoader.getVideoContainerSelector(t.taboolaContainer)||t.invisibleContainer,r;i&&(window.cmTag.set("parentSelector",i),r=document.querySelector(i));var n=t.unitLoader.loadUnit(e,r);n&&t.setGlobalUnitParams(n)},document.getElementsByTagName("head")[0].appendChild(r)}},"TRC."+this.getCallbacksObjectKey()+"."+e},TRC.VideoTagLoader.prototype.getLiteUnitVersion=function(e){if(e&&"lite-unit-boot-src"!==(e=decodeURIComponent(e))){var t=this.getUnitType();if(t)return e.replace("{{UNIT_TYPE}}",t).replace("{{PLATFORM}}",TRC.dom.isDesktop()?"Desktop":"Mobile")}return""},TRC.VideoTagLoader.prototype.getUnitType=function(){for(var e in this.UNIT_TYPES)if(this.UNIT_TYPES[e].indexOf(this.videoConfig.unitType)>-1)return e;return""},TRC.VideoTagLoader.prototype.UNIT_TYPES={Slider:["46","59"],Inline:["193","198","199","194","216","48","32","215"],WidgetItem:["226","227","248"],FeedManager:["244","245","247"],VideoForPerformance:["232","233"],RecoReelWidget:["254","255"]},TRC.VideoTagLoader.prototype.getLiteUnitFromTRCConfig=function(e){return window.TRC.liteUnit.liteUnitVersion&&(e=this.getLiteUnitVersion(window.TRC.liteUnit.liteUnitVersion)),window.TRC.liteUnit.version&&(e=this.replaceVersion(e,window.TRC.liteUnit.version)),e},TRC.VideoTagLoader.prototype.replaceVersion=function(e,t){return e.replace(/\d+[_|.]\d+[_|.]\d+/,t)},TRC.VideoTagLoader.prototype.getVideoMacrosLiteUnitVersion=function(e){for(var t=new RegExp("liteUnitVersion","gi"),i=void 0;t.exec(e);)i=t.lastIndex;if(void 0!==i){var r=(e=(e=e.substring(i)).substring(2,e.indexOf(");"))).replace(/\'|\"|\s+/g,"");if(r)return r}},TRC.VideoTagLoader.prototype.getVersionFromUrl=function(e,t){var i=void 0,r=void 0;return t.split("&").forEach(function(e){e.indexOf("tb_liteUnitUrl")>-1?i=e.split("=")[1]:e.indexOf("tb_liteUnitVersion")>-1&&(r=e.split("=")[1])}),i&&(e=this.getLiteUnitVersion(i)),r&&(e=this.replaceVersion(e,r)),e},TRC.VideoTagLoader.prototype.isFeedHasSC=function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return!0;return!1}},TRC.visibility=TRC.visibility||{},TRC.visibility=function(e,t){function i(e){var t=TRC.dom.getViewportVerticalRange(),i=TRC.dom.getElementRect(e);return i.top<0?Math.max(i.top,i.bottom):t.max-i.top-t.min}function r(e){var t=TRC.dom.getViewportHorizontalRange(),i=TRC.dom.getElementRect(e);return i.left<0?Math.max(i.left,i.right):t.max-i.left-t.min}var n={getViewPortOffsets:function(e){var t,n;return{verticalOffset:i(e),horizontalOffset:r(e)}},getMinViewPortOffsets:function(e){var t=this.getViewPortOffsets(e);return t.verticalOffset<0&&t.horizontalOffset<0?Math.max(t.verticalOffset,t.horizontalOffset):Math.min(t.verticalOffset,t.horizontalOffset)},isInViewPortWithOffset:function(e,t){var i;return!(this.getMinViewPortOffsets(e)<(t=t||0))}};return e._trcIsUTactive&&(n.getVerticalVPShift=i,n.getHorizontalVPShift=r),n}(window,document),function(){var e=50,t=1e3,i=10,r=function(){function r(e){_classCallCheck(this,r),this.rBoxWidget=e,this.trcManager=this.rBoxWidget.trc,this.widgetContainer=this.rBoxWidget.container,this.widgetItems=this.rBoxWidget.boxes,this.uiModeName=this.rBoxWidget.mode_name,this.MIN_VISIBLE_ITMES=this.trcManager.global["min-visible-items"]||1,this.init()}return _createClass(r,[{key:"init",value:function e(){this.resetVisibilityData(),this.rBoxWidget.isProviderIframe||(this.isManualVisibilityMode()?TRC.listen("visible::".concat(this.rBoxWidget.orig_placement),this.reportManualVisibilityIfVisibleByRects.trcBind(this)):this.initVisibilityObserver())}},{key:"resetVisibilityData",value:function e(){this.organicVisibleItems={},this.sponsoredVisibleItems={},this.exchangeVisibleItems={},this.nativeVisibleItems={},this.visibleItemsIdxList=[]}},{key:"isManualVisibilityMode",value:function e(){return!((this.rBoxWidget.isFeedCard||window.AMP_MODE)&&"mobile-sdk"!==this.trcManager.framework||!this.rBoxWidget.manualVisibilityTrigger&&!this.trcManager.manualVisibilityTrigger||!this.trcManager.global["enable-manual-visible"])}},{key:"reportVisibility",value:function e(){var t=this,i=new TRC.PlacementEventPostData,r=this.trcManager.getProperty(this.uiModeName,"thumbnail-position",this.rBoxWidget.propertiesOverride),n=[],o=[],a=[],s=[],l=[],c=[],d=[],h=[],u=[],p=[],m=[];if(!this.visibilityReported&&(Object.keys(this.organicVisibleItems).forEach(function(e){n.push(t.organicVisibleItems[e].id),a.push(t.organicVisibleItems[e].type)}),Object.keys(this.sponsoredVisibleItems).forEach(function(e){o.push(t.sponsoredVisibleItems[e].id),s.push(t.sponsoredVisibleItems[e].type),d.push(t.sponsoredVisibleItems[e].publisher)}),Object.keys(this.exchangeVisibleItems).forEach(function(e){l.push(t.exchangeVisibleItems[e].id),c.push(t.exchangeVisibleItems[e].type),h.push(t.exchangeVisibleItems[e].publisher)}),Object.keys(this.nativeVisibleItems).forEach(function(e){u.push(t.nativeVisibleItems[e].id),p.push(t.nativeVisibleItems[e].type),m.push(t.nativeVisibleItems[e].publisher)}),n.length>0||o.length>0||l.length>0||u.length>0||this.rBoxWidget.isProviderIframe)){TRC.pConsole(this.uiModeName,"info","sending new visible event",""),i.setFullItemList(this.rBoxWidget.getJsonTargetItemsList(this.rBoxWidget.fullEventItemsHash)),this.trcManager.enablePageGeometry&&this.trcManager.addGeometryPageData(i,this.trcManager.global["page-geometry-selectors"]),this.trcManager.enablePageGeometryExtended&&this.trcManager.addGeometryExtendedPageData(i),this.trcManager.enablePlacementGeometry&&this.trcManager.addGeometryPlacementData(i,this.widgetContainer),TRC.EventsAPI.dispatchVisible(this.rBoxWidget.response.trc,this);var g={il:n.join(","),sil:o.join(","),ilt:a.join(","),navil:u.join(","),silt:s.join(","),ntil:l.join(","),ntilt:c.join(","),navilt:p.join(","),niltp:h.join(","),siltp:d.join(","),naviltp:m.join(","),tp:r};this.processSpatialSlotsData(g),this.rBoxWidget.sendEvent("visible",g,i.getAll(),!0),!this.trcManager.global["disable-external-visibility-once"]&&this.externalVisibleSent||(this.rBoxWidget.sendPlacementTrackingPixelsOnce("vi"),this.externalVisibleSent=!0),this.trcManager.global["disable-runHook"]?(this.trcManager.getFunction(this.uiModeName,"after-visible",this.rBoxWidget.propertiesOverride,this.rBoxWidget.internalContainer,this),TRC.CustomModulesManager.runHook("after-visible",this.uiModeName,this,this.rBoxWidget.propertiesOverride,this.rBoxWidget.internalContainer,this)):this.trcManager.runHook(this,this.uiModeName,"after-visible",this.rBoxWidget.propertiesOverride,!0,this.rBoxWidget.internalContainer,this),this.visibilityReported=!0}}},{key:"processSpatialSlotsData",value:function t(i){var n=this;if(!this.rBoxWidget.isProviderIframe&&r.isSpatialEnabled(this.trcManager)&&this.isThrottleValidated()){var o=this.trcManager.global["max-slots-geometry-per-page"]||e,a=[],s=[],l=null;this.trcManager.enableSlotsSaliency&&(l=window.getComputedStyle(window.document.body)),this.visibleItemsIdxList.slice(-o).forEach(function(e){var t=n.rBoxWidget.boxes[e];n.trcManager.enableSlotsGeometry&&r.processVisibleItemGeometry(t,a),n.trcManager.enableSlotsSaliency&&r.processVisibleItemSaliency(t,l,s)});var c=[],d;if(0===a.length&&s.length>0)s.map(function(e){return e.id}).forEach(function(e,t){var i=s[t];delete i.id,c.push({id:e,ssd:i})}),i.spatialData=__trcJSONify(c);else if(a.length>0&&0===s.length){var h;a.map(function(e){return e.id}).forEach(function(e,t){var i=a[t];delete i.id,c.push({id:e,sgd:i})}),i.spatialData=__trcJSONify(c)}else if(a.length>0&&s.length>0){var u;a.map(function(e){return e.id}).forEach(function(e,t){var i=a[t];delete i.id;var r=s[t];delete r.id,c.push({id:e,sgd:i,ssd:r})}),i.spatialData=__trcJSONify(c)}}}},{key:"isThrottleValidated",value:function e(){var r=this.trcManager.spatialSlotsThrottleMax||t,n=this.trcManager.spatialSlotsThrottleTH;if("number"!=typeof n&&(n=i),n!==r){if(!(n>0))return!1;var o;if(Math.floor(Math.random()*r)>n)return!1}return!0}},{key:"calculateVisibleItems",value:function e(t,i,n){var o=this,a=n||this.rBoxWidget.boxes,s=0;return this.visibleItemsIdxList=[],a.forEach(function(e,n){var a=e.video_data||e,l=o.rBoxWidget.fullEventItemsHash[a["item-id"]];i||e.isVisible||t&&o.isElementVisibleByRects(e,t)?(a["is-syndicated"]?r.addVisibleItemToList(o.sponsoredVisibleItems,a,"is-syndicated"):a["is-in-network"]?r.addVisibleItemToList(o.exchangeVisibleItems,a,"is-in-network"):a["is-native"]?r.addVisibleItemToList(o.nativeVisibleItems,a,"is-native"):r.addVisibleItemToList(o.organicVisibleItems,a,"is-organic"),l.tids="vp",s++,o.visibleItemsIdxList.push(n)):"vp"!==l.tids&&(l.tids="nvp")}),s}},{key:"isVisibleWidget",value:function e(){return this.calculateVisibleItems()>=this.MIN_VISIBLE_ITMES||this.widgetContainer.isVisible}},{key:"initVisibilityObserver",value:function e(){var t=this,i=this.reportVisibility.trcBind(this),r=this.isVisibleWidget.trcBind(this);if(TRC.tlf&&console.time("visibility - ".concat(this.uiModeName)),this.resetVisibilityData(),!this.isVisibilityObserverInitialized){var n={targetElement:this.widgetContainer,enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:r,onTrigger:i,onEnter:function e(){TRC.util.isPercentEnabled(t.trcManager.global,"guarantee-card-clash-detection")&&TRC.ModuleLoader.load("card-interference-detector",TRC.CardInterferenceDetector,function(){TRC.CardInterferenceDetector.detectCardInterrupted(t.widgetContainer)})}};TRC.intersections.isInViewPort(n);var o=this.rBoxWidget.listContainer&&this.rBoxWidget.listContainer.heatmap;this.widgetItems.forEach(function(e){var t={targetElement:e,enableDelayedVisibilityCheck:!0,visibleWidgetPredicate:r,onTrigger:i,onEnter:function t(){return o&&o.captureItemTime(e.video_data.id)}};TRC.intersections.isInViewPort(t)}),this.isVisibilityObserverInitialized=!0}TRC.tlf&&console.timeEnd("visibility - ".concat(this.uiModeName))}},{key:"reportManualVisibilityIfVisibleByRects",value:function e(t){(this.calculateVisibleItems(t)>=this.MIN_VISIBLE_ITMES||this.isElementVisibleByRects(this.widgetContainer,t))&&this.reportVisibility()}},{key:"isElementVisibleByRects",value:function e(t,i){var n=(t=t||this.widgetContainer).getBoundingClientRect();if(!r.hasVolume(n))return!1;var o=this.rBoxWidget.getBoundingClientRect(n,i),a=o.left+Math.round((o.right-o.left)/2),s=o.top+Math.round((o.bottom-o.top)/2),l=TRC.Browser.operaUpto(10.1)||TRC.Browser.safariUpto(4)?document.elementFromPoint(a+document.body.scrollLeft,s+document.body.scrollTop):document.elementFromPoint(a,s),c=r.getRootBounds(i),d=a>0&&a<c.maxX&&s>0&&s<c.maxY;return i?d:d&&l&&r.isAncestor(l,t)}}],[{key:"isSpatialEnabled",value:function e(t){return TRC.util.isPercentEnabled(t.global,"enable-spatial-data-per-page")||t.spatialSlotsThrottleTHPerPage}},{key:"processVisibleItemGeometry",value:function e(t,i){var r={id:-1,x:-1,y:-1,h:-1,w:-1};if(t.lastVisibleBoundingClientRect){var n=(t.lastVisibleBoundingClientRect.left+t.lastVisibleBoundingClientRect.pageXOffset).toFixed(2),o=(t.lastVisibleBoundingClientRect.top+t.lastVisibleBoundingClientRect.pageYOffset).toFixed(2);r={id:t.video_data["item-id"],x:n,y:o,h:t.lastVisibleBoundingClientRect.height.toFixed(2),w:t.lastVisibleBoundingClientRect.width.toFixed(2)}}i.push(r)}},{key:"processVisibleItemSaliency",value:function e(t,i,r){var n=window.getComputedStyle(t),o={id:t.video_data["item-id"],fsi:n.getPropertyValue("font-size"),fst:n.getPropertyValue("font-style"),fn:n.getPropertyValue("font-family"),cbg:n.getPropertyValue("background-color"),dbg:i.getPropertyValue("background-color")};r.push(o)}},{key:"addVisibleItemToList",value:function e(t,i){t[i["item-id"]]={id:i["item-id"],type:i.type,publisher:i.publisher}}},{key:"hasVolume",value:function e(t){return t.top!==t.bottom}},{key:"getRootBounds",value:function e(t){var i={};return t?(i.maxX=t.rootBounds.width,i.maxY=t.rootBounds.height,i):(i.maxX="CSS1Compat"===document.compatMode&&document.documentElement.clientWidth||document.body.clientWidth,i.maxY="CSS1Compat"===document.compatMode&&document.documentElement.clientHeight||document.body.clientHeight,i)}},{key:"isAncestor",value:function e(t,i){return!(!t.parentNode||t.parentNode===document.documentElement&&t!==i)&&(t===i||r.isAncestor(t.parentNode,i))}}]),r}();TRC.WidgetVisibilityReporter=r}(),function(){var e=-1,t=function(){function t(e){_classCallCheck(this,t),this.initialUrl=e.initialUrl,this.initialUrlTimeout=e.initialUrlTimeout,this.initialUrl&&(this.initialUrlPending=!0);var i=new Worker(t._buildBlob(this.initialUrl,this.initialUrlTimeout));TRC.URL=TRC.URL||TRC.webkitURL,i.onmessage=this.onWorkerMessage.bind(this),this.worker=i,this.contextCallbacks={},this.context=0}return _createClass(t,[{key:"handshake",value:function e(t){var i={type:"handshake",_context:this._generateContextId()};this.contextCallbacks[i._context]={resolve:t},this.worker.postMessage(i)}},{key:"xhr",value:function t(i,r,n,o){var a={url:i,timeout:r||8e3,type:"xhr",_context:this._generateContextId()};i===this.initialUrl&&this.initialUrlPending&&(a._context=e),this.initialUrlPending=!1,this.contextCallbacks[a._context]={resolve:n,reject:o},a._context!==e&&this.worker.postMessage(a)}},{key:"onWorkerMessage",value:function e(t){var i=t.data,r=i._context,n=i.type,o=i.error,a=this.contextCallbacks[r]||{},s=a.resolve,l=a.reject,c="xhrBlob"===n?i.buffer:i.result;s&&"function"==typeof s&&!o?s(c||{}):"function"==typeof l&&l(),delete this.contextCallbacks[r]}},{key:"_generateContextId",value:function e(){return++this.context}}],[{key:"_buildBlob",value:function e(t,i){t=t||"";var r='/*! 20201024-2-RELEASE 2020-10-24 */\n\nfunction onHandshake(t){var e={_context:t,type:"handshake"};self.postMessage(e)}function fetch(t,e,r,n){t=t.replace("/trc/3/json?","/trc/3/json?wrkr=1&");var o=new XMLHttpRequest;o.withCredentials=!0,o.onreadystatechange=function(){o.readyState<4||200!==o.status||4===o.readyState&&r(o)},o.onerror=function(t){(new Image).src="http://trc.taboola.com/xhrworker-errors/log/2/debug?tim=10:24:11.81&type=xhrerror",n(t)},o.ontimeout=function(t){(new Image).src="http://trc.taboola.com/xhrworker-errors/log/2/debug?tim=10:24:11.81&type=xhrtimeout",n(t)},o.open("GET",t,!0),e&&(o.timeout=e),o.send("")}self.addEventListener("message",function(t){var e=t.data,r=e.url,n=e.timeout,o=e._context,a=e.type;if("handshake"===a)return onHandshake(o);fetch(r,n,function(t){var e,r={result:t.responseText,type:a,_context:o};self.postMessage(r)},function(){var t={error:!0,type:a,_context:o};self.postMessage(t)})},!1);var initialUrl="%%initialUrl%%",initialTimeout="%%timeout%%"||8e3;initialUrl&&fetch(initialUrl,initialTimeout,function(t){var e=t.responseText,r;postMessage({result:e,_context:-1,type:"xhr"})},function(){var t;postMessage({_context:-1,error:!0,type:"xhr"})});';r=(r=r.replace("%%initialUrl%%",t)).replace("%%timeout%%",i||"");var n=new Blob([r],{type:"text/javascript"});return window.URL.createObjectURL(n)}}]),t}();TRC.initWorkerIfAvailable=function(e,i){if(TRC.workerInited=!0,!TRC.worker&&window.Worker&&window.URL&&window.URL.createObjectURL&&TRCImpl.global["xhr-worker"]){var r=new t({initialUrl:e,timeout:i});TRC.worker=r;var n=setTimeout(function(){__trcError("worker timeout"),o=function e(){},TRC.worker=!1},200),o=function e(){return clearTimeout(n)};r.handshake(function(){return o()})}},TRC.WebWorker=t}(),function(e,t){e.TRC=e.TRC||{};var i=function(){return!0},r=function(i,r,n,o){var a=i+"/"+encodeURIComponent(n||e.TRC.publisherId)+"/log/3"+"/"+r;return o&&(a+="?"+t.TRCLogger.formatParams(o)),a},n=function(t,r){var n,o=new(e.XDomainRequest||e.XMLHttpRequest);return o.open(t,r),o.onload=i,o.onerror=i,o.ontimeout=i,o.onprogress=i,o.withCredentials=!0,o};e.TRC.TRCLogger=t.TRCLogger={post:function(e,i,o,a,s){var l=r(e,i,a,s),c=n("POST",l);c.setRequestHeader&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(t.TRCLogger.formatParams(o))},get:function(e,t,i,o){var a=r(e,t,o,i),s;n("GET",a).send()},formatParams:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")}}}(window,window["${jsScope}".indexOf("{jsScope}")>=0?"TRC":"${jsScope}"]),function(win,doc){TRC.performance&&TRC.performance.mark("4.0");var protocol=TRC.PROTOCOL,getParameter=TRC.URL.prototype.getParameter,taboolaConsole=getParameter.call(location.href,"trc_console"),timers,div;function invokeInheritedModules(){TRC.InvokeVideoLoader(),TRC.InvokePVideoLoader(),TRC.InvokeVideoTagLoader()}win.trc_debug_level=getParameter.call(location.href,"taboola-debug"),TRC.tlf=!!getParameter.call(location.href,"taboola-perf"),TRC.taboola_yield_report=!!getParameter.call(location.href,"taboola-yield-report"),taboolaConsole&&"yes"===taboolaConsole.toLowerCase()&&(TRC.taboolaConsole=!0,TRC.Manager.prototype.loadExternal("http://c2.taboola.com/console/console_loader.js","js")),isNaN(parseInt(win.trc_debug_level))&&(trc_debug_level=1),TRC.callbacks={mute:function(){var e=TRCImpl.boxes,t;if(TRCImpl.clearPreloadRequestLoaderAndCallNext(),TRC.Timeout.reset(),e)for(t in e)e[t].request=null;TRC.EventsAPI.dispatchNoContent(TRCImpl.NO_CONTENT.mute),TRC.pConsole("warning - mute!","warn","server returned mute","")}},TRC.trc_drawRBox=!1,TRC.listOrigin=new TRC.ListOriginBuilder,TRC.baseDomain=TRC.baseDomain||protocol+"//cdn.taboola.com/libtrc/"+TRC.publisherId+"/",TRC.prototype=TRC.prototype||{},TRC.Interval=function(){var intervals={};return{set:function(callback,interval){var aArgs=Array.prototype.slice.call(arguments,2),intervalId=win.setInterval(function(){"function"==typeof callback?callback.apply(null,aArgs):eval(callback)},interval);return intervals[intervalId.toString()]=1,intervalId},clear:function(e){e&&(win.clearInterval(e),delete intervals[e.toString()])},reset:function(){for(intervalId in intervals)win.clearInterval(intervalId),delete intervals[intervalId.toString()]}}}(),TRC.Timeout=(timers={},{set:function(e,t){var i=win.setTimeout(function(){delete timers[i.toString()],e()},t);return timers[i.toString()]=1,i},clear:function(e){e&&(win.clearTimeout(e),delete timers[e.toString()])},reset:function(){var e;for(e in timers)win.clearTimeout(e),delete timers[e.toString()]}}),TRC.trcReady=function(){try{TRC.pConsole("page","debug","libtrc : calling TRC.ready",""),invokeInheritedModules(),TRC.implLoaded=!0;var e=TRC.ready({style:".trc_rbox_container{direction:ltr;text-align:left}.trc_multi_widget_container{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}.trc_multi_widget_container .trc_rbox_div{margin:0}.trc_rbox_header{border:0 solid;overflow:hidden;vertical-align:middle}.trc_rbox_container .trc_img{display:inline-block!important}.trc_rbox_header_icon_div{display:table-cell;vertical-align:baseline}.trc_rbox_header .trc_rbox_header_icon_div .trc_rbox_header_icon_img{vertical-align:middle;width:auto}.trc_rbox_header_icon_span{display:inline-table}.in_trc_header{position:relative!important;float:right;margin:0}#trc_rbox_css_loaded{overflow:hidden;width:0;height:0}.trc_rbox{margin-top:0}.trc_rbox_div{margin:0 0 3px;direction:ltr;padding:0;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box;overflow:auto;position:relative;width:auto;border:solid #ccc 1px}.loading-animation span{display:block}.videoCube{zoom:1;cursor:pointer;float:none;overflow:hidden;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.videoCube_hover,div.videoCube:hover{cursor:pointer}.videoCube span.video-title:hover,.videoCube_hover span.video-title{text-decoration:underline}.videoCube a{text-decoration:none;border:0;color:#000;cursor:pointer}.videoCube a,.videoCube a:hover,.videoCube a:link,.videoCube_hover a{text-decoration:none!important;outline:0}.videoCube a .thumbBlock{float:left;display:block;overflow:hidden!important}.videoCube a img,.videoCube img{border:0;display:block;margin:0;height:auto;width:auto}.videoCube .video-label{display:block;overflow:hidden}.videoCube .video-label{width:auto!important;white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.videoCube .video-label-box.label-box-with-title-icon{display:table}.video-icon-container{float:left;display:table-cell;vertical-align:baseline}.video-icon-img{vertical-align:middle}.videoCube .video-duration{height:0;float:left;position:relative;color:#fff;font-size:11px}.videoCube .video-duration dt{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px;background-color:#000;opacity:.6}.videoCube span.video-label.trc_ellipsis{position:relative;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical}.videoCube span.video-label.trc-smart-ellipsis{position:relative;overflow:hidden}.videoCube span.video-label.trc-smart-ellipsis ins{display:inline-block;text-decoration:inherit}.videoCube span.video-label.trc-smart-ellipsis.tbl-rtl-label{float:right;direction:rtl;width:100%!important}.videoCube span.video-label.trc-smart-ellipsis.tbl-rtl-label ins{float:right;margin-left:5px;direction:rtl}.videoCube span.video-label.trc-smart-ellipsis ins.lastLineEllipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal;width:100%}.video-duration.video-duration-detail div{color:#fff}.trc_rbox .sponsored{position:relative;display:block;overflow:visible;height:auto;width:auto;padding-right:0;text-align:right;font-size:9px}.trc_rbox_div{height:410px}.videoCube{direction:ltr;font-size:11px;margin:0;color:#000;border-width:0}.videoCube.vertical:first-child{border-top:0;margin-top:0}.videoCube.horizontal:first-child{border-left:0;margin-left:0}.videoCube_hover,div.videoCube:hover{background-color:#ebf0ff;color:#000}.videoCube .thumbBlock{margin-right:5px;margin-left:1px;border-style:solid}.videoCube a img,.videoCube img{border-color:#ececec}.videoCube .video-label-box{margin-left:81px}.videoCube .video-label dt{font-weight:700}.videoCube .video-title{height:auto;margin-bottom:3px;white-space:normal}.videoCube .trc_inline_detail_spacer{display:inline-block;white-space:pre}.loading-animation{font-family:sans;font-size:1.5em;text-align:center;color:gray;height:100%}.trc_rbox_header{font-family:Arial,Helvetica,sans-serif;font-size:12px;font-weight:700;text-decoration:none;color:#000}.trc_header_right_part{position:absolute;left:50%;top:0}.branding_div{overflow:visible;float:right}.branding_div img{height:20px}.videoCube .branding .logoDiv{font-size:inherit;line-height:inherit;background:0 0;margin:0;padding:0}.videoCube .branding .logoDiv a{vertical-align:inherit;color:inherit;line-height:inherit}.videoCube .branding .logoDiv a span{vertical-align:inherit}.trc_related_container .videoCube .branding .attribution-disclosure-link-sponsored{display:inline-block;float:none}.trc_related_container .videoCube .branding .attribution-disclosure-link-sponsored.align-disclosure-right{float:right;margin-left:auto;padding-left:2px}.videoCube .video-label-box .branding.composite-branding{display:-webkit-box;display:-ms-flexbox;display:flex}.branding.composite-branding>*{display:inline-block;vertical-align:bottom}.branding .branding-separator{margin:0 2px;font-weight:400}.branding .branding-inner{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.video-label-box span.branding.inline-branding{display:inline-block}.trc_related_container div.horizontal{float:left;box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;-webkit-box-sizing:border-box}.trc_related_container DIV.videoCube.thumbnail_bottom .thumbBlock,.trc_related_container DIV.videoCube.thumbnail_top .thumbBlock{float:none}.vidiscovery-note{display:none}.videoCube .thumbBlock .trc_sponsored_overlay_base{display:block;width:auto;margin-left:0;position:absolute;color:#fff!important}.videoCube .thumbBlock .trc_sponsored_overlay{opacity:.6;display:block;position:absolute}.videoCube .thumbBlock .trc_sponsored_overlay_base .sponsored{position:relative;display:block;overflow:visible;width:auto;text-align:center;padding:0 5px;margin-top:0}.videoCube .thumbBlock .trc_sponsored_overlay_base.round .trc_sponsored_overlay{border-radius:4px;-moz-border-radius:4px;-webkit-border-radius:4px}.videoCube .thumbBlock .trc_sponsored_overlay_base.round{margin-left:4px}.thumbnail-emblem,.videoCube .thumbnail-overlay,.videoCube:hover .thumbnail-overlay,.videoCube_hover .thumbnail-overlay{position:absolute;background:transparent no-repeat;background-size:contain;z-index:50}.thumbnail_bottom{padding-bottom:8px}.trc_related_container .logoDiv{font-family:Arial,Helvetica,sans-serif;white-space:nowrap;font-size:9px}.trc_related_container .logoDiv a{font-size:9px;text-decoration:none!important;color:#000;margin-right:1px;vertical-align:text-bottom}.logoDiv a span:hover{text-decoration:underline}.trc_rbox_header .logoDiv{font-size:1em}.trc_rbox_container.trc_expandable{overflow:hidden;max-height:0;transition-property:max-height;-webkit-transition-property:max-height;-moz-transition-property:max-height;-o-transition-property:max-height;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-ms-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0)}.trc_related_container .videoCube .thumbBlock .branding{position:absolute;bottom:0;z-index:1;width:100%;margin:0;padding:5px 0;text-align:center}.syndicatedItem .branding{margin:0}.trc-inplayer-rbox{background:#333;background:rgba(30,30,30,.9);bottom:0;position:absolute;height:300px;text-align:center}.trc-inplayer-rbox .trc_rbox_container{margin:50px auto 0;width:640px}.trc_rbox.trc-auto-size{width:100%;height:100%}.videoCube.thumbnail_under .thumbBlock{margin-left:0;margin-right:0}.videoCube.thumbnail_under .label-box-overlay{width:100%;height:100%;position:absolute;background:#000;opacity:.75;top:0}.videoCube.thumbnail_under .video-labels-anchor{width:100%;height:auto;position:absolute;z-index:1;left:0;bottom:0;min-height:2.58em;max-height:2.58em;padding-top:2px;padding-bottom:2px;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear;line-height:1.25em}.videoCube.thumbnail_under:hover .video-labels-anchor{opacity:1;max-height:6.45em}.videoCube.thumbnail_under .video-labels-anchor span.branding,.videoCube.thumbnail_under .video-labels-anchor span.video-title{position:relative;z-index:1;padding:0 3px;margin:0}.videoCube.thumbnail_under .video-title{min-height:2.58em}.videoCube.thumbnail_under .tbl-text-over-container{width:100%;position:absolute;z-index:1;left:0;bottom:0;min-height:66%;max-height:66%;padding-top:2px;padding-bottom:2px;line-height:1.25em}.videoCube.thumbnail_under .tbl-text-over-container .tbl-text-over{height:100%;width:100%;position:absolute;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.8) 100%)}.videoCube.thumbnail_under .tbl-text-over-container span.branding,.videoCube.thumbnail_under .tbl-text-over-container span.video-description,.videoCube.thumbnail_under .tbl-text-over-container span.video-title{position:relative;z-index:1;padding:0 8px;margin:0}.videoCube.thumbnail_under .tbl-text-over-container span.video-title{margin-bottom:6px;min-height:auto}.videoCube.thumbnail_under .tbl-text-over-container .video-label-box{position:absolute;bottom:0;left:0;width:100%;padding:0 8px 6px 8px;min-height:auto}.trc-auto-size .trc_rbox_outer .trc_rbox_div{height:auto;width:auto}.trc-auto-size .trc_rbox_div .videoCube{height:auto}.trc-auto-size .trc_rbox_div .videoCube.trc-first-recommendation{margin-top:0}.trc_rbox .trc_rbox_outer .trc_rbox_div .videoCube.trc-first-in-row{margin-left:0}.trc_elastic .trc_rbox{width:auto}.trc_elastic .videoCube{overflow:hidden}.trc_elastic .videoCube .thumbBlock{background:transparent no-repeat center center;background-size:cover;position:absolute;display:inline-block;top:0;right:0;bottom:0;left:0;margin-left:0;margin-right:0}.trc_elastic .thumbBlock_holder{position:relative;width:100%}.trc_elastic .thumbnail_start .thumbBlock_holder{float:left;margin-right:10px}.trc_elastic .thumbnail_start.item-has-pre-label .thumbBlock_holder{margin-right:0}.trc_elastic .videoCube_aspect{width:1px}.trc_elastic .trc_rbox .trc_rbox_div{height:auto}.trc_elastic .thumbnail_start .trc-pre-label{float:left;padding-right:10px}.trc_elastic .thumbnail_start.trc-split-label .trc-main-label{float:left;padding-left:10px}.trc_elastic .video-label-box{display:block}.trc_elastic .thumbnail_start .video-label-box{box-sizing:border-box}.trc_user_adChoice_btn{background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat scroll 0 0 rgba(255,255,255,1);border-radius:0 0 0 5px;width:16px;height:16px;position:absolute;right:0;top:0;z-index:9000;cursor:pointer;border-width:2px 0 2px 4px;border-style:solid;border-color:#fff;opacity:.7;background-size:contain;visibility:hidden}.videoCube:hover .trc_user_adChoice_btn,.videoCube_hover .trc_user_adChoice_btn{visibility:visible}.videoCube .trc_user_adChoice_btn_static{visibility:visible}.p-video-overlay-container{position:absolute;width:100%;height:100%;top:0;left:0;background-color:transparent}.p-video-overlay.p-video-overlay-show{display:flex}.p-video-overlay{display:none;background-color:#000;opacity:.7;width:100%;height:100%;flex-direction:column}.p-video-overlay-action{color:#fff;width:100%;direction:ltr;text-align:center;display:flex;justify-content:center;flex-direction:column}.p-video-overlay-action.p-video-back-action{height:34%}.p-video-back-action-label{font-family:Helvetica Neue,serif;font-size:14px;font-weight:200;letter-spacing:1px}.p-video-overlay-action.p-video-goto-action{height:66%}.p-video-goto-action-url{font-family:Helvetica Neue,serif;font-size:24px;font-weight:400;text-decoration:underline;margin-top:5px}.p-video-goto-action-label{font-family:Helvetica Neue,serif;font-size:14px;font-weight:100;letter-spacing:1px}.trc_related_container .trc_clearer{clear:both;height:0;overflow:hidden;font-size:0;line-height:0;visibility:hidden}.link-adc{float:right!important}.trc-widget-footer .logoDiv{line-height:normal;padding-bottom:5px}.trc-widget-footer .link-adc a .trc_adc_wrapper,.trc_header_ext .link-adc a .trc_adc_wrapper{height:12px;width:18px;display:inline-block;padding-left:1px;margin-bottom:2px}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{vertical-align:middle;height:15px;display:inline-block;margin-top:-1px}.trc-widget-footer .link-adc a .trc_adc_s_logo,.trc_header_ext .link-adc a .trc_adc_s_logo{width:12px;height:14px;background:url(//cdn.taboola.com/static/c5/c5ef96bc-30ab-456a-b3d5-a84f367c6a46.svg) no-repeat;background-size:contain;vertical-align:middle}.trc-widget-footer .link-adc a .trc_adc_b_logo,.trc_header_ext .link-adc a .trc_adc_b_logo{width:77px;background:#fff url(//cdn.taboola.com/libtrc/static/thumbnails/0781f9c5a8637d1e162874f157460048.png) no-repeat!important;right:-1px;display:none;position:absolute}.logoDiv .trc_mobile_adc_link,.logoDiv .trc_mobile_attribution_link,.logoDiv .trc_mobile_disclosure_link{display:none}.logoDiv .trc_desktop_adc_link,.logoDiv .trc_desktop_attribution_link,.logoDiv .trc_desktop_disclosure_link{display:inline}@media screen and (max-width:767px){.logoDiv .trc_mobile_disclosure_link{display:inline}.logoDiv .trc_mobile_attribution_link{display:inline}.logoDiv .trc_mobile_adc_link{display:inline}.logoDiv .trc_desktop_disclosure_link{display:none}.logoDiv .trc_desktop_attribution_link{display:none}.logoDiv .trc_desktop_adc_link{display:none}}.trc_in_iframe .logoDiv .trc_mobile_attribution_link,.trc_in_iframe .logoDiv .trc_mobile_disclosure_link{display:inline}.trc_in_iframe .logoDiv .trc_desktop_attribution_link,.trc_in_iframe .logoDiv .trc_desktop_disclosure_link{display:none}.trc_related_container .logoDiv,.trc_related_container .trc_header_ext .logoDiv{float:right}.trc_related_container .logoDiv+.logoDiv{margin-right:2px}.trc_related_container .attribution-disclosure-link-hybrid,.trc_related_container .attribution-disclosure-link-sponsored{display:none}.trc-w2f.trc-content-sponsored .attribution-disclosure-link-sponsored,.trc_related_container .trc-content-sponsored .attribution-disclosure-link-sponsored{display:block}.trc-w2f.trc-content-hybrid .attribution-disclosure-link-hybrid,.trc_related_container .trc-content-hybrid .attribution-disclosure-link-hybrid{display:block}.trc_related_container .trc-widget-footer:hover a span,.trc_related_container .trc_header_ext:hover a span{text-decoration:underline!important}.logoDiv a span.trc_logos_v_align{display:inline-block!important;font-size:15px!important;line-height:1em!important;width:0!important}.trc_related_container .trc-widget-footer:hover a span.trc_adc_wrapper,.trc_related_container .trc-widget-footer:hover a span.trc_logos_v_align,.trc_related_container .trc_header_ext:hover a span.trc_adc_wrapper,.trc_related_container .trc_header_ext:hover a span.trc_logos_v_align{text-decoration:none!important}.trc_related_container{clear:both}.tbl-loading-spinner{width:100%;height:40px;background:url(//cdn.taboola.com/static/91/91a25024-792d-4b52-84e6-ad1478c3f552.gif) center center no-repeat;background-size:40px}.tbl-hidden{display:none!important}.tbl-batch-anchor{width:100%;height:1px}.iw_video_frame .trc_rbox_div{overflow:hidden}.trc-w2f .trc_rbox .trc-widget-footer,.trc-w2f .trc_rbox .trc_rbox_header{display:none!important}"});if(e.global["smart-ellipsis"]&&!TRC.ellipsisListening&&(TRC.listen("ellipsis",e._repaintEllipsis.trcBind(e)),TRC.listen("allrender",e._repaintEllipsis.trcBind(e)),TRC.listen("batchrender",e._repaintEllipsis.trcBind(e)),TRC.ellipsisListening=!0),!e.invisible)return;TRC.dom.onReady(function(){div?(div.innerHTML="",div.style.display="none"):(div=doc.createElement("div"),doc.body.appendChild(div).style.display="none"),_taboola.push({mode:"rbox-tracking",container:div})})}catch(e){__trcError("Error in libtrc initialization",e)}},TRC.pConsole("","time","impl file loaded",""),TRC.utm.push((new Date).getTime()-TRC.utm.start),TRC.tlf&&console.timeStamp("call trcReady"),TRC.trcReady()}(window,document);