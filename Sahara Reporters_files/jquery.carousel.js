(function($){$.fn.carousel=function(options){options=$.extend({speed:5000,class_active:'active',class_inactive:'inactive',slide_animate_callback:function(){},navigation_option_previous:null,navigation_option_next:null,pagination:false,pagination_navigation:false,child_selector:null},options);$.fn.carousel.defaults=options;$.fn.carousel.carousel_clock_start=function(){$.fn.carousel.carousel_clock=setInterval(function(e){$.fn.carousel.carousel_slide_animate_direction("next");},options.speed);};$.fn.carousel.carousel_clock_stop=function(){clearInterval($.fn.carousel.carousel_clock);};$.fn.carousel.carousel_slide_animate_in=function(index){$.fn.carousel.carousel_slides[index].removeClass(options.class_inactive);$.fn.carousel.carousel_slides[index].addClass(options.class_active);$.fn.carousel.carousel_slide_update_neighbors();if($.fn.carousel.carousel_pagination_items[index]){$.fn.carousel.carousel_pagination_items[index].addClass(options.class_active);}};$.fn.carousel.carousel_slide_animate_out=function(index){$.fn.carousel.carousel_slides[index].removeClass(options.class_active);$.fn.carousel.carousel_slides[index].addClass(options.class_inactive);if($.fn.carousel.carousel_pagination_items[index]){$.fn.carousel.carousel_pagination_items[index].removeClass(options.class_active);}};$.fn.carousel.carousel_slide_animate_to=function(index){$.fn.carousel.carousel_clock_stop();if($.fn.carousel.carousel_slides.length=="1"){return false;}
$.fn.carousel.carousel_slides_index_previous=$.fn.carousel.carousel_slides_index_active;$.fn.carousel.carousel_slides_index_active=index;$.fn.carousel.carousel_slide_animate_out($.fn.carousel.carousel_slides_index_previous);$.fn.carousel.carousel_slide_animate_in($.fn.carousel.carousel_slides_index_active);options.slide_animate_callback($.fn.carousel.carousel_slides[$.fn.carousel.carousel_slides_index_active]);$.fn.carousel.carousel_clock_start();};$.fn.carousel.carousel_slide_update_neighbors=function(){$.fn.carousel.carousel_slides_neighbor_count_before=Math.floor(($.fn.carousel.carousel_slides_count-1)/2);$.fn.carousel.carousel_slides_neighbor_count_after=Math.ceil(($.fn.carousel.carousel_slides_count-1)/2);var regex_before=new RegExp('\\b'+'before-'+'.+?\\b','g');var regex_after=new RegExp('\\b'+'after-'+'.+?\\b','g');for(var i=0;i<$.fn.carousel.carousel_slides_count;i++){var new_class="";if(i<$.fn.carousel.carousel_slides_index_active){var offset=($.fn.carousel.carousel_slides_index_active-i);if(offset<=$.fn.carousel.carousel_slides_neighbor_count_before){new_class="before-"+offset;}else{var offset_temp=$.fn.carousel.carousel_slides_neighbor_count_after-(offset-$.fn.carousel.carousel_slides_neighbor_count_before-1);new_class="after-"+offset_temp;}}else if(i>$.fn.carousel.carousel_slides_index_active){var offset=-1*($.fn.carousel.carousel_slides_index_active-i);if(offset<=$.fn.carousel.carousel_slides_neighbor_count_after){new_class="after-"+offset;}else{var offset_temp=$.fn.carousel.carousel_slides_neighbor_count_before-(offset-$.fn.carousel.carousel_slides_neighbor_count_after-1);new_class="before-"+offset_temp;}}else{}
$.fn.carousel.carousel_slides[i][0].className=$.fn.carousel.carousel_slides[i][0].className.replace(regex_before,'');$.fn.carousel.carousel_slides[i][0].className=$.fn.carousel.carousel_slides[i][0].className.replace(regex_after,'');$.fn.carousel.carousel_slides[i].addClass(new_class);}};$.fn.carousel.carousel_slide_animate_direction=function(direction){$.fn.carousel.carousel_clock_stop();$.fn.carousel.carousel_slides_index_previous=$.fn.carousel.carousel_slides_index_active;$.fn.carousel.carousel_slides_direction=direction;if($.fn.carousel.carousel_slides.length=="1"){return false;}
if(direction=="next"){$.fn.carousel.carousel_slides_index_active++
if($.fn.carousel.carousel_slides_index_active==$.fn.carousel.carousel_slides_count){$.fn.carousel.carousel_slides_index_active=0;}}else if(direction=="prev"){$.fn.carousel.carousel_slides_index_active--
if($.fn.carousel.carousel_slides_index_active<0){$.fn.carousel.carousel_slides_index_active=$.fn.carousel.carousel_slides_count-1;}}else{$.fn.carousel.carousel_slides_index_active=direction;if($.fn.carousel.carousel_slides_index_previous<$.fn.carousel.carousel_slides_index_active){$.fn.carousel.carousel_slides_direction="next";}else if($.fn.carousel.carousel_slides_index_previous>$.fn.carousel.carousel_slides_index_active){$.fn.carousel.carousel_slides_direction="prev"}}
$.fn.carousel.carousel_slide_animate_out($.fn.carousel.carousel_slides_index_previous);$.fn.carousel.carousel_slide_animate_in($.fn.carousel.carousel_slides_index_active);options.slide_animate_callback($.fn.carousel.carousel_slides[$.fn.carousel.carousel_slides_index_active]);$.fn.carousel.carousel_clock_start();};return this.each(function(){$.fn.carousel.element=$(this);$.fn.carousel.carousel_children=[];$.fn.carousel.carousel_slides=[];$.fn.carousel.carousel_slides_count=0;$.fn.carousel.carousel_slides_index_active=0;$.fn.carousel.carousel_slides_index_previous=0;$.fn.carousel.carousel_slides_direction;$.fn.carousel.carousel_pagination_items=[];$.fn.carousel.carousel_clock;if(options.child_selector==null){$.fn.carousel.carousel_children=$.fn.carousel.element.children();}else{$.fn.carousel.carousel_children=$.fn.carousel.element.find(options.child_selector);}
$.fn.carousel.carousel_children.each(function(){if(!$(this).hasClass('static')){$.fn.carousel.carousel_slides.push($(this));$.fn.carousel.carousel_slide_animate_out($.fn.carousel.carousel_slides_count);$(this).find('input').focus(function(){$.fn.carousel.carousel_clock_stop();}).blur(function(){$.fn.carousel.carousel_clock_start();});$(this).data("slide-index",$.fn.carousel.carousel_slides_count);if(options.pagination_navigation==true){$(this).click(function(){$.fn.carousel.carousel_slide_animate_to($(this).data("slide-index"));});}
$.fn.carousel.carousel_slides_count++;}});if($.fn.carousel.carousel_slides.length==1){return false;}
if(options.navigation_option_previous!=null){options.navigation_option_previous.click(function(e){e.preventDefault();$.fn.carousel.carousel_slide_animate_direction("prev");});}
if(options.navigation_option_next!=null){options.navigation_option_next.click(function(e){e.preventDefault();$.fn.carousel.carousel_slide_animate_direction("next");});}
if(options.pagination==true){var pagination=$("<ul class='carousel-pagination'></ul>");pagination.appendTo($.fn.carousel.element);for(var i=0;i<$.fn.carousel.carousel_slides.length;i++){var pagination_item=$("<li><a href='' data-slide-index='"+i+"'><span>"+i+"</span></a></li>");pagination_item.appendTo(pagination);pagination_item.find('a').click(function(e){e.preventDefault();$.fn.carousel.carousel_slide_animate_to(this.getAttribute("data-slide-index"));});$.fn.carousel.carousel_pagination_items.push(pagination_item);}}
$.fn.carousel.carousel_slide_animate_in($.fn.carousel.carousel_slides_index_active);options.slide_animate_callback($.fn.carousel.carousel_slides[$.fn.carousel.carousel_slides_index_active]);$.fn.carousel.carousel_clock_start();});};})(jQuery);